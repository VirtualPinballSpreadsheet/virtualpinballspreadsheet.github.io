import{s as M,f as d,g,h as k,d as p,j as u,i as v,$ as O,a as R,c as Z,l as C,m as N,T as b,G as w,n as q}from"./scheduler.a453f4b8.js";import{S as Q,i as H,a as h,g as S,c as V,t as _,b as D,d as E,m as y,e as F}from"./index.fa05b556.js";import{e as B}from"./each.013e569e.js";import{u as J,v as K,w as W,x as X,y as Y,z as I,k as x,F as G}from"./index.bb3a9776.js";import{T as ee}from"./modeMapping.9aa6ac2b.js";import{b as te,c as oe,d as ae}from"./index.c16d8701.js";import{d as ne}from"./index.6e379fdf.js";import{l as j}from"./ProgressBar.svelte_svelte_type_style_lang.c6c4a621.js";import{D as re}from"./DbStore.6d56cf40.js";const se=s=>s.url?s.url.includes("vpuniverse")?{tooltip:"VPUniverse",class:"variant-ghost-tertiary",icon:K,title:"VPU",...s}:s.url.includes("vpforums")?{tooltip:"VP Forums",class:"variant-ghost-warning",icon:W,title:"VPF",...s}:s.url.includes("pinballnirvana")?{tooltip:"Pinball Nirvana",class:"variant-ghost-primary",icon:X,title:"Nirvana",...s}:s.url.includes("drive.google")?{tooltip:"Google Drive",class:"variant-ghost-surface",icon:te,title:"GDrive",...s}:s.url.includes("facebook")?{tooltip:"Facebook",class:"variant-ghost-tertiary",icon:oe,title:"Facebook",...s}:s.url.includes("mega")?{tooltip:"Mega",class:"variant-ghost-primary",icon:Y,title:"Mega",...s}:s.url.includes("dropbox")?{tooltip:"Dropbox",class:"variant-ghost-secondary",icon:ae,title:"Dropbox",...s}:s.url.includes("zen")?{tooltip:"Zen Pinball",class:"variant-ghost-surface",icon:I,title:"Zen",...s}:{tooltip:"External",class:"variant-ghost-success",icon:x,title:"Ext",...s}:{tooltip:"???",class:"variant-soft",icon:J,title:"???",...s};function U(s,e,n){const r=s.slice();return r[2]=e[n],r}function ie(s){let e,n,r,t=s[2].title+"",l,o,i,a;return n=new G({props:{icon:s[2].icon}}),{c(){e=d("a"),D(n.$$.fragment),r=d("span"),l=C(t),this.h()},l(c){e=g(c,"A",{href:!0,target:!0,class:!0});var f=k(e);E(n.$$.fragment,f),r=g(f,"SPAN",{});var m=k(r);l=N(m,t),m.forEach(p),f.forEach(p),this.h()},h(){u(e,"href",o=s[2].broken?"":s[2].url),u(e,"target","_blank"),u(e,"class",i="chip "+s[2].class),b(e,"opacity-20",s[2].broken)},m(c,f){v(c,e,f),y(n,e,null),w(e,r),w(r,l),a=!0},p(c,f){const m={};f&1&&(m.icon=c[2].icon),n.$set(m),(!a||f&1)&&t!==(t=c[2].title+"")&&q(l,t),(!a||f&1&&o!==(o=c[2].broken?"":c[2].url))&&u(e,"href",o),(!a||f&1&&i!==(i="chip "+c[2].class))&&u(e,"class",i),(!a||f&1)&&b(e,"opacity-20",c[2].broken)},i(c){a||(h(n.$$.fragment,c),a=!0)},o(c){_(n.$$.fragment,c),a=!1},d(c){c&&p(e),F(n)}}}function le(s){let e,n,r,t,l;return n=new G({props:{icon:s[2].icon}}),{c(){e=d("span"),D(n.$$.fragment),r=C(" Broken"),this.h()},l(o){e=g(o,"SPAN",{class:!0});var i=k(e);E(n.$$.fragment,i),r=N(i," Broken"),i.forEach(p),this.h()},h(){u(e,"class",t="chip "+s[2].class),b(e,"opacity-20",s[2].broken)},m(o,i){v(o,e,i),y(n,e,null),w(e,r),l=!0},p(o,i){const a={};i&1&&(a.icon=o[2].icon),n.$set(a),(!l||i&1&&t!==(t="chip "+o[2].class))&&u(e,"class",t),(!l||i&1)&&b(e,"opacity-20",o[2].broken)},i(o){l||(h(n.$$.fragment,o),l=!0)},o(o){_(n.$$.fragment,o),l=!1},d(o){o&&p(e),F(n)}}}function ce(s){let e,n,r,t;const l=[le,ie],o=[];function i(a,c){return a[2].broken?0:1}return e=i(s),n=o[e]=l[e](s),{c(){n.c(),r=R()},l(a){n.l(a),r=Z(a)},m(a,c){o[e].m(a,c),v(a,r,c),t=!0},p(a,c){let f=e;e=i(a),e===f?o[e].p(a,c):(S(),_(o[f],1,1,()=>{o[f]=null}),V(),n=o[e],n?n.p(a,c):(n=o[e]=l[e](a),n.c()),h(n,1),n.m(r.parentNode,r))},i(a){t||(h(n),t=!0)},o(a){_(n),t=!1},d(a){a&&p(r),o[e].d(a)}}}function A(s){let e,n;return e=new ee({props:{content:s[2].broken?"This link is broken and needs to be updated. If you are aware of a working upload, please contact us!":s[2].tooltip,$$slots:{default:[ce]},$$scope:{ctx:s}}}),{c(){D(e.$$.fragment)},l(r){E(e.$$.fragment,r)},m(r,t){y(e,r,t),n=!0},p(r,t){const l={};t&1&&(l.content=r[2].broken?"This link is broken and needs to be updated. If you are aware of a working upload, please contact us!":r[2].tooltip),t&33&&(l.$$scope={dirty:t,ctx:r}),e.$set(l)},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){F(e,r)}}}function fe(s){let e,n,r=B(s[0]),t=[];for(let o=0;o<r.length;o+=1)t[o]=A(U(s,r,o));const l=o=>_(t[o],1,1,()=>{t[o]=null});return{c(){e=d("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=g(o,"DIV",{class:!0});var i=k(e);for(let a=0;a<t.length;a+=1)t[a].l(i);i.forEach(p),this.h()},h(){u(e,"class","flex gap-1")},m(o,i){v(o,e,i);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null);n=!0},p(o,[i]){if(i&1){r=B(o[0]);let a;for(a=0;a<r.length;a+=1){const c=U(o,r,a);t[a]?(t[a].p(c,i),h(t[a],1)):(t[a]=A(c),t[a].c(),h(t[a],1),t[a].m(e,null))}for(S(),a=r.length;a<t.length;a+=1)l(a);V()}},i(o){if(!n){for(let i=0;i<r.length;i+=1)h(t[i]);n=!0}},o(o){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)_(t[i]);n=!1},d(o){o&&p(e),O(t,o)}}}function ue(s,e,n){let r,{urls:t=[]}=e;return s.$$set=l=>{"urls"in l&&n(1,t=l.urls)},s.$$.update=()=>{s.$$.dirty&2&&n(0,r=t.map(l=>se(l)).filter(l=>!!l))},[r,t]}class Fe extends Q{constructor(e){super(),H(this,e,ue,fe,M,{urls:1})}}const $=j("lists",{}),pe=j("ckechedBookmarks",[]),he=ne([$,re.dbStore],([s,e])=>{const n=s.bookmarks||[],r=[];return Object.entries(n).forEach(([t,l])=>{var a;const o=(a=e[t])==null?void 0:a.name;if(!o)return;const i={name:o,id:t,files:{}};Object.entries(l).sort((c,f)=>c[0]<f[0]?-1:1).forEach(([c,f])=>{const m=f.map(T=>{var L,P;return(P=(L=e[t])==null?void 0:L[c])==null?void 0:P.find(z=>z.id===T)});i.files[c]=m}),r.push(i)}),r}),me=(s,e,n,r)=>{$.update(t=>{var o,i;t[s]||(t[s]={});const l=t[s];return l[e]||(l[e]={}),l[e][n]||(l[e][n]=[]),(o=l[e][n])!=null&&o.includes(r)||(i=l[e][n])==null||i.push(r),t})},_e=(s,e)=>{$.update(n=>{var t;const r=n[s];if(r){if(r[e])return delete r[e],n;for(const l in r){const o=r[l];for(const i in o)if((t=o[i])!=null&&t.includes(e))return o[i]=o[i].filter(a=>e!==a),n}return n}})},Le={listStore:$,bookmarks:he,checkedBookmarks:pe,addToList:me,deleteFromList:_e};export{Le as L,Fe as U,se as g};
