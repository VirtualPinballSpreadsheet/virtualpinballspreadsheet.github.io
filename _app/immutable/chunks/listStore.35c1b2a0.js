import{s as O,f as d,g,h as k,d as p,j as u,i as v,$ as R,a as Z,c as q,l as C,m as N,T as b,G as w,n as z}from"./scheduler.a453f4b8.js";import{S as Q,i as H,a as h,g as S,c as V,t as _,b as D,d as E,m as y,e as F}from"./index.fa05b556.js";import{e as B}from"./each.013e569e.js";import{s as J,t as K,u as W,v as X,w as Y,x as I,i as x,F as G}from"./index.8d5d1200.js";import{T as ee}from"./modeMapping.29dcbfdf.js";import{b as te,c as oe,d as ae}from"./index.c16d8701.js";import{d as ne}from"./index.6e379fdf.js";import{l as j}from"./ProgressBar.svelte_svelte_type_style_lang.c6c4a621.js";import{D as se}from"./DbStore.6d56cf40.js";const re=r=>r.url?r.url.includes("vpuniverse")?{tooltip:"VPUniverse",class:"variant-ghost-tertiary",icon:K,title:"VPU",...r}:r.url.includes("vpforums")?{tooltip:"VP Forums",class:"variant-ghost-warning",icon:W,title:"VPF",...r}:r.url.includes("pinballnirvana")?{tooltip:"Pinball Nirvana",class:"variant-ghost-primary",icon:X,title:"Nirvana",...r}:r.url.includes("drive.google")?{tooltip:"Google Drive",class:"variant-ghost-surface",icon:te,title:"GDrive",...r}:r.url.includes("facebook")?{tooltip:"Facebook",class:"variant-ghost-tertiary",icon:oe,title:"Facebook",...r}:r.url.includes("mega")?{tooltip:"Mega",class:"variant-ghost-primary",icon:Y,title:"Mega",...r}:r.url.includes("dropbox")?{tooltip:"Dropbox",class:"variant-ghost-secondary",icon:ae,title:"Dropbox",...r}:r.url.includes("zen")?{tooltip:"Zen Pinball",class:"variant-ghost-surface",icon:I,title:"Zen",...r}:{tooltip:"External",class:"variant-ghost-success",icon:x,title:"Ext",...r}:{tooltip:"???",class:"variant-soft",icon:J,title:"???",...r};function U(r,e,n){const s=r.slice();return s[2]=e[n],s}function ie(r){let e,n,s,t=r[2].title+"",l,o,i,a;return n=new G({props:{icon:r[2].icon}}),{c(){e=d("a"),D(n.$$.fragment),s=d("span"),l=C(t),this.h()},l(c){e=g(c,"A",{href:!0,target:!0,class:!0});var f=k(e);E(n.$$.fragment,f),s=g(f,"SPAN",{});var m=k(s);l=N(m,t),m.forEach(p),f.forEach(p),this.h()},h(){u(e,"href",o=r[2].broken?"":r[2].url),u(e,"target","_blank"),u(e,"class",i="chip "+r[2].class),b(e,"opacity-20",r[2].broken)},m(c,f){v(c,e,f),y(n,e,null),w(e,s),w(s,l),a=!0},p(c,f){const m={};f&1&&(m.icon=c[2].icon),n.$set(m),(!a||f&1)&&t!==(t=c[2].title+"")&&z(l,t),(!a||f&1&&o!==(o=c[2].broken?"":c[2].url))&&u(e,"href",o),(!a||f&1&&i!==(i="chip "+c[2].class))&&u(e,"class",i),(!a||f&1)&&b(e,"opacity-20",c[2].broken)},i(c){a||(h(n.$$.fragment,c),a=!0)},o(c){_(n.$$.fragment,c),a=!1},d(c){c&&p(e),F(n)}}}function le(r){let e,n,s,t,l;return n=new G({props:{icon:r[2].icon}}),{c(){e=d("span"),D(n.$$.fragment),s=C(" Broken"),this.h()},l(o){e=g(o,"SPAN",{class:!0});var i=k(e);E(n.$$.fragment,i),s=N(i," Broken"),i.forEach(p),this.h()},h(){u(e,"class",t="chip "+r[2].class),b(e,"opacity-20",r[2].broken)},m(o,i){v(o,e,i),y(n,e,null),w(e,s),l=!0},p(o,i){const a={};i&1&&(a.icon=o[2].icon),n.$set(a),(!l||i&1&&t!==(t="chip "+o[2].class))&&u(e,"class",t),(!l||i&1)&&b(e,"opacity-20",o[2].broken)},i(o){l||(h(n.$$.fragment,o),l=!0)},o(o){_(n.$$.fragment,o),l=!1},d(o){o&&p(e),F(n)}}}function ce(r){let e,n,s,t;const l=[le,ie],o=[];function i(a,c){return a[2].broken?0:1}return e=i(r),n=o[e]=l[e](r),{c(){n.c(),s=Z()},l(a){n.l(a),s=q(a)},m(a,c){o[e].m(a,c),v(a,s,c),t=!0},p(a,c){let f=e;e=i(a),e===f?o[e].p(a,c):(S(),_(o[f],1,1,()=>{o[f]=null}),V(),n=o[e],n?n.p(a,c):(n=o[e]=l[e](a),n.c()),h(n,1),n.m(s.parentNode,s))},i(a){t||(h(n),t=!0)},o(a){_(n),t=!1},d(a){a&&p(s),o[e].d(a)}}}function A(r){let e,n;return e=new ee({props:{content:r[2].broken?"This link is broken and needs to be updated. If you are aware of a working upload, please contact us!":r[2].tooltip,$$slots:{default:[ce]},$$scope:{ctx:r}}}),{c(){D(e.$$.fragment)},l(s){E(e.$$.fragment,s)},m(s,t){y(e,s,t),n=!0},p(s,t){const l={};t&1&&(l.content=s[2].broken?"This link is broken and needs to be updated. If you are aware of a working upload, please contact us!":s[2].tooltip),t&33&&(l.$$scope={dirty:t,ctx:s}),e.$set(l)},i(s){n||(h(e.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),n=!1},d(s){F(e,s)}}}function fe(r){let e,n,s=B(r[0]),t=[];for(let o=0;o<s.length;o+=1)t[o]=A(U(r,s,o));const l=o=>_(t[o],1,1,()=>{t[o]=null});return{c(){e=d("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=g(o,"DIV",{class:!0});var i=k(e);for(let a=0;a<t.length;a+=1)t[a].l(i);i.forEach(p),this.h()},h(){u(e,"class","flex gap-1")},m(o,i){v(o,e,i);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null);n=!0},p(o,[i]){if(i&1){s=B(o[0]);let a;for(a=0;a<s.length;a+=1){const c=U(o,s,a);t[a]?(t[a].p(c,i),h(t[a],1)):(t[a]=A(c),t[a].c(),h(t[a],1),t[a].m(e,null))}for(S(),a=s.length;a<t.length;a+=1)l(a);V()}},i(o){if(!n){for(let i=0;i<s.length;i+=1)h(t[i]);n=!0}},o(o){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)_(t[i]);n=!1},d(o){o&&p(e),R(t,o)}}}function ue(r,e,n){let s,{urls:t=[]}=e;return r.$$set=l=>{"urls"in l&&n(1,t=l.urls)},r.$$.update=()=>{r.$$.dirty&2&&n(0,s=t.map(l=>re(l)).filter(l=>!!l))},[s,t]}class Fe extends Q{constructor(e){super(),H(this,e,ue,fe,O,{urls:1})}}const $=j("lists",{}),pe=j("ckechedBookmarks",[]),he=ne([$,se.dbStore],([r,e])=>{const n=r.bookmarks||[],s=[];return Object.entries(n).forEach(([t,l])=>{var a;const o=(a=e[t])==null?void 0:a.name;if(!o)return;const i={name:o,id:t,files:{}};Object.entries(l).sort((c,f)=>c[0]<f[0]?-1:1).forEach(([c,f])=>{const m=f.map(T=>{var L,P;return(P=(L=e[t])==null?void 0:L[c])==null?void 0:P.find(M=>M.id===T)});i.files[c]=m}),s.push(i)}),s}),me=(r,e,n,s)=>{$.update(t=>{var o,i;t[r]||(t[r]={});const l=t[r];return l[e]||(l[e]={}),l[e][n]||(l[e][n]=[]),(o=l[e][n])!=null&&o.includes(s)||(i=l[e][n])==null||i.push(s),t})},_e=(r,e)=>{$.update(n=>{var t;const s=n[r];if(s){if(s[e])return delete s[e],n;for(const l in s){const o=s[l];for(const i in o)if((t=o[i])!=null&&t.includes(e))return o[i]=o[i].filter(a=>e!==a),n}return n}})},Le={listStore:$,bookmarks:he,checkedBookmarks:pe,addToList:me,deleteFromList:_e};export{Le as L,Fe as U,re as g};
