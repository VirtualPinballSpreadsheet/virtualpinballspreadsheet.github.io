import{a2 as me,s as J,y as he,f as y,a as q,l as N,g as L,h as g,d as _,c as I,m as ee,j as E,i as F,H as D,T as ve,z as we,A as _e,B as be,n as te,a0 as ke,W as Z}from"./scheduler.4bea28c8.js";import{S as oe,i as ne,a as U,t as S,g as Ee,c as $e,b as ae,d as re,m as se,e as ie}from"./index.10be7516.js";import{e as K}from"./bgPlaceholder.386b87e8.js";import{v as ye,w as Le,x as ge,y as De,z as Fe,k as Ue,F as Ae}from"./modeMapping.791c046a.js";import{w as Se,d as ze}from"./index.56f04d27.js";import{l as le,D as Ce}from"./formatDate.b0a5b229.js";import{n as Ve}from"./index.browser.7e542916.js";const Me=Se(void 0);function Pe(t,e){const{computePosition:s,autoUpdate:n,offset:o,shift:l,flip:r,arrow:i,size:a,autoPlacement:d,hide:f,inline:m}=me(Me),c={open:!1,autoUpdateCleanup:()=>{}},p=':is(a[href], button, input, textarea, select, details, [tabindex]):not([tabindex="-1"])';let h;const w="https://www.skeleton.dev/utilities/popups";let u,z;function j(){u=document.querySelector(`[data-popup="${e.target}"]`)??document.createElement("div"),z=u.querySelector(".arrow")??document.createElement("div")}j();function C(){var b,$,M,B,H,O,Q,G;if(!u)throw new Error(`The data-popup="${e.target}" element was not found. ${w}`);if(!s)throw new Error(`Floating UI 'computePosition' not found for data-popup="${e.target}". ${w}`);if(!o)throw new Error(`Floating UI 'offset' not found for data-popup="${e.target}". ${w}`);if(!l)throw new Error(`Floating UI 'shift' not found for data-popup="${e.target}". ${w}`);if(!r)throw new Error(`Floating UI 'flip' not found for data-popup="${e.target}". ${w}`);if(!i)throw new Error(`Floating UI 'arrow' not found for data-popup="${e.target}". ${w}`);const v=[];a&&v.push(a((b=e.middleware)==null?void 0:b.size)),d&&v.push(d(($=e.middleware)==null?void 0:$.autoPlacement)),f&&v.push(f((M=e.middleware)==null?void 0:M.hide)),m&&v.push(m((B=e.middleware)==null?void 0:B.inline)),s(t,u,{placement:e.placement??"bottom",middleware:[o(((H=e.middleware)==null?void 0:H.offset)??8),l(((O=e.middleware)==null?void 0:O.shift)??{padding:8}),r((Q=e.middleware)==null?void 0:Q.flip),i(((G=e.middleware)==null?void 0:G.arrow)??{element:z||null}),...v]}).then(({x:ce,y:ue,placement:fe,middlewareData:pe})=>{if(Object.assign(u.style,{left:`${ce}px`,top:`${ue}px`}),z){const{x:W,y:R}=pe.arrow,de={top:"bottom",right:"left",bottom:"top",left:"right"}[fe.split("-")[0]];Object.assign(z.style,{left:W!=null?`${W}px`:"",top:R!=null?`${R}px`:"",right:"",bottom:"",[de]:"-4px"})}})}function A(){u&&(c.open=!0,e.state&&e.state({state:c.open}),C(),u.style.display="block",u.style.opacity="1",u.style.pointerEvents="auto",u.removeAttribute("inert"),c.autoUpdateCleanup=n(t,u,C),h=Array.from(u==null?void 0:u.querySelectorAll(p)))}function k(v){if(!u)return;const b=parseFloat(window.getComputedStyle(u).transitionDuration.replace("s",""))*1e3;setTimeout(()=>{c.open=!1,e.state&&e.state({state:c.open}),u.style.opacity="0",u.setAttribute("inert",""),c.autoUpdateCleanup&&c.autoUpdateCleanup(),v&&v()},b)}function V(){c.open===!1?A():k()}function T(v){if(c.open===!1||t.contains(v.target))return;if(u&&u.contains(v.target)===!1){k();return}const b=e.closeQuery===void 0?"a[href], button":e.closeQuery,$=u==null?void 0:u.querySelectorAll(b);$==null||$.forEach(M=>{M.contains(v.target)&&k()})}const x=v=>{if(c.open===!1)return;const b=v.key;if(b==="Escape"){v.preventDefault(),t.focus(),k();return}h=Array.from(u==null?void 0:u.querySelectorAll(p)),c.open&&document.activeElement===t&&(b==="ArrowDown"||b==="Tab")&&p.length>0&&h.length>0&&(v.preventDefault(),h[0].focus())};switch(e.event){case"click":t.addEventListener("click",V,!0),window.addEventListener("click",T,!0);break;case"hover":t.addEventListener("mouseover",A,!0),t.addEventListener("mouseleave",()=>k(),!0);break;case"focus-blur":t.addEventListener("focus",V,!0),t.addEventListener("blur",()=>k(),!0);break;case"focus-click":t.addEventListener("focus",A,!0),window.addEventListener("click",T,!0);break;default:throw new Error(`Event value of '${e.event}' is not supported. ${w}`)}return window.addEventListener("keydown",x,!0),C(),{update(v){k(()=>{e=v,C(),j()})},destroy(){t.removeEventListener("click",V,!0),t.removeEventListener("mouseover",A,!0),t.removeEventListener("mouseleave",()=>k(),!0),t.removeEventListener("focus",V,!0),t.removeEventListener("focus",A,!0),t.removeEventListener("blur",()=>k(),!0),window.removeEventListener("click",T,!0),window.removeEventListener("keydown",x,!0)}}}function Te(t){let e,s,n,o,l,r,i,a,d,f;const m=t[4].default,c=he(m,t,t[3],null);return{c(){e=y("div"),c&&c.c(),s=q(),n=y("div"),o=y("p"),l=N(t[0]),r=q(),i=y("div"),this.h()},l(p){e=L(p,"DIV",{});var h=g(e);c&&c.l(h),h.forEach(_),s=I(p),n=L(p,"DIV",{class:!0,"data-popup":!0});var w=g(n);o=L(w,"P",{});var u=g(o);l=ee(u,t[0]),u.forEach(_),r=I(w),i=L(w,"DIV",{class:!0}),g(i).forEach(_),w.forEach(_),this.h()},h(){E(i,"class","arrow variant-filled-surface border-primary-500 border-r border-b"),E(n,"class","card px-2 py-1 variant-filled-surface z-50 border-primary-500 border shadow-md"),E(n,"data-popup",t[1])},m(p,h){F(p,e,h),c&&c.m(e,null),F(p,s,h),F(p,n,h),D(n,o),D(o,l),D(n,r),D(n,i),a=!0,d||(f=ve(Pe.call(null,e,t[2])),d=!0)},p(p,[h]){c&&c.p&&(!a||h&8)&&we(c,m,p,p[3],a?be(m,p[3],h,null):_e(p[3]),null),(!a||h&1)&&te(l,p[0])},i(p){a||(U(c,p),a=!0)},o(p){S(c,p),a=!1},d(p){p&&(_(e),_(s),_(n)),c&&c.d(p),d=!1,f()}}}function qe(t,e,s){let{$$slots:n={},$$scope:o}=e,{content:l=""}=e;const r=Ve(10),i={event:"hover",target:r,placement:"top"};return t.$$set=a=>{"content"in a&&s(0,l=a.content),"$$scope"in a&&s(3,o=a.$$scope)},[l,r,i,o,n]}class Ie extends oe{constructor(e){super(),ne(this,e,qe,Te,J,{content:0})}}var je={prefix:"fab",iconName:"dropbox",icon:[528,512,[],"f16b","M264.4 116.3l-132 84.3 132 84.3-132 84.3L0 284.1l132.3-84.3L0 116.3 132.3 32l132.1 84.3zM131.6 395.7l132-84.3 132 84.3-132 84.3-132-84.3zm132.8-111.6l132-84.3-132-83.6L395.7 32 528 116.3l-132.3 84.3L528 284.8l-132.3 84.3-131.3-85z"]},xe={prefix:"fab",iconName:"facebook",icon:[512,512,[62e3],"f09a","M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"]},Be={prefix:"fab",iconName:"google-drive",icon:[512,512,[],"f3aa","M339 314.9L175.4 32h161.2l163.6 282.9H339zm-137.5 23.6L120.9 480h310.5L512 338.5H201.5zM154.1 67.4L0 338.5 80.6 480 237 208.8 154.1 67.4z"]};const He=t=>t.url?t.url.includes("vpuniverse")?{tooltip:"VPUniverse",class:"variant-ghost-tertiary",icon:Le,title:"VPU",...t}:t.url.includes("vpforums")?{tooltip:"VP Forums",class:"variant-ghost-warning",icon:ge,title:"VPF",...t}:t.url.includes("drive.google")?{tooltip:"Google Drive",class:"variant-ghost-surface",icon:Be,title:"GDrive",...t}:t.url.includes("facebook")?{tooltip:"Facebook",class:"variant-ghost-tertiary",icon:xe,title:"Facebook",...t}:t.url.includes("mega")?{tooltip:"Mega",class:"variant-ghost-primary",icon:De,title:"Mega",...t}:t.url.includes("dropbox")?{tooltip:"Dropbox",class:"variant-ghost-secondary",icon:je,title:"Dropbox",...t}:t.url.includes("zen")?{tooltip:"Zen Pinball",class:"variant-ghost-surface",icon:Fe,title:"Zen",...t}:{tooltip:"External",class:"variant-ghost-success",icon:Ue,title:"Ext",...t}:{tooltip:"???",class:"variant-soft",icon:ye,title:"???",...t};function X(t,e,s){const n=t.slice();return n[2]=e[s],n}function Oe(t){let e,s,n,o=t[2].title+"",l,r,i,a,d;return s=new Ae({props:{icon:t[2].icon}}),{c(){e=y("a"),ae(s.$$.fragment),n=y("span"),l=N(o),a=q(),this.h()},l(f){e=L(f,"A",{href:!0,target:!0,class:!0});var m=g(e);re(s.$$.fragment,m),n=L(m,"SPAN",{});var c=g(n);l=ee(c,o),c.forEach(_),m.forEach(_),a=I(f),this.h()},h(){E(e,"href",r=t[2].broken?"":t[2].url),E(e,"target","_blank"),E(e,"class",i="chip "+t[2].class),Z(e,"opacity-20",t[2].broken)},m(f,m){F(f,e,m),se(s,e,null),D(e,n),D(n,l),F(f,a,m),d=!0},p(f,m){const c={};m&1&&(c.icon=f[2].icon),s.$set(c),(!d||m&1)&&o!==(o=f[2].title+"")&&te(l,o),(!d||m&1&&r!==(r=f[2].broken?"":f[2].url))&&E(e,"href",r),(!d||m&1&&i!==(i="chip "+f[2].class))&&E(e,"class",i),(!d||m&1)&&Z(e,"opacity-20",f[2].broken)},i(f){d||(U(s.$$.fragment,f),d=!0)},o(f){S(s.$$.fragment,f),d=!1},d(f){f&&(_(e),_(a)),ie(s)}}}function Y(t){let e,s;return e=new Ie({props:{content:t[2].broken?"This link is broken and needs to be updated. If you are aware of a working upload, please contact us!":t[2].tooltip,$$slots:{default:[Oe]},$$scope:{ctx:t}}}),{c(){ae(e.$$.fragment)},l(n){re(e.$$.fragment,n)},m(n,o){se(e,n,o),s=!0},p(n,o){const l={};o&1&&(l.content=n[2].broken?"This link is broken and needs to be updated. If you are aware of a working upload, please contact us!":n[2].tooltip),o&33&&(l.$$scope={dirty:o,ctx:n}),e.$set(l)},i(n){s||(U(e.$$.fragment,n),s=!0)},o(n){S(e.$$.fragment,n),s=!1},d(n){ie(e,n)}}}function Qe(t){let e,s,n=K(t[0]),o=[];for(let r=0;r<n.length;r+=1)o[r]=Y(X(t,n,r));const l=r=>S(o[r],1,1,()=>{o[r]=null});return{c(){e=y("div");for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){e=L(r,"DIV",{class:!0});var i=g(e);for(let a=0;a<o.length;a+=1)o[a].l(i);i.forEach(_),this.h()},h(){E(e,"class","flex gap-1")},m(r,i){F(r,e,i);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);s=!0},p(r,[i]){if(i&1){n=K(r[0]);let a;for(a=0;a<n.length;a+=1){const d=X(r,n,a);o[a]?(o[a].p(d,i),U(o[a],1)):(o[a]=Y(d),o[a].c(),U(o[a],1),o[a].m(e,null))}for(Ee(),a=n.length;a<o.length;a+=1)l(a);$e()}},i(r){if(!s){for(let i=0;i<n.length;i+=1)U(o[i]);s=!0}},o(r){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)S(o[i]);s=!1},d(r){r&&_(e),ke(o,r)}}}function Ge(t,e,s){let n,{urls:o=[]}=e;return t.$$set=l=>{"urls"in l&&s(1,o=l.urls)},t.$$.update=()=>{t.$$.dirty&2&&s(0,n=o.map(l=>He(l)).filter(l=>!!l))},[n,o]}class nt extends oe{constructor(e){super(),ne(this,e,Ge,Qe,J,{urls:1})}}const P=le("lists",{}),We=le("ckechedBookmarks",[]),Re=ze([P,Ce.dbStore],([t,e])=>{const s=t.bookmarks||[],n=[];return Object.entries(s).forEach(([o,l])=>{var a;const r=(a=e[o])==null?void 0:a.name;if(!r)return;const i={name:r,id:o,files:{}};Object.entries(l).sort((d,f)=>d[0]<f[0]?-1:1).forEach(([d,f])=>{const m=f.map(c=>{var h,w;return(w=(h=e[o])==null?void 0:h[d])==null?void 0:w.find(u=>u.id===c)});i.files[d]=m}),n.push(i)}),n}),Ze=(t,e,s,n)=>{P.update(o=>{var r,i;o[t]||(o[t]={});const l=o[t];return l[e]||(l[e]={}),l[e][s]||(l[e][s]=[]),(r=l[e][s])!=null&&r.includes(n)||(i=l[e][s])==null||i.push(n),o})},Ke=(t,e)=>{P.update(s=>{var o;const n=s[t];if(n){if(n[e])return delete n[e],s;for(const l in n){const r=n[l];for(const i in r)if((o=r[i])!=null&&o.includes(e))return r[i]=r[i].filter(a=>e!==a),s}return s}})},at={listStore:P,bookmarks:Re,checkedBookmarks:We,addToList:Ze,deleteFromList:Ke};export{at as L,Ie as T,nt as U,He as g,Pe as p,Me as s};
