import{a2 as me,s as x,y as he,f as y,a as j,l as N,g as L,h as g,d as _,c as z,m as ee,j as E,i as U,H as D,T as ve,z as we,A as _e,B as be,n as te,a0 as ke,W as J}from"./scheduler.a4b5f5fa.js";import{S as oe,i as ne,a as A,t as S,g as Ee,c as $e,b as re,d as ae,m as se,e as ie}from"./index.2698e3a4.js";import{C as ye,D as Le,G as ge,H as De,J as Ue,q as Ae,e as K,F as Fe}from"./modeMapping.2cc99d77.js";import{w as Se,d as Ce}from"./index.5ad6dccf.js";import{l as le,D as Ve}from"./formatDate.b1197e3f.js";import{b as Pe,c as qe,d as Te}from"./index.c16d8701.js";const Ie=Se(void 0);function je(t,e){const{computePosition:r,autoUpdate:n,offset:o,shift:l,flip:s,arrow:i,size:a,autoPlacement:d,hide:f,inline:m}=me(Ie),c={open:!1,autoUpdateCleanup:()=>{}},p=':is(a[href], button, input, textarea, select, details, [tabindex]):not([tabindex="-1"])';let h;const w="https://www.skeleton.dev/utilities/popups";let u,C;function B(){u=document.querySelector(`[data-popup="${e.target}"]`)??document.createElement("div"),C=u.querySelector(".arrow")??document.createElement("div")}B();function V(){var b,$,q,M,O,Q,H,R;if(!u)throw new Error(`The data-popup="${e.target}" element was not found. ${w}`);if(!r)throw new Error(`Floating UI 'computePosition' not found for data-popup="${e.target}". ${w}`);if(!o)throw new Error(`Floating UI 'offset' not found for data-popup="${e.target}". ${w}`);if(!l)throw new Error(`Floating UI 'shift' not found for data-popup="${e.target}". ${w}`);if(!s)throw new Error(`Floating UI 'flip' not found for data-popup="${e.target}". ${w}`);if(!i)throw new Error(`Floating UI 'arrow' not found for data-popup="${e.target}". ${w}`);const v=[];a&&v.push(a((b=e.middleware)==null?void 0:b.size)),d&&v.push(d(($=e.middleware)==null?void 0:$.autoPlacement)),f&&v.push(f((q=e.middleware)==null?void 0:q.hide)),m&&v.push(m((M=e.middleware)==null?void 0:M.inline)),r(t,u,{placement:e.placement??"bottom",middleware:[o(((O=e.middleware)==null?void 0:O.offset)??8),l(((Q=e.middleware)==null?void 0:Q.shift)??{padding:8}),s((H=e.middleware)==null?void 0:H.flip),i(((R=e.middleware)==null?void 0:R.arrow)??{element:C||null}),...v]}).then(({x:ce,y:ue,placement:fe,middlewareData:pe})=>{if(Object.assign(u.style,{left:`${ce}px`,top:`${ue}px`}),C){const{x:W,y:Z}=pe.arrow,de={top:"bottom",right:"left",bottom:"top",left:"right"}[fe.split("-")[0]];Object.assign(C.style,{left:W!=null?`${W}px`:"",top:Z!=null?`${Z}px`:"",right:"",bottom:"",[de]:"-4px"})}})}function F(){u&&(c.open=!0,e.state&&e.state({state:c.open}),V(),u.style.display="block",u.style.opacity="1",u.style.pointerEvents="auto",u.removeAttribute("inert"),c.autoUpdateCleanup=n(t,u,V),h=Array.from(u==null?void 0:u.querySelectorAll(p)))}function k(v){if(!u)return;const b=parseFloat(window.getComputedStyle(u).transitionDuration.replace("s",""))*1e3;setTimeout(()=>{c.open=!1,e.state&&e.state({state:c.open}),u.style.opacity="0",u.setAttribute("inert",""),c.autoUpdateCleanup&&c.autoUpdateCleanup(),v&&v()},b)}function P(){c.open===!1?F():k()}function I(v){if(c.open===!1||t.contains(v.target))return;if(u&&u.contains(v.target)===!1){k();return}const b=e.closeQuery===void 0?"a[href], button":e.closeQuery,$=u==null?void 0:u.querySelectorAll(b);$==null||$.forEach(q=>{q.contains(v.target)&&k()})}const G=v=>{if(c.open===!1)return;const b=v.key;if(b==="Escape"){v.preventDefault(),t.focus(),k();return}h=Array.from(u==null?void 0:u.querySelectorAll(p)),c.open&&document.activeElement===t&&(b==="ArrowDown"||b==="Tab")&&p.length>0&&h.length>0&&(v.preventDefault(),h[0].focus())};switch(e.event){case"click":t.addEventListener("click",P,!0),window.addEventListener("click",I,!0);break;case"hover":t.addEventListener("mouseover",F,!0),t.addEventListener("mouseleave",()=>k(),!0);break;case"focus-blur":t.addEventListener("focus",P,!0),t.addEventListener("blur",()=>k(),!0);break;case"focus-click":t.addEventListener("focus",F,!0),window.addEventListener("click",I,!0);break;default:throw new Error(`Event value of '${e.event}' is not supported. ${w}`)}return window.addEventListener("keydown",G,!0),V(),{update(v){k(()=>{e=v,V(),B()})},destroy(){t.removeEventListener("click",P,!0),t.removeEventListener("mouseover",F,!0),t.removeEventListener("mouseleave",()=>k(),!0),t.removeEventListener("focus",P,!0),t.removeEventListener("focus",F,!0),t.removeEventListener("blur",()=>k(),!0),window.removeEventListener("click",I,!0),window.removeEventListener("keydown",G,!0)}}}let ze=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");function Be(t){let e,r,n,o,l,s,i,a,d,f;const m=t[4].default,c=he(m,t,t[3],null);return{c(){e=y("div"),c&&c.c(),r=j(),n=y("div"),o=y("p"),l=N(t[0]),s=j(),i=y("div"),this.h()},l(p){e=L(p,"DIV",{});var h=g(e);c&&c.l(h),h.forEach(_),r=z(p),n=L(p,"DIV",{class:!0,"data-popup":!0});var w=g(n);o=L(w,"P",{});var u=g(o);l=ee(u,t[0]),u.forEach(_),s=z(w),i=L(w,"DIV",{class:!0}),g(i).forEach(_),w.forEach(_),this.h()},h(){E(i,"class","arrow variant-filled-surface border-primary-500 border-r border-b"),E(n,"class","card px-2 py-1 variant-filled-surface z-50 border-primary-500 border shadow-md"),E(n,"data-popup",t[1])},m(p,h){U(p,e,h),c&&c.m(e,null),U(p,r,h),U(p,n,h),D(n,o),D(o,l),D(n,s),D(n,i),a=!0,d||(f=ve(je.call(null,e,t[2])),d=!0)},p(p,[h]){c&&c.p&&(!a||h&8)&&we(c,m,p,p[3],a?be(m,p[3],h,null):_e(p[3]),null),(!a||h&1)&&te(l,p[0])},i(p){a||(A(c,p),a=!0)},o(p){S(c,p),a=!1},d(p){p&&(_(e),_(r),_(n)),c&&c.d(p),d=!1,f()}}}function Ge(t,e,r){let{$$slots:n={},$$scope:o}=e,{content:l=""}=e;const s=ze(10),i={event:"hover",target:s,placement:"top"};return t.$$set=a=>{"content"in a&&r(0,l=a.content),"$$scope"in a&&r(3,o=a.$$scope)},[l,s,i,o,n]}class Me extends oe{constructor(e){super(),ne(this,e,Ge,Be,x,{content:0})}}const Oe=t=>t.url?t.url.includes("vpuniverse")?{tooltip:"VPUniverse",class:"variant-ghost-tertiary",icon:Le,title:"VPU",...t}:t.url.includes("vpforums")?{tooltip:"VP Forums",class:"variant-ghost-warning",icon:ge,title:"VPF",...t}:t.url.includes("drive.google")?{tooltip:"Google Drive",class:"variant-ghost-surface",icon:Pe,title:"GDrive",...t}:t.url.includes("facebook")?{tooltip:"Facebook",class:"variant-ghost-tertiary",icon:qe,title:"Facebook",...t}:t.url.includes("mega")?{tooltip:"Mega",class:"variant-ghost-primary",icon:De,title:"Mega",...t}:t.url.includes("dropbox")?{tooltip:"Dropbox",class:"variant-ghost-secondary",icon:Te,title:"Dropbox",...t}:t.url.includes("zen")?{tooltip:"Zen Pinball",class:"variant-ghost-surface",icon:Ue,title:"Zen",...t}:{tooltip:"External",class:"variant-ghost-success",icon:Ae,title:"Ext",...t}:{tooltip:"???",class:"variant-soft",icon:ye,title:"???",...t};function X(t,e,r){const n=t.slice();return n[2]=e[r],n}function Qe(t){let e,r,n,o=t[2].title+"",l,s,i,a,d;return r=new Fe({props:{icon:t[2].icon}}),{c(){e=y("a"),re(r.$$.fragment),n=y("span"),l=N(o),a=j(),this.h()},l(f){e=L(f,"A",{href:!0,target:!0,class:!0});var m=g(e);ae(r.$$.fragment,m),n=L(m,"SPAN",{});var c=g(n);l=ee(c,o),c.forEach(_),m.forEach(_),a=z(f),this.h()},h(){E(e,"href",s=t[2].broken?"":t[2].url),E(e,"target","_blank"),E(e,"class",i="chip "+t[2].class),J(e,"opacity-20",t[2].broken)},m(f,m){U(f,e,m),se(r,e,null),D(e,n),D(n,l),U(f,a,m),d=!0},p(f,m){const c={};m&1&&(c.icon=f[2].icon),r.$set(c),(!d||m&1)&&o!==(o=f[2].title+"")&&te(l,o),(!d||m&1&&s!==(s=f[2].broken?"":f[2].url))&&E(e,"href",s),(!d||m&1&&i!==(i="chip "+f[2].class))&&E(e,"class",i),(!d||m&1)&&J(e,"opacity-20",f[2].broken)},i(f){d||(A(r.$$.fragment,f),d=!0)},o(f){S(r.$$.fragment,f),d=!1},d(f){f&&(_(e),_(a)),ie(r)}}}function Y(t){let e,r;return e=new Me({props:{content:t[2].broken?"This link is broken and needs to be updated. If you are aware of a working upload, please contact us!":t[2].tooltip,$$slots:{default:[Qe]},$$scope:{ctx:t}}}),{c(){re(e.$$.fragment)},l(n){ae(e.$$.fragment,n)},m(n,o){se(e,n,o),r=!0},p(n,o){const l={};o&1&&(l.content=n[2].broken?"This link is broken and needs to be updated. If you are aware of a working upload, please contact us!":n[2].tooltip),o&33&&(l.$$scope={dirty:o,ctx:n}),e.$set(l)},i(n){r||(A(e.$$.fragment,n),r=!0)},o(n){S(e.$$.fragment,n),r=!1},d(n){ie(e,n)}}}function He(t){let e,r,n=K(t[0]),o=[];for(let s=0;s<n.length;s+=1)o[s]=Y(X(t,n,s));const l=s=>S(o[s],1,1,()=>{o[s]=null});return{c(){e=y("div");for(let s=0;s<o.length;s+=1)o[s].c();this.h()},l(s){e=L(s,"DIV",{class:!0});var i=g(e);for(let a=0;a<o.length;a+=1)o[a].l(i);i.forEach(_),this.h()},h(){E(e,"class","flex gap-1")},m(s,i){U(s,e,i);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);r=!0},p(s,[i]){if(i&1){n=K(s[0]);let a;for(a=0;a<n.length;a+=1){const d=X(s,n,a);o[a]?(o[a].p(d,i),A(o[a],1)):(o[a]=Y(d),o[a].c(),A(o[a],1),o[a].m(e,null))}for(Ee(),a=n.length;a<o.length;a+=1)l(a);$e()}},i(s){if(!r){for(let i=0;i<n.length;i+=1)A(o[i]);r=!0}},o(s){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)S(o[i]);r=!1},d(s){s&&_(e),ke(o,s)}}}function Re(t,e,r){let n,{urls:o=[]}=e;return t.$$set=l=>{"urls"in l&&r(1,o=l.urls)},t.$$.update=()=>{t.$$.dirty&2&&r(0,n=o.map(l=>Oe(l)).filter(l=>!!l))},[n,o]}class ot extends oe{constructor(e){super(),ne(this,e,Re,He,x,{urls:1})}}const T=le("lists",{}),We=le("ckechedBookmarks",[]),Ze=Ce([T,Ve.dbStore],([t,e])=>{const r=t.bookmarks||[],n=[];return Object.entries(r).forEach(([o,l])=>{var a;const s=(a=e[o])==null?void 0:a.name;if(!s)return;const i={name:s,id:o,files:{}};Object.entries(l).sort((d,f)=>d[0]<f[0]?-1:1).forEach(([d,f])=>{const m=f.map(c=>{var h,w;return(w=(h=e[o])==null?void 0:h[d])==null?void 0:w.find(u=>u.id===c)});i.files[d]=m}),n.push(i)}),n}),Je=(t,e,r,n)=>{T.update(o=>{var s,i;o[t]||(o[t]={});const l=o[t];return l[e]||(l[e]={}),l[e][r]||(l[e][r]=[]),(s=l[e][r])!=null&&s.includes(n)||(i=l[e][r])==null||i.push(n),o})},Ke=(t,e)=>{T.update(r=>{var o;const n=r[t];if(n){if(n[e])return delete n[e],r;for(const l in n){const s=n[l];for(const i in s)if((o=s[i])!=null&&o.includes(e))return s[i]=s[i].filter(a=>e!==a),r}return r}})},nt={listStore:T,bookmarks:Ze,checkedBookmarks:We,addToList:Je,deleteFromList:Ke};export{nt as L,Me as T,ot as U,Oe as g,ze as n,je as p,Ie as s};
