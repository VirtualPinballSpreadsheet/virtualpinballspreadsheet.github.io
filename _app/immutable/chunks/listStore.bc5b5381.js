import{a2 as me,s as J,y as he,f as y,a as I,l as N,g as L,h as g,d as _,c as j,m as ee,j as E,i as F,H as D,T as ve,z as we,A as _e,B as be,n as te,a0 as ke,W as x}from"./scheduler.a4b5f5fa.js";import{S as oe,i as ne,a as U,t as S,g as Ee,c as $e,b as re,d as ae,m as se,e as ie}from"./index.2698e3a4.js";import{e as K}from"./bgPlaceholder.e5e9ac57.js";import{v as ye,w as Le,x as ge,y as De,z as Fe,k as Ue,F as Ae}from"./modeMapping.e4d92d3e.js";import{w as Se,d as Ce}from"./index.5ad6dccf.js";import{l as le,D as Pe}from"./formatDate.9a2baabe.js";import{n as Ve}from"./index.browser.7e542916.js";import{a as Te,b as qe,c as ze}from"./index.8dbc8e19.js";const Ie=Se(void 0);function je(t,e){const{computePosition:s,autoUpdate:n,offset:o,shift:l,flip:a,arrow:i,size:r,autoPlacement:d,hide:f,inline:m}=me(Ie),c={open:!1,autoUpdateCleanup:()=>{}},p=':is(a[href], button, input, textarea, select, details, [tabindex]):not([tabindex="-1"])';let h;const w="https://www.skeleton.dev/utilities/popups";let u,C;function B(){u=document.querySelector(`[data-popup="${e.target}"]`)??document.createElement("div"),C=u.querySelector(".arrow")??document.createElement("div")}B();function P(){var b,$,T,O,Q,G,W,H;if(!u)throw new Error(`The data-popup="${e.target}" element was not found. ${w}`);if(!s)throw new Error(`Floating UI 'computePosition' not found for data-popup="${e.target}". ${w}`);if(!o)throw new Error(`Floating UI 'offset' not found for data-popup="${e.target}". ${w}`);if(!l)throw new Error(`Floating UI 'shift' not found for data-popup="${e.target}". ${w}`);if(!a)throw new Error(`Floating UI 'flip' not found for data-popup="${e.target}". ${w}`);if(!i)throw new Error(`Floating UI 'arrow' not found for data-popup="${e.target}". ${w}`);const v=[];r&&v.push(r((b=e.middleware)==null?void 0:b.size)),d&&v.push(d(($=e.middleware)==null?void 0:$.autoPlacement)),f&&v.push(f((T=e.middleware)==null?void 0:T.hide)),m&&v.push(m((O=e.middleware)==null?void 0:O.inline)),s(t,u,{placement:e.placement??"bottom",middleware:[o(((Q=e.middleware)==null?void 0:Q.offset)??8),l(((G=e.middleware)==null?void 0:G.shift)??{padding:8}),a((W=e.middleware)==null?void 0:W.flip),i(((H=e.middleware)==null?void 0:H.arrow)??{element:C||null}),...v]}).then(({x:ce,y:ue,placement:fe,middlewareData:pe})=>{if(Object.assign(u.style,{left:`${ce}px`,top:`${ue}px`}),C){const{x:R,y:Z}=pe.arrow,de={top:"bottom",right:"left",bottom:"top",left:"right"}[fe.split("-")[0]];Object.assign(C.style,{left:R!=null?`${R}px`:"",top:Z!=null?`${Z}px`:"",right:"",bottom:"",[de]:"-4px"})}})}function A(){u&&(c.open=!0,e.state&&e.state({state:c.open}),P(),u.style.display="block",u.style.opacity="1",u.style.pointerEvents="auto",u.removeAttribute("inert"),c.autoUpdateCleanup=n(t,u,P),h=Array.from(u==null?void 0:u.querySelectorAll(p)))}function k(v){if(!u)return;const b=parseFloat(window.getComputedStyle(u).transitionDuration.replace("s",""))*1e3;setTimeout(()=>{c.open=!1,e.state&&e.state({state:c.open}),u.style.opacity="0",u.setAttribute("inert",""),c.autoUpdateCleanup&&c.autoUpdateCleanup(),v&&v()},b)}function V(){c.open===!1?A():k()}function z(v){if(c.open===!1||t.contains(v.target))return;if(u&&u.contains(v.target)===!1){k();return}const b=e.closeQuery===void 0?"a[href], button":e.closeQuery,$=u==null?void 0:u.querySelectorAll(b);$==null||$.forEach(T=>{T.contains(v.target)&&k()})}const M=v=>{if(c.open===!1)return;const b=v.key;if(b==="Escape"){v.preventDefault(),t.focus(),k();return}h=Array.from(u==null?void 0:u.querySelectorAll(p)),c.open&&document.activeElement===t&&(b==="ArrowDown"||b==="Tab")&&p.length>0&&h.length>0&&(v.preventDefault(),h[0].focus())};switch(e.event){case"click":t.addEventListener("click",V,!0),window.addEventListener("click",z,!0);break;case"hover":t.addEventListener("mouseover",A,!0),t.addEventListener("mouseleave",()=>k(),!0);break;case"focus-blur":t.addEventListener("focus",V,!0),t.addEventListener("blur",()=>k(),!0);break;case"focus-click":t.addEventListener("focus",A,!0),window.addEventListener("click",z,!0);break;default:throw new Error(`Event value of '${e.event}' is not supported. ${w}`)}return window.addEventListener("keydown",M,!0),P(),{update(v){k(()=>{e=v,P(),B()})},destroy(){t.removeEventListener("click",V,!0),t.removeEventListener("mouseover",A,!0),t.removeEventListener("mouseleave",()=>k(),!0),t.removeEventListener("focus",V,!0),t.removeEventListener("focus",A,!0),t.removeEventListener("blur",()=>k(),!0),window.removeEventListener("click",z,!0),window.removeEventListener("keydown",M,!0)}}}function Be(t){let e,s,n,o,l,a,i,r,d,f;const m=t[4].default,c=he(m,t,t[3],null);return{c(){e=y("div"),c&&c.c(),s=I(),n=y("div"),o=y("p"),l=N(t[0]),a=I(),i=y("div"),this.h()},l(p){e=L(p,"DIV",{});var h=g(e);c&&c.l(h),h.forEach(_),s=j(p),n=L(p,"DIV",{class:!0,"data-popup":!0});var w=g(n);o=L(w,"P",{});var u=g(o);l=ee(u,t[0]),u.forEach(_),a=j(w),i=L(w,"DIV",{class:!0}),g(i).forEach(_),w.forEach(_),this.h()},h(){E(i,"class","arrow variant-filled-surface border-primary-500 border-r border-b"),E(n,"class","card px-2 py-1 variant-filled-surface z-50 border-primary-500 border shadow-md"),E(n,"data-popup",t[1])},m(p,h){F(p,e,h),c&&c.m(e,null),F(p,s,h),F(p,n,h),D(n,o),D(o,l),D(n,a),D(n,i),r=!0,d||(f=ve(je.call(null,e,t[2])),d=!0)},p(p,[h]){c&&c.p&&(!r||h&8)&&we(c,m,p,p[3],r?be(m,p[3],h,null):_e(p[3]),null),(!r||h&1)&&te(l,p[0])},i(p){r||(U(c,p),r=!0)},o(p){S(c,p),r=!1},d(p){p&&(_(e),_(s),_(n)),c&&c.d(p),d=!1,f()}}}function Me(t,e,s){let{$$slots:n={},$$scope:o}=e,{content:l=""}=e;const a=Ve(10),i={event:"hover",target:a,placement:"top"};return t.$$set=r=>{"content"in r&&s(0,l=r.content),"$$scope"in r&&s(3,o=r.$$scope)},[l,a,i,o,n]}class Oe extends oe{constructor(e){super(),ne(this,e,Me,Be,J,{content:0})}}const Qe=t=>t.url?t.url.includes("vpuniverse")?{tooltip:"VPUniverse",class:"variant-ghost-tertiary",icon:Le,title:"VPU",...t}:t.url.includes("vpforums")?{tooltip:"VP Forums",class:"variant-ghost-warning",icon:ge,title:"VPF",...t}:t.url.includes("drive.google")?{tooltip:"Google Drive",class:"variant-ghost-surface",icon:Te,title:"GDrive",...t}:t.url.includes("facebook")?{tooltip:"Facebook",class:"variant-ghost-tertiary",icon:qe,title:"Facebook",...t}:t.url.includes("mega")?{tooltip:"Mega",class:"variant-ghost-primary",icon:De,title:"Mega",...t}:t.url.includes("dropbox")?{tooltip:"Dropbox",class:"variant-ghost-secondary",icon:ze,title:"Dropbox",...t}:t.url.includes("zen")?{tooltip:"Zen Pinball",class:"variant-ghost-surface",icon:Fe,title:"Zen",...t}:{tooltip:"External",class:"variant-ghost-success",icon:Ue,title:"Ext",...t}:{tooltip:"???",class:"variant-soft",icon:ye,title:"???",...t};function X(t,e,s){const n=t.slice();return n[2]=e[s],n}function Ge(t){let e,s,n,o=t[2].title+"",l,a,i,r,d;return s=new Ae({props:{icon:t[2].icon}}),{c(){e=y("a"),re(s.$$.fragment),n=y("span"),l=N(o),r=I(),this.h()},l(f){e=L(f,"A",{href:!0,target:!0,class:!0});var m=g(e);ae(s.$$.fragment,m),n=L(m,"SPAN",{});var c=g(n);l=ee(c,o),c.forEach(_),m.forEach(_),r=j(f),this.h()},h(){E(e,"href",a=t[2].broken?"":t[2].url),E(e,"target","_blank"),E(e,"class",i="chip "+t[2].class),x(e,"opacity-20",t[2].broken)},m(f,m){F(f,e,m),se(s,e,null),D(e,n),D(n,l),F(f,r,m),d=!0},p(f,m){const c={};m&1&&(c.icon=f[2].icon),s.$set(c),(!d||m&1)&&o!==(o=f[2].title+"")&&te(l,o),(!d||m&1&&a!==(a=f[2].broken?"":f[2].url))&&E(e,"href",a),(!d||m&1&&i!==(i="chip "+f[2].class))&&E(e,"class",i),(!d||m&1)&&x(e,"opacity-20",f[2].broken)},i(f){d||(U(s.$$.fragment,f),d=!0)},o(f){S(s.$$.fragment,f),d=!1},d(f){f&&(_(e),_(r)),ie(s)}}}function Y(t){let e,s;return e=new Oe({props:{content:t[2].broken?"This link is broken and needs to be updated. If you are aware of a working upload, please contact us!":t[2].tooltip,$$slots:{default:[Ge]},$$scope:{ctx:t}}}),{c(){re(e.$$.fragment)},l(n){ae(e.$$.fragment,n)},m(n,o){se(e,n,o),s=!0},p(n,o){const l={};o&1&&(l.content=n[2].broken?"This link is broken and needs to be updated. If you are aware of a working upload, please contact us!":n[2].tooltip),o&33&&(l.$$scope={dirty:o,ctx:n}),e.$set(l)},i(n){s||(U(e.$$.fragment,n),s=!0)},o(n){S(e.$$.fragment,n),s=!1},d(n){ie(e,n)}}}function We(t){let e,s,n=K(t[0]),o=[];for(let a=0;a<n.length;a+=1)o[a]=Y(X(t,n,a));const l=a=>S(o[a],1,1,()=>{o[a]=null});return{c(){e=y("div");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){e=L(a,"DIV",{class:!0});var i=g(e);for(let r=0;r<o.length;r+=1)o[r].l(i);i.forEach(_),this.h()},h(){E(e,"class","flex gap-1")},m(a,i){F(a,e,i);for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(e,null);s=!0},p(a,[i]){if(i&1){n=K(a[0]);let r;for(r=0;r<n.length;r+=1){const d=X(a,n,r);o[r]?(o[r].p(d,i),U(o[r],1)):(o[r]=Y(d),o[r].c(),U(o[r],1),o[r].m(e,null))}for(Ee(),r=n.length;r<o.length;r+=1)l(r);$e()}},i(a){if(!s){for(let i=0;i<n.length;i+=1)U(o[i]);s=!0}},o(a){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)S(o[i]);s=!1},d(a){a&&_(e),ke(o,a)}}}function He(t,e,s){let n,{urls:o=[]}=e;return t.$$set=l=>{"urls"in l&&s(1,o=l.urls)},t.$$.update=()=>{t.$$.dirty&2&&s(0,n=o.map(l=>Qe(l)).filter(l=>!!l))},[n,o]}class rt extends oe{constructor(e){super(),ne(this,e,He,We,J,{urls:1})}}const q=le("lists",{}),Re=le("ckechedBookmarks",[]),Ze=Ce([q,Pe.dbStore],([t,e])=>{const s=t.bookmarks||[],n=[];return Object.entries(s).forEach(([o,l])=>{var r;const a=(r=e[o])==null?void 0:r.name;if(!a)return;const i={name:a,id:o,files:{}};Object.entries(l).sort((d,f)=>d[0]<f[0]?-1:1).forEach(([d,f])=>{const m=f.map(c=>{var h,w;return(w=(h=e[o])==null?void 0:h[d])==null?void 0:w.find(u=>u.id===c)});i.files[d]=m}),n.push(i)}),n}),xe=(t,e,s,n)=>{q.update(o=>{var a,i;o[t]||(o[t]={});const l=o[t];return l[e]||(l[e]={}),l[e][s]||(l[e][s]=[]),(a=l[e][s])!=null&&a.includes(n)||(i=l[e][s])==null||i.push(n),o})},Ke=(t,e)=>{q.update(s=>{var o;const n=s[t];if(n){if(n[e])return delete n[e],s;for(const l in n){const a=n[l];for(const i in a)if((o=a[i])!=null&&o.includes(e))return a[i]=a[i].filter(r=>e!==r),s}return s}})},at={listStore:q,bookmarks:Ze,checkedBookmarks:Re,addToList:xe,deleteFromList:Ke};export{at as L,Oe as T,rt as U,Qe as g,je as p,Ie as s};
