import{s as S,f as k,g as v,h as b,d as m,j as h,i as $,$ as j,l as N,a as T,m as M,c as O,T as E,G as F,n as R}from"./scheduler.a453f4b8.js";import{S as Z,i as q,a as d,g as z,c as Q,t as g,b as U,d as B,m as C,e as V}from"./index.fa05b556.js";import{e as L}from"./each.013e569e.js";import{t as x,u as H,v as J,w as K,x as W,y as X,i as Y,F as I}from"./index.browser.3dd5d604.js";import{T as tt}from"./modeMapping.b2d691ab.js";import{b as et,c as at,d as ot}from"./index.c16d8701.js";import{d as nt}from"./index.6e379fdf.js";import{l as A}from"./ProgressBar.svelte_svelte_type_style_lang.c6c4a621.js";import{D as st}from"./DbStore.481d56c5.js";const rt=a=>a.url?a.url.includes("vpuniverse")?{tooltip:"VPUniverse",class:"variant-ghost-tertiary",icon:H,title:"VPU",...a}:a.url.includes("vpforums")?{tooltip:"VP Forums",class:"variant-ghost-warning",icon:J,title:"VPF",...a}:a.url.includes("pinballnirvana")?{tooltip:"Pinball Nirvana",class:"variant-ghost-primary",icon:K,title:"Nirvana",...a}:a.url.includes("drive.google")?{tooltip:"Google Drive",class:"variant-ghost-surface",icon:et,title:"GDrive",...a}:a.url.includes("facebook")?{tooltip:"Facebook",class:"variant-ghost-tertiary",icon:at,title:"Facebook",...a}:a.url.includes("mega")?{tooltip:"Mega",class:"variant-ghost-primary",icon:W,title:"Mega",...a}:a.url.includes("dropbox")?{tooltip:"Dropbox",class:"variant-ghost-secondary",icon:ot,title:"Dropbox",...a}:a.url.includes("zen")?{tooltip:"Zen Pinball",class:"variant-ghost-surface",icon:X,title:"Zen",...a}:{tooltip:"External",class:"variant-ghost-success",icon:Y,title:"Ext",...a}:{tooltip:"???",class:"variant-soft",icon:x,title:"???",...a};function y(a,t,s){const o=a.slice();return o[2]=t[s],o}function it(a){let t,s,o,e=a[2].title+"",l,n,i,r,f;return s=new I({props:{icon:a[2].icon}}),{c(){t=k("a"),U(s.$$.fragment),o=k("span"),l=N(e),r=T(),this.h()},l(c){t=v(c,"A",{href:!0,target:!0,class:!0});var u=b(t);B(s.$$.fragment,u),o=v(u,"SPAN",{});var p=b(o);l=M(p,e),p.forEach(m),u.forEach(m),r=O(c),this.h()},h(){h(t,"href",n=a[2].broken?"":a[2].url),h(t,"target","_blank"),h(t,"class",i="chip "+a[2].class),E(t,"opacity-20",a[2].broken)},m(c,u){$(c,t,u),C(s,t,null),F(t,o),F(o,l),$(c,r,u),f=!0},p(c,u){const p={};u&1&&(p.icon=c[2].icon),s.$set(p),(!f||u&1)&&e!==(e=c[2].title+"")&&R(l,e),(!f||u&1&&n!==(n=c[2].broken?"":c[2].url))&&h(t,"href",n),(!f||u&1&&i!==(i="chip "+c[2].class))&&h(t,"class",i),(!f||u&1)&&E(t,"opacity-20",c[2].broken)},i(c){f||(d(s.$$.fragment,c),f=!0)},o(c){g(s.$$.fragment,c),f=!1},d(c){c&&(m(t),m(r)),V(s)}}}function P(a){let t,s;return t=new tt({props:{content:a[2].broken?"This link is broken and needs to be updated. If you are aware of a working upload, please contact us!":a[2].tooltip,$$slots:{default:[it]},$$scope:{ctx:a}}}),{c(){U(t.$$.fragment)},l(o){B(t.$$.fragment,o)},m(o,e){C(t,o,e),s=!0},p(o,e){const l={};e&1&&(l.content=o[2].broken?"This link is broken and needs to be updated. If you are aware of a working upload, please contact us!":o[2].tooltip),e&33&&(l.$$scope={dirty:e,ctx:o}),t.$set(l)},i(o){s||(d(t.$$.fragment,o),s=!0)},o(o){g(t.$$.fragment,o),s=!1},d(o){V(t,o)}}}function lt(a){let t,s,o=L(a[0]),e=[];for(let n=0;n<o.length;n+=1)e[n]=P(y(a,o,n));const l=n=>g(e[n],1,1,()=>{e[n]=null});return{c(){t=k("div");for(let n=0;n<e.length;n+=1)e[n].c();this.h()},l(n){t=v(n,"DIV",{class:!0});var i=b(t);for(let r=0;r<e.length;r+=1)e[r].l(i);i.forEach(m),this.h()},h(){h(t,"class","flex gap-1")},m(n,i){$(n,t,i);for(let r=0;r<e.length;r+=1)e[r]&&e[r].m(t,null);s=!0},p(n,[i]){if(i&1){o=L(n[0]);let r;for(r=0;r<o.length;r+=1){const f=y(n,o,r);e[r]?(e[r].p(f,i),d(e[r],1)):(e[r]=P(f),e[r].c(),d(e[r],1),e[r].m(t,null))}for(z(),r=o.length;r<e.length;r+=1)l(r);Q()}},i(n){if(!s){for(let i=0;i<o.length;i+=1)d(e[i]);s=!0}},o(n){e=e.filter(Boolean);for(let i=0;i<e.length;i+=1)g(e[i]);s=!1},d(n){n&&m(t),j(e,n)}}}function ct(a,t,s){let o,{urls:e=[]}=t;return a.$$set=l=>{"urls"in l&&s(1,e=l.urls)},a.$$.update=()=>{a.$$.dirty&2&&s(0,o=e.map(l=>rt(l)).filter(l=>!!l))},[o,e]}class Et extends Z{constructor(t){super(),q(this,t,ct,lt,S,{urls:1})}}const _=A("lists",{}),ft=A("ckechedBookmarks",[]),ut=nt([_,st.dbStore],([a,t])=>{const s=a.bookmarks||[],o=[];return Object.entries(s).forEach(([e,l])=>{var r;const n=(r=t[e])==null?void 0:r.name;if(!n)return;const i={name:n,id:e,files:{}};Object.entries(l).sort((f,c)=>f[0]<c[0]?-1:1).forEach(([f,c])=>{const u=c.map(p=>{var w,D;return(D=(w=t[e])==null?void 0:w[f])==null?void 0:D.find(G=>G.id===p)});i.files[f]=u}),o.push(i)}),o}),pt=(a,t,s,o)=>{_.update(e=>{var n,i;e[a]||(e[a]={});const l=e[a];return l[t]||(l[t]={}),l[t][s]||(l[t][s]=[]),(n=l[t][s])!=null&&n.includes(o)||(i=l[t][s])==null||i.push(o),e})},ht=(a,t)=>{_.update(s=>{var e;const o=s[a];if(o){if(o[t])return delete o[t],s;for(const l in o){const n=o[l];for(const i in n)if((e=n[i])!=null&&e.includes(t))return n[i]=n[i].filter(r=>t!==r),s}return s}})},Ft={listStore:_,bookmarks:ut,checkedBookmarks:ft,addToList:pt,deleteFromList:ht};export{Ft as L,Et as U,rt as g};
