import{s as rt,e as mt,i as te,d,B as lt,f as v,g,h as b,j as u,H as Mt,r as Ft,Y as ba,a as C,l as D,c as M,m as V,R as ce,G as o,n as R,$ as Ct,Z as Ht,k as at,T as re,I as oa,x as fa,y as ua,z as ca,A as da,Q as wa}from"./scheduler.a453f4b8.js";import{S as st,i as it,a as ae,g as St,t as ne,c as Rt,b as pt,d as _t,m as bt,e as wt}from"./index.fa05b556.js";import{e as Oe}from"./each.013e569e.js";import{D as jt,a as Ea,d as Ia,c as ha,b as ka,E as ya}from"./DbStore.6d56cf40.js";import{P as Ut,g as Pa,p as Ta}from"./getBackglassUrl.fc240526.js";import{U as Ca,E as Ma}from"./UserStore.aebc803d.js";import{F as Fa,j as Da,y as Wt,z as Va,A as Aa,B as Sa,C as Ra,D as Ha,E as Oa,G as ja,x as La}from"./index.8d5d1200.js";import{w as Ba}from"./index.6e379fdf.js";import{m as va}from"./ProgressBar.svelte_svelte_type_style_lang.c6c4a621.js";import{f as At}from"./formatDate.85208f9c.js";import{n as za}from"./index.browser.7e542916.js";function Gt(t){let e,a,l,r,i;return a=new Fa({props:{icon:Da}}),{c(){e=v("a"),pt(a.$$.fragment),this.h()},l(s){e=g(s,"A",{href:!0,class:!0});var f=b(e);_t(a.$$.fragment,f),f.forEach(d),this.h()},h(){u(e,"href","?edit=true"),u(e,"class","pointer-events-auto chip variant-soft-primary hover:variant-filled-primary gap-2 flex-1 p-2")},m(s,f){te(s,e,f),bt(a,e,null),l=!0,r||(i=Mt(e,"click",t[9]),r=!0)},p:Ft,i(s){l||(ae(a.$$.fragment,s),l=!0)},o(s){ne(a.$$.fragment,s),l=!1},d(s){s&&d(e),wt(a),r=!1,i()}}}function Ua(t){let e,a,l=t[0]&&t[1].admin&&Gt(t);return{c(){l&&l.c(),e=mt()},l(r){l&&l.l(r),e=mt()},m(r,i){l&&l.m(r,i),te(r,e,i),a=!0},p(r,[i]){r[0]&&r[1].admin?l?(l.p(r,i),i&3&&ae(l,1)):(l=Gt(r),l.c(),ae(l,1),l.m(e.parentNode,e)):l&&(St(),ne(l,1,1,()=>{l=null}),Rt())},i(r){a||(ae(l),a=!0)},o(r){ne(l),a=!1},d(r){r&&d(e),l&&l.d(r)}}}function Wa(t,e,a){let l,r,i,s;const{userStore:f}=Ca;lt(t,f,m=>a(1,i=m));const{editStore:n}=Ma;lt(t,n,m=>a(2,s=m));const{dbStore:h}=jt;lt(t,h,m=>a(8,r=m));let{file:p=void 0}=e,{game:y=void 0}=e;const E=()=>{ba(n,s.cache={id:l.id,action:"UPDATE",data:JSON.parse(JSON.stringify(l))},s)};return t.$$set=m=>{"file"in m&&a(6,p=m.file),"game"in m&&a(7,y=m.game)},t.$$.update=()=>{var m;t.$$.dirty&448&&a(0,l=y||((m=p==null?void 0:p.game)!=null&&m.id?r[p.game.id]:void 0))},[l,i,s,f,n,h,p,y,r,E]}class Lt extends st{constructor(e){super(),it(this,e,Wa,Ua,rt,{file:6,game:7})}}function qt(t,e,a){const l=t.slice();return l[2]=e[a],l}function Nt(t){let e,a=t[2]+"",l;return{c(){e=v("div"),l=D(a),this.h()},l(r){e=g(r,"DIV",{class:!0});var i=b(e);l=V(i,a),i.forEach(d),this.h()},h(){u(e,"class","badge badge-glass my-auto py-0.5 px-1")},m(r,i){te(r,e,i),o(e,l)},p(r,i){i&1&&a!==(a=r[2]+"")&&R(l,a)},d(r){r&&d(e)}}}function Ga(t){var B,Y;let e,a,l,r,i,s,f,n,h,p,y=((B=t[0].game)==null?void 0:B.name)+"",E,m,w,I,L,F,A=(((Y=t[0].authors)==null?void 0:Y.join(", "))||"")+"",U,Z,J,H,le=Oe(t[0].features||[]),T=[];for(let P=0;P<le.length;P+=1)T[P]=Nt(qt(t,le,P));return I=new Lt({props:{file:t[0]}}),{c(){e=v("a"),a=v("img"),i=C(),s=v("hr"),f=C(),n=v("div"),h=v("div"),p=v("p"),E=D(y),m=C();for(let P=0;P<T.length;P+=1)T[P].c();w=C(),pt(I.$$.fragment),L=C(),F=v("h4"),U=D(A),this.h()},l(P){e=g(P,"A",{href:!0,class:!0,id:!0,"data-gameid":!0,"data-filetype":!0});var O=b(e);a=g(O,"IMG",{src:!0,alt:!0,class:!0}),i=M(O),s=g(O,"HR",{}),f=M(O),n=g(O,"DIV",{class:!0});var z=b(n);h=g(z,"DIV",{class:!0});var $=b(h);p=g($,"P",{class:!0});var X=b(p);E=V(X,y),X.forEach(d),m=M($);for(let G=0;G<T.length;G+=1)T[G].l($);w=M($),_t(I.$$.fragment,$),$.forEach(d),L=M(z),F=g(z,"H4",{class:!0});var x=b(F);U=V(x,A),x.forEach(d),z.forEach(d),O.forEach(d),this.h()},h(){var P;ce(a.src,l=t[0].imgUrl||Ut)||u(a,"src",l),u(a,"alt",r=t[0].id),u(a,"class","card aspectTable overflow-hidden hover:brightness-125 hover:scale-110 transition-all svelte-1mrpffe"),u(p,"class","font-bold text-ellipsis whitespace-nowrap overflow-hidden"),u(h,"class","flex gap-2"),u(F,"class","opacity-60 text-ellipsis whitespace-nowrap overflow-hidden"),u(n,"class","flex flex-col py-4"),u(e,"href",t[1]),u(e,"class","flex flex-col"),u(e,"id",Z=t[0].id),u(e,"data-gameid",J=(P=t[0].game)==null?void 0:P.id),u(e,"data-filetype","b2sFiles")},m(P,O){te(P,e,O),o(e,a),o(e,i),o(e,s),o(e,f),o(e,n),o(n,h),o(h,p),o(p,E),o(h,m);for(let z=0;z<T.length;z+=1)T[z]&&T[z].m(h,null);o(h,w),bt(I,h,null),o(n,L),o(n,F),o(F,U),H=!0},p(P,[O]){var $,X,x;if((!H||O&1&&!ce(a.src,l=P[0].imgUrl||Ut))&&u(a,"src",l),(!H||O&1&&r!==(r=P[0].id))&&u(a,"alt",r),(!H||O&1)&&y!==(y=(($=P[0].game)==null?void 0:$.name)+"")&&R(E,y),O&1){le=Oe(P[0].features||[]);let G;for(G=0;G<le.length;G+=1){const je=qt(P,le,G);T[G]?T[G].p(je,O):(T[G]=Nt(je),T[G].c(),T[G].m(h,w))}for(;G<T.length;G+=1)T[G].d(1);T.length=le.length}const z={};O&1&&(z.file=P[0]),I.$set(z),(!H||O&1)&&A!==(A=(((X=P[0].authors)==null?void 0:X.join(", "))||"")+"")&&R(U,A),(!H||O&2)&&u(e,"href",P[1]),(!H||O&1&&Z!==(Z=P[0].id))&&u(e,"id",Z),(!H||O&1&&J!==(J=(x=P[0].game)==null?void 0:x.id))&&u(e,"data-gameid",J)},i(P){H||(ae(I.$$.fragment,P),H=!0)},o(P){ne(I.$$.fragment,P),H=!1},d(P){P&&d(e),Ct(T,P),wt(I)}}}function qa(t,e,a){let{file:l=Ea}=e,{href:r=""}=e;return t.$$set=i=>{"file"in i&&a(0,l=i.file),"href"in i&&a(1,r=i.href)},[l,r]}class Na extends st{constructor(e){super(),it(this,e,qa,Ga,rt,{file:0,href:1})}}function Xa(t){var le;let e,a,l,r,i=(((le=t[0].game)==null?void 0:le.name)||"???")+"",s,f,n,h,p=(t[0].version||"")+"",y,E,m,w,I,L,F,A,U,Z,J,H;return L=new Lt({props:{file:t[0]}}),{c(){e=v("a"),a=v("div"),l=v("div"),r=v("span"),s=D(i),f=C(),n=v("div"),h=v("span"),y=D(p),E=C(),m=v("div"),w=C(),I=v("div"),pt(L.$$.fragment),F=C(),A=v("img"),this.h()},l(T){e=g(T,"A",{href:!0,id:!0,"data-gameid":!0,"data-filetype":!0,class:!0});var B=b(e);a=g(B,"DIV",{class:!0});var Y=b(a);l=g(Y,"DIV",{class:!0});var P=b(l);r=g(P,"SPAN",{class:!0});var O=b(r);s=V(O,i),O.forEach(d),f=M(P),n=g(P,"DIV",{class:!0});var z=b(n);h=g(z,"SPAN",{class:!0});var $=b(h);y=V($,p),$.forEach(d),E=M(z),m=g(z,"DIV",{class:!0}),b(m).forEach(d),w=M(z),I=g(z,"DIV",{class:!0});var X=b(I);_t(L.$$.fragment,X),X.forEach(d),z.forEach(d),P.forEach(d),F=M(Y),A=g(Y,"IMG",{src:!0,class:!0,alt:!0}),Y.forEach(d),B.forEach(d),this.h()},h(){var T;u(r,"class","font-bold"),u(h,"class","opacity-60 whitespace-nowrap text-ellipsis overflow-hidden"),u(m,"class","flex-1"),u(I,"class","shrink-0"),u(n,"class","flex justify-between max-w-full"),u(l,"class","p-4 flex flex-col justify-between absolute top-0 left-0 right-0 bottom-0 z-10"),ce(A.src,U=t[3])||u(A,"src",U),u(A,"class","absolute top-0 left-0 right-0 bottom-0 opacity-10"),u(A,"alt",""),u(a,"class","card !bg-surface-100 dark:!bg-surface-600 aspect relative overflow-hidden hover:brightness-125 hover:scale-110 transition-all text-xs md:text-base svelte-22xih4"),u(e,"href",t[1]),u(e,"id",Z=t[0].id),u(e,"data-gameid",J=(T=t[0].game)==null?void 0:T.id),u(e,"data-filetype",t[2]),u(e,"class","aspect svelte-22xih4")},m(T,B){te(T,e,B),o(e,a),o(a,l),o(l,r),o(r,s),o(l,f),o(l,n),o(n,h),o(h,y),o(n,E),o(n,m),o(n,w),o(n,I),bt(L,I,null),o(a,F),o(a,A),H=!0},p(T,[B]){var P,O;(!H||B&1)&&i!==(i=(((P=T[0].game)==null?void 0:P.name)||"???")+"")&&R(s,i),(!H||B&1)&&p!==(p=(T[0].version||"")+"")&&R(y,p);const Y={};B&1&&(Y.file=T[0]),L.$set(Y),(!H||B&8&&!ce(A.src,U=T[3]))&&u(A,"src",U),(!H||B&2)&&u(e,"href",T[1]),(!H||B&1&&Z!==(Z=T[0].id))&&u(e,"id",Z),(!H||B&1&&J!==(J=(O=T[0].game)==null?void 0:O.id))&&u(e,"data-gameid",J),(!H||B&4)&&u(e,"data-filetype",T[2])},i(T){H||(ae(L.$$.fragment,T),H=!0)},o(T){ne(L.$$.fragment,T),H=!1},d(T){T&&d(e),wt(L)}}}function Za(t,e,a){let l;const{getGameImage:r}=jt;let{file:i=Ia}=e,{href:s=""}=e,{fileType:f}=e;return t.$$set=n=>{"file"in n&&a(0,i=n.file),"href"in n&&a(1,s=n.href),"fileType"in n&&a(2,f=n.fileType)},t.$$.update=()=>{var n;t.$$.dirty&1&&a(3,l=(n=i.game)!=null&&n.id?r(i.game.id):"")},[i,s,f,l]}class Je extends st{constructor(e){super(),it(this,e,Za,Xa,rt,{file:0,href:1,fileType:2})}}/*! Fast Average Color | Â© 2022 Denis Seleznev | MIT License | https://github.com/fast-average-color/fast-average-color */function Ja(t){var e=t.toString(16);return e.length===1?"0"+e:e}function Xt(t){return"#"+t.map(Ja).join("")}function Ka(t){var e=(t[0]*299+t[1]*587+t[2]*114)/1e3;return e<128}function Qa(t){return t?Ya(t)?t:[t]:[]}function Ya(t){return Array.isArray(t[0])}function Bt(t,e,a){for(var l=0;l<a.length;l++)if($a(t,e,a[l]))return!0;return!1}function $a(t,e,a){switch(a.length){case 3:if(xa(t,e,a))return!0;break;case 4:if(el(t,e,a))return!0;break;case 5:if(tl(t,e,a))return!0;break;default:return!1}}function xa(t,e,a){return t[e+3]!==255||t[e]===a[0]&&t[e+1]===a[1]&&t[e+2]===a[2]}function el(t,e,a){return t[e+3]&&a[3]?t[e]===a[0]&&t[e+1]===a[1]&&t[e+2]===a[2]&&t[e+3]===a[3]:t[e+3]===a[3]}function Dt(t,e,a){return t>=e-a&&t<=e+a}function tl(t,e,a){var l=a[0],r=a[1],i=a[2],s=a[3],f=a[4],n=t[e+3],h=Dt(n,s,f);return s?!!(!n&&h||Dt(t[e],l,f)&&Dt(t[e+1],r,f)&&Dt(t[e+2],i,f)&&h):h}function al(t,e,a){for(var l={},r=24,i=a.ignoredColor,s=a.step,f=[0,0,0,0,0],n=0;n<e;n+=s){var h=t[n],p=t[n+1],y=t[n+2],E=t[n+3];if(!(i&&Bt(t,n,i))){var m=Math.round(h/r)+","+Math.round(p/r)+","+Math.round(y/r);l[m]?l[m]=[l[m][0]+h*E,l[m][1]+p*E,l[m][2]+y*E,l[m][3]+E,l[m][4]+1]:l[m]=[h*E,p*E,y*E,E,1],f[4]<l[m][4]&&(f=l[m])}}var w=f[0],I=f[1],L=f[2],F=f[3],A=f[4];return F?[Math.round(w/F),Math.round(I/F),Math.round(L/F),Math.round(F/A)]:a.defaultColor}function ll(t,e,a){for(var l=0,r=0,i=0,s=0,f=0,n=a.ignoredColor,h=a.step,p=0;p<e;p+=h){var y=t[p+3],E=t[p]*y,m=t[p+1]*y,w=t[p+2]*y;n&&Bt(t,p,n)||(l+=E,r+=m,i+=w,s+=y,f++)}return s?[Math.round(l/s),Math.round(r/s),Math.round(i/s),Math.round(s/f)]:a.defaultColor}function rl(t,e,a){for(var l=0,r=0,i=0,s=0,f=0,n=a.ignoredColor,h=a.step,p=0;p<e;p+=h){var y=t[p],E=t[p+1],m=t[p+2],w=t[p+3];n&&Bt(t,p,n)||(l+=y*y*w,r+=E*E*w,i+=m*m*w,s+=w,f++)}return s?[Math.round(Math.sqrt(l/s)),Math.round(Math.sqrt(r/s)),Math.round(Math.sqrt(i/s)),Math.round(s/f)]:a.defaultColor}function Zt(t){return Tt(t,"defaultColor",[0,0,0,0])}function Tt(t,e,a){return t[e]===void 0?a:t[e]}var Jt=10,Ot=100;function sl(t){return t.search(/\.svg(\?|$)/i)!==-1}function il(t){if(ga(t)){var e=t.naturalWidth,a=t.naturalHeight;return!t.naturalWidth&&sl(t.src)&&(e=a=Ot),{width:e,height:a}}return ol(t)?{width:t.videoWidth,height:t.videoHeight}:{width:t.width,height:t.height}}function Kt(t){return fl(t)?"canvas":nl(t)?"offscreencanvas":ul(t)?"imagebitmap":t.src}function ga(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement}var ma=typeof OffscreenCanvas<"u";function nl(t){return ma&&t instanceof OffscreenCanvas}function ol(t){return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement}function fl(t){return typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement}function ul(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap}function cl(t,e){var a=Tt(e,"left",0),l=Tt(e,"top",0),r=Tt(e,"width",t.width),i=Tt(e,"height",t.height),s=r,f=i;if(e.mode==="precision")return{srcLeft:a,srcTop:l,srcWidth:r,srcHeight:i,destWidth:s,destHeight:f};var n;return r>i?(n=r/i,s=Ot,f=Math.round(s/n)):(n=i/r,f=Ot,s=Math.round(f/n)),(s>r||f>i||s<Jt||f<Jt)&&(s=r,f=i),{srcLeft:a,srcTop:l,srcWidth:r,srcHeight:i,destWidth:s,destHeight:f}}var dl=typeof window>"u";function hl(){return dl?ma?new OffscreenCanvas(1,1):null:document.createElement("canvas")}var vl="FastAverageColor: ";function He(t){return Error(vl+t)}function Pt(t,e){e||console.error(t)}var pa=function(){function t(){this.canvas=null,this.ctx=null}return t.prototype.getColorAsync=function(e,a){if(!e)return Promise.reject(He("call .getColorAsync() without resource."));if(typeof e=="string"){if(typeof Image>"u")return Promise.reject(He("resource as string is not supported in this environment"));var l=new Image;return l.crossOrigin=a&&a.crossOrigin||"",l.src=e,this.bindImageEvents(l,a)}else{if(ga(e)&&!e.complete)return this.bindImageEvents(e,a);var r=this.getColor(e,a);return r.error?Promise.reject(r.error):Promise.resolve(r)}},t.prototype.getColor=function(e,a){a=a||{};var l=Zt(a);if(!e){var r=He("call .getColor(null) without resource");return Pt(r,a.silent),this.prepareResult(l,r)}var i=il(e),s=cl(i,a);if(!s.srcWidth||!s.srcHeight||!s.destWidth||!s.destHeight){var r=He('incorrect sizes for resource "'.concat(Kt(e),'"'));return Pt(r,a.silent),this.prepareResult(l,r)}if(!this.canvas&&(this.canvas=hl(),!this.canvas)){var r=He("OffscreenCanvas is not supported in this browser");return Pt(r,a.silent),this.prepareResult(l,r)}if(!this.ctx){if(this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),!this.ctx){var r=He("Canvas Context 2D is not supported in this browser");return Pt(r,a.silent),this.prepareResult(l)}this.ctx.imageSmoothingEnabled=!1}this.canvas.width=s.destWidth,this.canvas.height=s.destHeight;try{this.ctx.clearRect(0,0,s.destWidth,s.destHeight),this.ctx.drawImage(e,s.srcLeft,s.srcTop,s.srcWidth,s.srcHeight,0,0,s.destWidth,s.destHeight);var f=this.ctx.getImageData(0,0,s.destWidth,s.destHeight).data;return this.prepareResult(this.getColorFromArray4(f,a))}catch(n){var r=He("security error (CORS) for resource ".concat(Kt(e),`.
Details: https://developer.mozilla.org/en/docs/Web/HTML/CORS_enabled_image`));return Pt(r,a.silent),!a.silent&&console.error(n),this.prepareResult(l,r)}},t.prototype.getColorFromArray4=function(e,a){a=a||{};var l=4,r=e.length,i=Zt(a);if(r<l)return i;var s=r-r%l,f=(a.step||1)*l,n;switch(a.algorithm||"sqrt"){case"simple":n=ll;break;case"sqrt":n=rl;break;case"dominant":n=al;break;default:throw He("".concat(a.algorithm," is unknown algorithm"))}return n(e,s,{defaultColor:i,ignoredColor:Qa(a.ignoredColor),step:f})},t.prototype.prepareResult=function(e,a){var l=e.slice(0,3),r=[e[0],e[1],e[2],e[3]/255],i=Ka(e);return{value:[e[0],e[1],e[2],e[3]],rgb:"rgb("+l.join(",")+")",rgba:"rgba("+r.join(",")+")",hex:Xt(l),hexa:Xt(e),isDark:i,isLight:!i,error:a}},t.prototype.destroy=function(){this.canvas&&(this.canvas.width=1,this.canvas.height=1,this.canvas=null),this.ctx=null},t.prototype.bindImageEvents=function(e,a){var l=this;return new Promise(function(r,i){var s=function(){h();var p=l.getColor(e,a);p.error?i(p.error):r(p)},f=function(){h(),i(He('Error loading image "'.concat(e.src,'".')))},n=function(){h(),i(He('Image "'.concat(e.src,'" loading aborted')))},h=function(){e.removeEventListener("load",s),e.removeEventListener("error",f),e.removeEventListener("abort",n)};e.addEventListener("load",s),e.addEventListener("error",f),e.addEventListener("abort",n)})},t}();const _a=Ba({width:0,height:0,mobile:!1});function Qt(t,e,a){const l=t.slice();return l[11]=e[a],l}function Yt(t,e,a){const l=t.slice();return l[14]=e[a],l}function $t(t,e,a){const l=t.slice();return l[11]=e[a],l}function xt(t){let e,a=t[11]+"",l,r;return{c(){e=v("div"),l=D(a),r=C(),this.h()},l(i){e=g(i,"DIV",{class:!0});var s=b(e);l=V(s,a),r=M(s),s.forEach(d),this.h()},h(){u(e,"class","badge badge-glass my-auto py-0.5 px-1")},m(i,s){te(i,e,s),o(e,l),o(e,r)},p(i,s){s&32&&a!==(a=i[11]+"")&&R(l,a)},d(i){i&&d(e)}}}function ea(t){let e,a=t[14].toUpperCase()+"",l;return{c(){e=v("div"),l=D(a),this.h()},l(r){e=g(r,"DIV",{class:!0});var i=b(e);l=V(i,a),i.forEach(d),this.h()},h(){u(e,"class","badge variant-filled-surface")},m(r,i){te(r,e,i),o(e,l)},p(r,i){i&1&&a!==(a=r[14].toUpperCase()+"")&&R(l,a)},d(r){r&&d(e)}}}function ta(t){let e,a=t[11]+"",l,r;return{c(){e=v("div"),l=D(a),r=C(),this.h()},l(i){e=g(i,"DIV",{class:!0});var s=b(e);l=V(s,a),r=M(s),s.forEach(d),this.h()},h(){u(e,"class","badge badge-glass my-auto py-0.5 px-1")},m(i,s){te(i,e,s),o(e,l),o(e,r)},p(i,s){s&32&&a!==(a=i[11]+"")&&R(l,a)},d(i){i&&d(e)}}}function gl(t){var Et,It;let e,a,l,r,i,s,f,n,h,p=t[0].name+"",y,E,m,w,I,L=t[0].manufacturer+"",F,A,U,Z,J=t[0].year+"",H,le,T,B,Y=(((Et=t[0].designers)==null?void 0:Et.join(", "))||"-")+"",P,O,z,$,X,x,G,je="Updated at",ge,Pe,me=At(t[0].lastCreatedAt??t[0].updatedAt)+"",de,we,Ke,nt,oe,he,ot="Type",ft,K,Te=(t[0].type||"-")+"",Le,ut,N,ve,pe,Be,se,fe,Ee,ze=t[0].name+"",Ie,Ue,Qe,_e,ue=t[0].manufacturer+"",Ce,Ye,We=t[0].year+"",Me,$e,ct,Fe,be=(((It=t[0].designers)==null?void 0:It.join(", "))||"")+"",De,Ge,xe,dt,S=Oe(t[5]),Q=[];for(let c=0;c<S.length;c+=1)Q[c]=xt($t(t,S,c));let qe=Oe(t[0].theme||[]),j=[];for(let c=0;c<qe.length;c+=1)j[c]=ea(Yt(t,qe,c));let Ne=Oe(t[5]),ee=[];for(let c=0;c<Ne.length;c+=1)ee[c]=ta(Qt(t,Ne,c));return{c(){e=v("a"),a=v("div"),l=v("img"),s=C(),f=v("div"),n=v("div"),h=v("p"),y=D(p),E=C();for(let c=0;c<Q.length;c+=1)Q[c].c();m=C(),w=v("div"),I=v("p"),F=D(L),A=C(),U=v("p"),Z=D("("),H=D(J),le=D(")"),T=C(),B=v("p"),P=D(Y),O=C(),z=v("div");for(let c=0;c<j.length;c+=1)j[c].c();$=C(),X=v("div"),x=v("div"),G=v("p"),G.textContent=je,ge=C(),Pe=v("p"),de=D(me),we=C(),Ke=v("div"),nt=C(),oe=v("div"),he=v("p"),he.textContent=ot,ft=C(),K=v("p"),Le=D(Te),ut=C(),N=v("img"),Be=C(),se=v("div"),fe=v("div"),Ee=v("p"),Ie=D(ze),Ue=C();for(let c=0;c<ee.length;c+=1)ee[c].c();Qe=C(),_e=v("p"),Ce=D(ue),Ye=D(" ("),Me=D(We),$e=D(")"),ct=C(),Fe=v("p"),De=D(be),this.h()},l(c){e=g(c,"A",{class:!0,href:!0,id:!0});var _=b(e);a=g(_,"DIV",{class:!0,style:!0});var W=b(a);l=g(W,"IMG",{src:!0,alt:!0,style:!0,class:!0}),s=M(W),f=g(W,"DIV",{class:!0,style:!0});var q=b(f);n=g(q,"DIV",{class:!0});var k=b(n);h=g(k,"P",{class:!0});var ie=b(h);y=V(ie,p),ie.forEach(d),E=M(k);for(let ye=0;ye<Q.length;ye+=1)Q[ye].l(k);k.forEach(d),m=M(q),w=g(q,"DIV",{class:!0});var Ve=b(w);I=g(Ve,"P",{class:!0});var Ae=b(I);F=V(Ae,L),Ae.forEach(d),A=M(Ve),U=g(Ve,"P",{});var Se=b(U);Z=V(Se,"("),H=V(Se,J),le=V(Se,")"),Se.forEach(d),Ve.forEach(d),T=M(q),B=g(q,"P",{class:!0});var ht=b(B);P=V(ht,Y),ht.forEach(d),O=M(q),z=g(q,"DIV",{class:!0});var kt=b(z);for(let ye=0;ye<j.length;ye+=1)j[ye].l(kt);kt.forEach(d),$=M(q),X=g(q,"DIV",{class:!0});var Xe=b(X);x=g(Xe,"DIV",{class:!0});var Ze=b(x);G=g(Ze,"P",{class:!0,"data-svelte-h":!0}),Ht(G)!=="svelte-g6tq99"&&(G.textContent=je),ge=M(Ze),Pe=g(Ze,"P",{class:!0});var yt=b(Pe);de=V(yt,me),yt.forEach(d),Ze.forEach(d),we=M(Xe),Ke=g(Xe,"DIV",{class:!0}),b(Ke).forEach(d),nt=M(Xe),oe=g(Xe,"DIV",{class:!0});var ke=b(oe);he=g(ke,"P",{class:!0,"data-svelte-h":!0}),Ht(he)!=="svelte-1h1g7sd"&&(he.textContent=ot),ft=M(ke),K=g(ke,"P",{class:!0});var vt=b(K);Le=V(vt,Te),vt.forEach(d),ke.forEach(d),Xe.forEach(d),q.forEach(d),W.forEach(d),ut=M(_),N=g(_,"IMG",{src:!0,alt:!0,class:!0}),Be=M(_),se=g(_,"DIV",{class:!0});var Re=b(se);fe=g(Re,"DIV",{class:!0});var gt=b(fe);Ee=g(gt,"P",{class:!0});var et=b(Ee);Ie=V(et,ze),et.forEach(d),Ue=M(gt);for(let ye=0;ye<ee.length;ye+=1)ee[ye].l(gt);gt.forEach(d),Qe=M(Re),_e=g(Re,"P",{});var tt=b(_e);Ce=V(tt,ue),Ye=V(tt," ("),Me=V(tt,We),$e=V(tt,")"),tt.forEach(d),ct=M(Re),Fe=g(Re,"P",{class:!0});var zt=b(Fe);De=V(zt,be),zt.forEach(d),Re.forEach(d),_.forEach(d),this.h()},h(){ce(l.src,r=t[2])||u(l,"src",r),u(l,"alt",i=t[0].id),at(l,"height","36%"),u(l,"class","absolute top-0 left-0 right-0 w-full bgImage z-0 object-cover opacity-10"),u(h,"class","font-bold text-ellipsis whitespace-nowrap overflow-hidden"),u(n,"class","flex gap-2 max-w-full"),u(I,"class","text-ellipsis whitespace-nowrap overflow-hidden"),u(w,"class","flex gap-1 text-center max-w-full"),u(B,"class","opacity-60 text-ellipsis whitespace-nowrap overflow-hidden max-w-full"),u(z,"class","flex gap-2 mt-4 flex-wrap"),u(G,"class","text-xs font-bold uppercase opacity-40"),u(Pe,"class",""),u(x,"class","flex flex-col items-center justify-center flex-1 gap-1"),u(Ke,"class","bg-surface-900-50-token h-full w-px opacity-20"),u(he,"class","text-xs font-bold uppercase opacity-40"),u(K,"class",""),u(oe,"class","flex flex-col items-center justify-center flex-1 gap-1"),u(X,"class","flex mt-auto w-full"),u(f,"class","flex flex-col max-w-full w-full absolute items-center p-2 bottom-0"),at(f,"top","calc(90% - 13rem)"),u(a,"class","hoverCard card !bg-surface-100 dark:!bg-surface-600 shadow-2xl shadow-black absolute top-0 -left-4 -right-4 bottom-0 -z-1 flex flex-col p-4 gap-0.5 items-center svelte-1jt2e09"),at(a,"background","color-mix(in lch, rgb(var(--color-surface-"+(t[6]?100:900)+")) "+(t[6]?80:60)+"%, "+(t[3]||`rgb(var(--color-surface-${t[6]?100:600})`)+")",1),re(a,"hovered",t[4]),ce(N.src,ve=t[2])||u(N,"src",ve),u(N,"alt",pe=t[0].name),u(N,"class","card pinImage bg-surface-300-600-token shadow-black svelte-1jt2e09"),re(N,"hovered",t[4]),re(N,"shadow-lg",t[4]),u(Ee,"class","font-bold text-ellipsis whitespace-nowrap overflow-hidden"),u(fe,"class","flex gap-2"),u(Fe,"class","opacity-60 text-ellipsis whitespace-nowrap overflow-hidden max-w-full"),u(se,"class","info flex flex-col py-4 svelte-1jt2e09"),re(se,"opacity-0",t[4]),u(e,"class","wrapper relative z-0"),u(e,"href",t[1]),u(e,"id",Ge=t[0].id)},m(c,_){te(c,e,_),o(e,a),o(a,l),o(a,s),o(a,f),o(f,n),o(n,h),o(h,y),o(n,E);for(let W=0;W<Q.length;W+=1)Q[W]&&Q[W].m(n,null);o(f,m),o(f,w),o(w,I),o(I,F),o(w,A),o(w,U),o(U,Z),o(U,H),o(U,le),o(f,T),o(f,B),o(B,P),o(f,O),o(f,z);for(let W=0;W<j.length;W+=1)j[W]&&j[W].m(z,null);o(f,$),o(f,X),o(X,x),o(x,G),o(x,ge),o(x,Pe),o(Pe,de),o(X,we),o(X,Ke),o(X,nt),o(X,oe),o(oe,he),o(oe,ft),o(oe,K),o(K,Le),o(e,ut),o(e,N),o(e,Be),o(e,se),o(se,fe),o(fe,Ee),o(Ee,Ie),o(fe,Ue);for(let W=0;W<ee.length;W+=1)ee[W]&&ee[W].m(fe,null);o(se,Qe),o(se,_e),o(_e,Ce),o(_e,Ye),o(_e,Me),o(_e,$e),o(se,ct),o(se,Fe),o(Fe,De),xe||(dt=[Mt(e,"mouseenter",t[7]),Mt(e,"mouseleave",t[8])],xe=!0)},p(c,[_]){var W,q;if(_&4&&!ce(l.src,r=c[2])&&u(l,"src",r),_&1&&i!==(i=c[0].id)&&u(l,"alt",i),_&1&&p!==(p=c[0].name+"")&&R(y,p),_&32){S=Oe(c[5]);let k;for(k=0;k<S.length;k+=1){const ie=$t(c,S,k);Q[k]?Q[k].p(ie,_):(Q[k]=xt(ie),Q[k].c(),Q[k].m(n,null))}for(;k<Q.length;k+=1)Q[k].d(1);Q.length=S.length}if(_&1&&L!==(L=c[0].manufacturer+"")&&R(F,L),_&1&&J!==(J=c[0].year+"")&&R(H,J),_&1&&Y!==(Y=(((W=c[0].designers)==null?void 0:W.join(", "))||"-")+"")&&R(P,Y),_&1){qe=Oe(c[0].theme||[]);let k;for(k=0;k<qe.length;k+=1){const ie=Yt(c,qe,k);j[k]?j[k].p(ie,_):(j[k]=ea(ie),j[k].c(),j[k].m(z,null))}for(;k<j.length;k+=1)j[k].d(1);j.length=qe.length}if(_&1&&me!==(me=At(c[0].lastCreatedAt??c[0].updatedAt)+"")&&R(de,me),_&1&&Te!==(Te=(c[0].type||"-")+"")&&R(Le,Te),_&72&&at(a,"background","color-mix(in lch, rgb(var(--color-surface-"+(c[6]?100:900)+")) "+(c[6]?80:60)+"%, "+(c[3]||`rgb(var(--color-surface-${c[6]?100:600})`)+")",1),_&16&&re(a,"hovered",c[4]),_&4&&!ce(N.src,ve=c[2])&&u(N,"src",ve),_&1&&pe!==(pe=c[0].name)&&u(N,"alt",pe),_&16&&re(N,"hovered",c[4]),_&16&&re(N,"shadow-lg",c[4]),_&1&&ze!==(ze=c[0].name+"")&&R(Ie,ze),_&32){Ne=Oe(c[5]);let k;for(k=0;k<Ne.length;k+=1){const ie=Qt(c,Ne,k);ee[k]?ee[k].p(ie,_):(ee[k]=ta(ie),ee[k].c(),ee[k].m(fe,null))}for(;k<ee.length;k+=1)ee[k].d(1);ee.length=Ne.length}_&1&&ue!==(ue=c[0].manufacturer+"")&&R(Ce,ue),_&1&&We!==(We=c[0].year+"")&&R(Me,We),_&1&&be!==(be=(((q=c[0].designers)==null?void 0:q.join(", "))||"")+"")&&R(De,be),_&16&&re(se,"opacity-0",c[4]),_&2&&u(e,"href",c[1]),_&1&&Ge!==(Ge=c[0].id)&&u(e,"id",Ge)},i:Ft,o:Ft,d(c){c&&d(e),Ct(Q,c),Ct(j,c),Ct(ee,c),xe=!1,oa(dt)}}}function ml(t,e,a){let l,r,i,s;lt(t,_a,w=>a(9,i=w)),lt(t,va,w=>a(6,s=w));const f=new pa;let{file:n=ha}=e,{href:h=""}=e,p="",y=!1;const E=()=>{i.mobile||a(4,y=!0)},m=()=>{i.mobile||a(4,y=!1)};return t.$$set=w=>{"file"in w&&a(0,n=w.file),"href"in w&&a(1,h=w.href)},t.$$.update=()=>{t.$$.dirty&1&&a(2,l=Pa(n)),t.$$.dirty&1&&a(5,r=Array.from(new Set((n.tableFiles||[]).map(w=>w.tableFormat).filter(w=>!!w)))),t.$$.dirty&4&&l&&f.getColorAsync(l).then(w=>{w&&a(3,p=w.rgb)})},[n,h,l,p,y,r,s,E,m]}class pl extends st{constructor(e){super(),it(this,e,ml,gl,rt,{file:0,href:1})}}const Vt=""+new URL("../assets/tablePlaceholder.f13766a0.jpg",import.meta.url).href,aa={FastFlips:"bg-red-500",SSF:"bg-cyan-500","P-ROC":"bg-bg-yellow-500",FlexDMD:"bg-orange-500",PuP:"bg-sky-500",VR:"bg-cyan-500",Hybrid:"bg-violet-500","Mixed Reality":"bg-cyan-500",Music:"bg-rose-500",FSS:"bg-green-500","4k":"bg-teal-500",MOD:"bg-purple-500",VPX:"bg-emerald-500",VP9:"bg-emerald-500",PM5:"bg-green-500",FX3:"bg-lime-500",FX2:"bg-lime-500",FX:"bg-lime-500",FP:"bg-yellow-500",B2S:"bg-pink-500",ROM:"bg-fuchsia-500",POV:"bg-green-500",Color:"bg-red-500",Sound:"bg-rose-500",Wheel:"bg-purple-500",Rules:"bg-orange-500",MediaPack:"bg-yellow-500",Topper:"bg-red-500","PinX Sound":"bg-sore-500","incl. B2S":"bg-pink-500","incl. ROM":"bg-fuchsia-500","incl. Art":"bg-purple-500","incl. PuP":"bg-sky-500","incl. Video":"bg-sky-500","no ROM":"bg-fuchsia-500",Adult:"bg-slate-500",Kids:"bg-indigo-500",LUT:"bg-gray-500",nFozzy:"bg-blue-500",Scorbit:"bg-indigo-500",Fleep:"bg-yellow-500",VLM:"bg-lime-500"},la={Hybrid:"Automatically switches between VR and Flat","Mixed Reality":"Table can be played in VR and placed in your environment",VR:"Table can be played with a VR headset",FSS:"Table works well on a single screen in ladscape orientation","4k":"Table has high resolution textures",MOD:"Table is a modification of another table",Retheme:"Table uses a different table with a new theme applied","VPU Patch":"Uses VPURemix to patch an original table file",FastFlips:"Simulates quicker solenoid ramp up on flippers",SSF:"Has audio content for surround sound (positional audio)",FlexDMD:"An external DMD renderer",Music:"Table includes music files","incl. B2S":"Table includes backglass files","incl. ROM":"Table includes ROM files","incl. nvram":"Table includes nvram (settings and scores) file","incl. Art":"Table includes additional artwork","incl. PuP":"Table includes a PuP pack","incl. Video":"Table includes video files","no ROM":"Table does not require ROM emulation",Kids:"Table is geared towards children",Adult:"Table has adult themes",nFozzy:"Table has improved/realistic physics",Fleep:"Table has improve ball sounds",VLM:"VPX Light Mapper -- enhanced lighting",LUT:"Table coloring can be changed",Scorbit:"Table integrates with Scorbit score management",BAM:"Future Pinball table requires BAM (better arcade mode)",FizX:"Future Pinball table with improved physics",DOF:"Table integrates with DOF (solenoids and lights)"};function _l(t){let e;const a=t[4].default,l=fa(a,t,t[3],null);return{c(){l&&l.c()},l(r){l&&l.l(r)},m(r,i){l&&l.m(r,i),e=!0},p(r,i){l&&l.p&&(!e||i&8)&&ua(l,a,r,r[3],e?da(a,r[3],i,null):ca(r[3]),null)},i(r){e||(ae(l,r),e=!0)},o(r){ne(l,r),e=!1},d(r){l&&l.d(r)}}}function bl(t){let e,a,l,r,i,s,f,n,h,p;const y=t[4].default,E=fa(y,t,t[3],null);return{c(){e=v("div"),E&&E.c(),a=C(),l=v("div"),r=v("p"),i=D(t[0]),s=C(),f=v("div"),this.h()},l(m){e=g(m,"DIV",{});var w=b(e);E&&E.l(w),w.forEach(d),a=M(m),l=g(m,"DIV",{class:!0,"data-popup":!0});var I=b(l);r=g(I,"P",{});var L=b(r);i=V(L,t[0]),L.forEach(d),s=M(I),f=g(I,"DIV",{class:!0}),b(f).forEach(d),I.forEach(d),this.h()},h(){u(f,"class","arrow variant-filled-surface border-primary-500 border-r border-b"),u(l,"class","card px-2 py-1 variant-filled-surface z-50 border-primary-500 border shadow-md"),u(l,"data-popup",t[1])},m(m,w){te(m,e,w),E&&E.m(e,null),te(m,a,w),te(m,l,w),o(l,r),o(r,i),o(l,s),o(l,f),n=!0,h||(p=wa(Ta.call(null,e,t[2])),h=!0)},p(m,w){E&&E.p&&(!n||w&8)&&ua(E,y,m,m[3],n?da(y,m[3],w,null):ca(m[3]),null),(!n||w&1)&&R(i,m[0])},i(m){n||(ae(E,m),n=!0)},o(m){ne(E,m),n=!1},d(m){m&&(d(e),d(a),d(l)),E&&E.d(m),h=!1,p()}}}function wl(t){let e,a,l,r;const i=[bl,_l],s=[];function f(n,h){return n[0]?0:1}return e=f(t),a=s[e]=i[e](t),{c(){a.c(),l=mt()},l(n){a.l(n),l=mt()},m(n,h){s[e].m(n,h),te(n,l,h),r=!0},p(n,[h]){let p=e;e=f(n),e===p?s[e].p(n,h):(St(),ne(s[p],1,1,()=>{s[p]=null}),Rt(),a=s[e],a?a.p(n,h):(a=s[e]=i[e](n),a.c()),ae(a,1),a.m(l.parentNode,l))},i(n){r||(ae(a),r=!0)},o(n){ne(a),r=!1},d(n){n&&d(l),s[e].d(n)}}}function El(t,e,a){let{$$slots:l={},$$scope:r}=e,{content:i=""}=e;const s=za(10),f={event:"hover",target:s,placement:"top"};return t.$$set=n=>{"content"in n&&a(0,i=n.content),"$$scope"in n&&a(3,r=n.$$scope)},[i,s,f,r,l]}class Il extends st{constructor(e){super(),it(this,e,El,wl,rt,{content:0})}}function ra(t,e,a){const l=t.slice();return l[1]=e[a],l}function sa(t){let e,a,l=Oe(t[0]||[]),r=[];for(let s=0;s<l.length;s+=1)r[s]=ia(ra(t,l,s));const i=s=>ne(r[s],1,1,()=>{r[s]=null});return{c(){e=v("div");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){e=g(s,"DIV",{class:!0});var f=b(e);for(let n=0;n<r.length;n+=1)r[n].l(f);f.forEach(d),this.h()},h(){u(e,"class","flex gap-1 flex-wrap")},m(s,f){te(s,e,f);for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(e,null);a=!0},p(s,f){if(f&1){l=Oe(s[0]||[]);let n;for(n=0;n<l.length;n+=1){const h=ra(s,l,n);r[n]?(r[n].p(h,f),ae(r[n],1)):(r[n]=ia(h),r[n].c(),ae(r[n],1),r[n].m(e,null))}for(St(),n=l.length;n<r.length;n+=1)i(n);Rt()}},i(s){if(!a){for(let f=0;f<l.length;f+=1)ae(r[f]);a=!0}},o(s){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)ne(r[f]);a=!1},d(s){s&&d(e),Ct(r,s)}}}function kl(t){let e,a,l,r=t[1].toUpperCase()+"",i,s;return{c(){e=v("div"),a=v("span"),i=D(r),s=C(),this.h()},l(f){e=g(f,"DIV",{class:!0});var n=b(e);a=g(n,"SPAN",{class:!0}),b(a).forEach(d),i=V(n,r),n.forEach(d),s=M(f),this.h()},h(){u(a,"class",l="rounded-full h-2 w-2 "+(aa[t[1]]||"bg-slate-500")+" mr-2"),u(e,"class","badge variant-ringed-surface px-1.5 py-0.5")},m(f,n){te(f,e,n),o(e,a),o(e,i),te(f,s,n)},p(f,n){n&1&&l!==(l="rounded-full h-2 w-2 "+(aa[f[1]]||"bg-slate-500")+" mr-2")&&u(a,"class",l),n&1&&r!==(r=f[1].toUpperCase()+"")&&R(i,r)},d(f){f&&(d(e),d(s))}}}function ia(t){let e,a;return e=new Il({props:{content:la[t[1]],$$slots:{default:[kl]},$$scope:{ctx:t}}}),{c(){pt(e.$$.fragment)},l(l){_t(e.$$.fragment,l)},m(l,r){bt(e,l,r),a=!0},p(l,r){const i={};r&1&&(i.content=la[l[1]]),r&17&&(i.$$scope={dirty:r,ctx:l}),e.$set(i)},i(l){a||(ae(e.$$.fragment,l),a=!0)},o(l){ne(e.$$.fragment,l),a=!1},d(l){wt(e,l)}}}function yl(t){var r;let e,a,l=((r=t[0])==null?void 0:r.length)&&sa(t);return{c(){l&&l.c(),e=mt()},l(i){l&&l.l(i),e=mt()},m(i,s){l&&l.m(i,s),te(i,e,s),a=!0},p(i,[s]){var f;(f=i[0])!=null&&f.length?l?(l.p(i,s),s&1&&ae(l,1)):(l=sa(i),l.c(),ae(l,1),l.m(e.parentNode,e)):l&&(St(),ne(l,1,1,()=>{l=null}),Rt())},i(i){a||(ae(l),a=!0)},o(i){ne(l),a=!1},d(i){i&&d(e),l&&l.d(i)}}}function Pl(t,e,a){let{data:l=[]}=e;return t.$$set=r=>{"data"in r&&a(0,l=r.data)},[l]}class Tl extends st{constructor(e){super(),it(this,e,Pl,yl,rt,{data:0})}}function na(t){let e,a,l=t[0].edition+"",r;return{c(){e=v("div"),a=v("p"),r=D(l),this.h()},l(i){e=g(i,"DIV",{class:!0});var s=b(e);a=g(s,"P",{class:!0});var f=b(a);r=V(f,l),f.forEach(d),s.forEach(d),this.h()},h(){u(a,"class","font-bold text-ellipsis whitespace-nowrap overflow-hidden"),u(e,"class","flex gap-2 max-w-full")},m(i,s){te(i,e,s),o(e,a),o(a,r)},p(i,s){s&1&&l!==(l=i[0].edition+"")&&R(r,l)},d(i){i&&d(e)}}}function Cl(t){var Ne,ee,Et,It;let e,a,l,r,i,s,f,n,h,p=((Ne=t[0].game)==null?void 0:Ne.name)+"",y,E,m,w=t[0].tableFormat+"",I,L,F,A,U,Z,J,H=t[4].manufacturer+"",le,T,B,Y,P=t[4].year+"",O,z,$,X,x=(((ee=t[0].authors)==null?void 0:ee.join(", "))||"-")+"",G,je,ge,Pe,me,de,we,Ke="Updated at",nt,oe,he=At(t[0].createdAt??t[0].updatedAt)+"",ot,ft,K,Te,Le,ut,N,ve,pe,Be=((Et=t[0].game)==null?void 0:Et.name)+"",se,fe=t[0].edition?` ${t[0].edition}`:"",Ee,ze,Ie,Ue=t[0].tableFormat+"",Qe,_e,ue,Ce=t[4].manufacturer+"",Ye,We,Me=t[4].year+"",$e,ct,Fe,be,De=((It=t[0].authors)==null?void 0:It.join(", "))+"",Ge,xe,dt,S,Q,qe;F=new Lt({props:{game:t[4]}});let j=t[0].edition&&na(t);return ge=new Tl({props:{data:t[0].features}}),{c(){e=v("a"),a=v("div"),l=v("img"),s=C(),f=v("div"),n=v("div"),h=v("p"),y=D(p),E=C(),m=v("div"),I=D(w),L=C(),pt(F.$$.fragment),A=C(),j&&j.c(),U=C(),Z=v("div"),J=v("p"),le=D(H),T=C(),B=v("p"),Y=D("("),O=D(P),z=D(")"),$=C(),X=v("p"),G=D(x),je=C(),pt(ge.$$.fragment),Pe=C(),me=v("div"),de=v("div"),we=v("p"),we.textContent=Ke,nt=C(),oe=v("p"),ot=D(he),ft=C(),K=v("img"),ut=C(),N=v("div"),ve=v("div"),pe=v("p"),se=D(Be),Ee=D(fe),ze=C(),Ie=v("div"),Qe=D(Ue),_e=C(),ue=v("p"),Ye=D(Ce),We=D(" ("),$e=D(Me),ct=D(")"),Fe=C(),be=v("p"),Ge=D(De),this.h()},l(c){e=g(c,"A",{class:!0,href:!0,id:!0,"data-gameid":!0,"data-filetype":!0});var _=b(e);a=g(_,"DIV",{style:!0,class:!0});var W=b(a);l=g(W,"IMG",{src:!0,alt:!0,style:!0,class:!0}),s=M(W),f=g(W,"DIV",{class:!0,style:!0});var q=b(f);n=g(q,"DIV",{class:!0});var k=b(n);h=g(k,"P",{class:!0});var ie=b(h);y=V(ie,p),ie.forEach(d),E=M(k),m=g(k,"DIV",{class:!0});var Ve=b(m);I=V(Ve,w),Ve.forEach(d),L=M(k),_t(F.$$.fragment,k),k.forEach(d),A=M(q),j&&j.l(q),U=M(q),Z=g(q,"DIV",{class:!0});var Ae=b(Z);J=g(Ae,"P",{class:!0});var Se=b(J);le=V(Se,H),Se.forEach(d),T=M(Ae),B=g(Ae,"P",{});var ht=b(B);Y=V(ht,"("),O=V(ht,P),z=V(ht,")"),ht.forEach(d),Ae.forEach(d),$=M(q),X=g(q,"P",{class:!0});var kt=b(X);G=V(kt,x),kt.forEach(d),je=M(q),_t(ge.$$.fragment,q),Pe=M(q),me=g(q,"DIV",{class:!0});var Xe=b(me);de=g(Xe,"DIV",{class:!0});var Ze=b(de);we=g(Ze,"P",{class:!0,"data-svelte-h":!0}),Ht(we)!=="svelte-g6tq99"&&(we.textContent=Ke),nt=M(Ze),oe=g(Ze,"P",{class:!0});var yt=b(oe);ot=V(yt,he),yt.forEach(d),Ze.forEach(d),Xe.forEach(d),q.forEach(d),W.forEach(d),ft=M(_),K=g(_,"IMG",{src:!0,alt:!0,class:!0}),ut=M(_),N=g(_,"DIV",{class:!0});var ke=b(N);ve=g(ke,"DIV",{class:!0});var vt=b(ve);pe=g(vt,"P",{class:!0});var Re=b(pe);se=V(Re,Be),Ee=V(Re,fe),Re.forEach(d),ze=M(vt),Ie=g(vt,"DIV",{class:!0});var gt=b(Ie);Qe=V(gt,Ue),gt.forEach(d),vt.forEach(d),_e=M(ke),ue=g(ke,"P",{});var et=b(ue);Ye=V(et,Ce),We=V(et," ("),$e=V(et,Me),ct=V(et,")"),et.forEach(d),Fe=M(ke),be=g(ke,"P",{class:!0});var tt=b(be);Ge=V(tt,De),tt.forEach(d),ke.forEach(d),_.forEach(d),this.h()},h(){var c;ce(l.src,r=t[0].imgUrl||Vt)||u(l,"src",r),u(l,"alt",i=t[0].id),at(l,"height","35%"),u(l,"class","absolute top-0 left-0 right-0 w-full bgImage z-0 object-cover opacity-60 svelte-gfpzxg"),u(h,"class","font-bold text-ellipsis whitespace-nowrap overflow-hidden"),u(m,"class","badge badge-glass my-auto py-0.5 px-1"),u(n,"class","flex gap-2 max-w-full"),u(J,"class","text-ellipsis whitespace-nowrap overflow-hidden"),u(Z,"class","flex gap-1 text-center"),u(X,"class","opacity-60 text-ellipsis whitespace-nowrap overflow-hidden max-w-full mb-4"),u(we,"class","text-xs font-bold uppercase opacity-40"),u(oe,"class",""),u(de,"class","flex flex-col items-center justify-center flex-1 gap-1"),u(me,"class","flex mt-auto w-full"),u(f,"class","flex flex-col max-w-full w-full absolute items-center p-4 gap-0.5 bottom-0"),at(f,"top","calc(88.5% - 14rem)"),at(a,"background","color-mix(in lch, rgb(var(--color-surface-"+(t[5]?100:900)+")) "+(t[5]?80:60)+"%, "+(t[2]||`rgb(var(--color-surface-${t[5]?100:600})`)+")",1),u(a,"class","card !bg-surface-100 dark:!bg-surface-600 shadow-2xl shadow-black absolute top-0 -left-4 -right-4 bottom-0 -z-1 flex flex-col p-4 gap-0.5 items-center hoverCard svelte-gfpzxg"),re(a,"hovered",t[3]),ce(K.src,Te=t[0].imgUrl||Vt)||u(K,"src",Te),u(K,"alt",Le=t[0].id),u(K,"class","card pinImage bg-surface-300-600-token shadow-black svelte-gfpzxg"),re(K,"hovered",t[3]),re(K,"shadow-lg",t[3]),u(pe,"class","font-bold text-ellipsis whitespace-nowrap overflow-hidden"),u(Ie,"class","badge badge-glass my-auto py-0.5 px-1"),u(ve,"class","flex gap-2"),u(be,"class","opacity-60 text-ellipsis whitespace-nowrap overflow-hidden"),u(N,"class","flex flex-col py-4 info svelte-gfpzxg"),re(N,"opacity-0",t[3]),u(e,"class","wrapper relative z-0 inline-block max-w-full min-w-0 w-full"),u(e,"href",t[1]),u(e,"id",xe=t[0].id),u(e,"data-gameid",dt=(c=t[0].game)==null?void 0:c.id),u(e,"data-filetype","tableFiles")},m(c,_){te(c,e,_),o(e,a),o(a,l),o(a,s),o(a,f),o(f,n),o(n,h),o(h,y),o(n,E),o(n,m),o(m,I),o(n,L),bt(F,n,null),o(f,A),j&&j.m(f,null),o(f,U),o(f,Z),o(Z,J),o(J,le),o(Z,T),o(Z,B),o(B,Y),o(B,O),o(B,z),o(f,$),o(f,X),o(X,G),o(f,je),bt(ge,f,null),o(f,Pe),o(f,me),o(me,de),o(de,we),o(de,nt),o(de,oe),o(oe,ot),o(e,ft),o(e,K),o(e,ut),o(e,N),o(N,ve),o(ve,pe),o(pe,se),o(pe,Ee),o(ve,ze),o(ve,Ie),o(Ie,Qe),o(N,_e),o(N,ue),o(ue,Ye),o(ue,We),o(ue,$e),o(ue,ct),o(N,Fe),o(N,be),o(be,Ge),S=!0,Q||(qe=[Mt(e,"mouseenter",t[7]),Mt(e,"mouseleave",t[8])],Q=!0)},p(c,[_]){var k,ie,Ve,Ae,Se;(!S||_&1&&!ce(l.src,r=c[0].imgUrl||Vt))&&u(l,"src",r),(!S||_&1&&i!==(i=c[0].id))&&u(l,"alt",i),(!S||_&1)&&p!==(p=((k=c[0].game)==null?void 0:k.name)+"")&&R(y,p),(!S||_&1)&&w!==(w=c[0].tableFormat+"")&&R(I,w);const W={};_&16&&(W.game=c[4]),F.$set(W),c[0].edition?j?j.p(c,_):(j=na(c),j.c(),j.m(f,U)):j&&(j.d(1),j=null),(!S||_&16)&&H!==(H=c[4].manufacturer+"")&&R(le,H),(!S||_&16)&&P!==(P=c[4].year+"")&&R(O,P),(!S||_&1)&&x!==(x=(((ie=c[0].authors)==null?void 0:ie.join(", "))||"-")+"")&&R(G,x);const q={};_&1&&(q.data=c[0].features),ge.$set(q),(!S||_&1)&&he!==(he=At(c[0].createdAt??c[0].updatedAt)+"")&&R(ot,he),(!S||_&36)&&at(a,"background","color-mix(in lch, rgb(var(--color-surface-"+(c[5]?100:900)+")) "+(c[5]?80:60)+"%, "+(c[2]||`rgb(var(--color-surface-${c[5]?100:600})`)+")",1),(!S||_&8)&&re(a,"hovered",c[3]),(!S||_&1&&!ce(K.src,Te=c[0].imgUrl||Vt))&&u(K,"src",Te),(!S||_&1&&Le!==(Le=c[0].id))&&u(K,"alt",Le),(!S||_&8)&&re(K,"hovered",c[3]),(!S||_&8)&&re(K,"shadow-lg",c[3]),(!S||_&1)&&Be!==(Be=((Ve=c[0].game)==null?void 0:Ve.name)+"")&&R(se,Be),(!S||_&1)&&fe!==(fe=c[0].edition?` ${c[0].edition}`:"")&&R(Ee,fe),(!S||_&1)&&Ue!==(Ue=c[0].tableFormat+"")&&R(Qe,Ue),(!S||_&16)&&Ce!==(Ce=c[4].manufacturer+"")&&R(Ye,Ce),(!S||_&16)&&Me!==(Me=c[4].year+"")&&R($e,Me),(!S||_&1)&&De!==(De=((Ae=c[0].authors)==null?void 0:Ae.join(", "))+"")&&R(Ge,De),(!S||_&8)&&re(N,"opacity-0",c[3]),(!S||_&2)&&u(e,"href",c[1]),(!S||_&1&&xe!==(xe=c[0].id))&&u(e,"id",xe),(!S||_&1&&dt!==(dt=(Se=c[0].game)==null?void 0:Se.id))&&u(e,"data-gameid",dt)},i(c){S||(ae(F.$$.fragment,c),ae(ge.$$.fragment,c),S=!0)},o(c){ne(F.$$.fragment,c),ne(ge.$$.fragment,c),S=!1},d(c){c&&d(e),wt(F),j&&j.d(),wt(ge),Q=!1,oa(qe)}}}function Ml(t,e,a){let l,r,i,s;lt(t,_a,I=>a(10,r=I)),lt(t,va,I=>a(5,s=I));const f=new pa,{dbStore:n}=jt;lt(t,n,I=>a(9,i=I));let{file:h=ka}=e,{href:p=""}=e,y="",E=!1;const m=()=>{r.mobile||a(3,E=!0)},w=()=>{r.mobile||a(3,E=!1)};return t.$$set=I=>{"file"in I&&a(0,h=I.file),"href"in I&&a(1,p=I.href)},t.$$.update=()=>{var I;t.$$.dirty&513&&a(4,l=(I=h==null?void 0:h.game)!=null&&I.id?i[h.game.id]:ha),t.$$.dirty&1&&h.imgUrl&&f.getColorAsync(h.imgUrl).then(L=>{L&&a(2,y=L.rgb)})},[h,p,y,E,l,s,n,m,w,i]}class Fl extends st{constructor(e){super(),it(this,e,Ml,Cl,rt,{file:0,href:1})}}function Dl(t){var L;let e,a,l,r,i,s,f,n,h=t[0].title+"",p,y,E,m=((L=t[0].authors)==null?void 0:L.join(", "))+"",w,I;return{c(){e=v("a"),a=v("img"),s=C(),f=v("div"),n=v("p"),p=D(h),y=C(),E=v("p"),w=D(m),this.h()},l(F){e=g(F,"A",{href:!0,class:!0,id:!0,"data-gameid":!0,"data-filetype":!0});var A=b(e);a=g(A,"IMG",{alt:!0,title:!0,class:!0,width:!0,src:!0}),s=M(A),f=g(A,"DIV",{class:!0});var U=b(f);n=g(U,"P",{class:!0});var Z=b(n);p=V(Z,h),Z.forEach(d),y=M(U),E=g(U,"P",{class:!0});var J=b(E);w=V(J,m),J.forEach(d),U.forEach(d),A.forEach(d),this.h()},h(){u(a,"alt",l=t[0].youtubeId),u(a,"title",r=t[0].title),u(a,"class","card aspectTable hover:brightness-125 hover:scale-110 transition-all svelte-cprdlx"),u(a,"width","352"),ce(a.src,i=`https://img.youtube.com/vi/${t[0].youtubeId}/0.jpg`)||u(a,"src",i),re(a,"glow",t[2]),u(n,"class","font-bold text-ellipsis whitespace-nowrap overflow-hidden leading-4"),u(E,"class","text-ellipsis whitespace-nowrap overflow-hidden opacity-60 pb-1"),u(f,"class","flex flex-col py-4"),u(e,"href",t[1]),u(e,"class","flex flex-col"),u(e,"id",I=t[0].id),u(e,"data-gameid",t[3]),u(e,"data-filetype","b2sFiles")},m(F,A){te(F,e,A),o(e,a),o(e,s),o(e,f),o(f,n),o(n,p),o(f,y),o(f,E),o(E,w)},p(F,[A]){var U;A&1&&l!==(l=F[0].youtubeId)&&u(a,"alt",l),A&1&&r!==(r=F[0].title)&&u(a,"title",r),A&1&&!ce(a.src,i=`https://img.youtube.com/vi/${F[0].youtubeId}/0.jpg`)&&u(a,"src",i),A&4&&re(a,"glow",F[2]),A&1&&h!==(h=F[0].title+"")&&R(p,h),A&1&&m!==(m=((U=F[0].authors)==null?void 0:U.join(", "))+"")&&R(w,m),A&2&&u(e,"href",F[1]),A&1&&I!==(I=F[0].id)&&u(e,"id",I),A&8&&u(e,"data-gameid",F[3])},i:Ft,o:Ft,d(F){F&&d(e)}}}function Vl(t,e,a){let{file:l=ya}=e,{href:r=""}=e,{active:i=!1}=e,{gameId:s}=e;return t.$$set=f=>{"file"in f&&a(0,l=f.file),"href"in f&&a(1,r=f.href),"active"in f&&a(2,i=f.active),"gameId"in f&&a(3,s=f.gameId)},[l,r,i,s]}class Al extends st{constructor(e){super(),it(this,e,Vl,Dl,rt,{file:0,href:1,active:2,gameId:3})}}const ql={game:{route:"games",name:"Games",component:pl},tableFiles:{route:"tables",name:"Tables",component:Fl},b2sFiles:{route:"b2s",name:"Backglasses",component:Na},tutorialFiles:{route:"tutorials",name:"Tutorials",component:Al,icon:Wt},pupPackFiles:{route:"puppacks",name:"PuP Packs",component:Je,icon:Va},romFiles:{route:"roms",name:"Roms",component:Je,icon:Aa},altColorFiles:{route:"coloredroms",name:"Colored Roms",component:Je,icon:Sa},altSoundFiles:{route:"altsounds",name:"Alt. Sounds",component:Je,icon:Ra},topperFiles:{route:"toppers",name:"Toppers",component:Je,icon:Ha},povFiles:{route:"pov",name:"POVs",component:Je,icon:Oa},mediaPackFiles:{route:"mediapacks",name:"Media Packs",component:Je,icon:ja},wheelArtFiles:{route:"wheelart",name:"Wheelart",component:Je,icon:La},ruleFiles:{route:"rules",name:"Rules",component:Je,icon:Wt}};export{Tl as F,Vt as P,Il as T,_a as a,pa as b,Fl as c,ql as m};
