import{$ as me,s as J,y as he,f as L,a as q,l as N,g as y,h as g,d as _,c as I,m as ee,j as E,i as U,H as D,T as ve,z as we,A as _e,B as be,n as te,a2 as ke,W as Z}from"./scheduler.6b4a5b57.js";import{S as oe,i as ne,a as A,t as S,g as Ee,c as $e,b as re,d as ae,m as se,e as ie}from"./index.093f3364.js";import{C as Le,D as ye,E as ge,G as De,H as Ue,p as Ae,e as K}from"./modeMapping.65baf01c.js";import{F as Fe}from"./fa.7447d470.js";import{w as Se,d as Ce}from"./index.71b23ac7.js";import{l as le,d as Ve}from"./VPin.f0384699.js";const ze=Se(void 0);function Me(t,e){const{computePosition:r,autoUpdate:n,offset:o,shift:l,flip:s,arrow:i,size:a,autoPlacement:d,hide:f,inline:m}=me(ze),c={open:!1,autoUpdateCleanup:()=>{}},p=':is(a[href], button, input, textarea, select, details, [tabindex]):not([tabindex="-1"])';let h;const w="https://www.skeleton.dev/utilities/popups";let u,C;function j(){u=document.querySelector(`[data-popup="${e.target}"]`)??document.createElement("div"),C=u.querySelector(".arrow")??document.createElement("div")}j();function V(){var b,$,M,H,x,G,O,Q;if(!u)throw new Error(`The data-popup="${e.target}" element was not found. ${w}`);if(!r)throw new Error(`Floating UI 'computePosition' not found for data-popup="${e.target}". ${w}`);if(!o)throw new Error(`Floating UI 'offset' not found for data-popup="${e.target}". ${w}`);if(!l)throw new Error(`Floating UI 'shift' not found for data-popup="${e.target}". ${w}`);if(!s)throw new Error(`Floating UI 'flip' not found for data-popup="${e.target}". ${w}`);if(!i)throw new Error(`Floating UI 'arrow' not found for data-popup="${e.target}". ${w}`);const v=[];a&&v.push(a((b=e.middleware)==null?void 0:b.size)),d&&v.push(d(($=e.middleware)==null?void 0:$.autoPlacement)),f&&v.push(f((M=e.middleware)==null?void 0:M.hide)),m&&v.push(m((H=e.middleware)==null?void 0:H.inline)),r(t,u,{placement:e.placement??"bottom",middleware:[o(((x=e.middleware)==null?void 0:x.offset)??8),l(((G=e.middleware)==null?void 0:G.shift)??{padding:8}),s((O=e.middleware)==null?void 0:O.flip),i(((Q=e.middleware)==null?void 0:Q.arrow)??{element:C||null}),...v]}).then(({x:ce,y:ue,placement:fe,middlewareData:pe})=>{if(Object.assign(u.style,{left:`${ce}px`,top:`${ue}px`}),C){const{x:R,y:W}=pe.arrow,de={top:"bottom",right:"left",bottom:"top",left:"right"}[fe.split("-")[0]];Object.assign(C.style,{left:R!=null?`${R}px`:"",top:W!=null?`${W}px`:"",right:"",bottom:"",[de]:"-4px"})}})}function F(){u&&(c.open=!0,e.state&&e.state({state:c.open}),V(),u.style.display="block",u.style.opacity="1",u.style.pointerEvents="auto",u.removeAttribute("inert"),c.autoUpdateCleanup=n(t,u,V),h=Array.from(u==null?void 0:u.querySelectorAll(p)))}function k(v){if(!u)return;const b=parseFloat(window.getComputedStyle(u).transitionDuration.replace("s",""))*1e3;setTimeout(()=>{c.open=!1,e.state&&e.state({state:c.open}),u.style.opacity="0",u.setAttribute("inert",""),c.autoUpdateCleanup&&c.autoUpdateCleanup(),v&&v()},b)}function z(){c.open===!1?F():k()}function T(v){if(c.open===!1||t.contains(v.target))return;if(u&&u.contains(v.target)===!1){k();return}const b=e.closeQuery===void 0?"a[href], button":e.closeQuery,$=u==null?void 0:u.querySelectorAll(b);$==null||$.forEach(M=>{M.contains(v.target)&&k()})}const B=v=>{if(c.open===!1)return;const b=v.key;if(b==="Escape"){v.preventDefault(),t.focus(),k();return}h=Array.from(u==null?void 0:u.querySelectorAll(p)),c.open&&document.activeElement===t&&(b==="ArrowDown"||b==="Tab")&&p.length>0&&h.length>0&&(v.preventDefault(),h[0].focus())};switch(e.event){case"click":t.addEventListener("click",z,!0),window.addEventListener("click",T,!0);break;case"hover":t.addEventListener("mouseover",F,!0),t.addEventListener("mouseleave",()=>k(),!0);break;case"focus-blur":t.addEventListener("focus",z,!0),t.addEventListener("blur",()=>k(),!0);break;case"focus-click":t.addEventListener("focus",F,!0),window.addEventListener("click",T,!0);break;default:throw new Error(`Event value of '${e.event}' is not supported. ${w}`)}return window.addEventListener("keydown",B,!0),V(),{update(v){k(()=>{e=v,V(),j()})},destroy(){t.removeEventListener("click",z,!0),t.removeEventListener("mouseover",F,!0),t.removeEventListener("mouseleave",()=>k(),!0),t.removeEventListener("focus",z,!0),t.removeEventListener("focus",F,!0),t.removeEventListener("blur",()=>k(),!0),window.removeEventListener("click",T,!0),window.removeEventListener("keydown",B,!0)}}}let Pe=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");function Te(t){let e,r,n,o,l,s,i,a,d,f;const m=t[4].default,c=he(m,t,t[3],null);return{c(){e=L("div"),c&&c.c(),r=q(),n=L("div"),o=L("p"),l=N(t[0]),s=q(),i=L("div"),this.h()},l(p){e=y(p,"DIV",{});var h=g(e);c&&c.l(h),h.forEach(_),r=I(p),n=y(p,"DIV",{class:!0,"data-popup":!0});var w=g(n);o=y(w,"P",{});var u=g(o);l=ee(u,t[0]),u.forEach(_),s=I(w),i=y(w,"DIV",{class:!0}),g(i).forEach(_),w.forEach(_),this.h()},h(){E(i,"class","arrow variant-filled-surface border-primary-500 border-r border-b"),E(n,"class","card px-2 py-1 variant-filled-surface z-50 border-primary-500 border shadow-md"),E(n,"data-popup",t[1])},m(p,h){U(p,e,h),c&&c.m(e,null),U(p,r,h),U(p,n,h),D(n,o),D(o,l),D(n,s),D(n,i),a=!0,d||(f=ve(Me.call(null,e,t[2])),d=!0)},p(p,[h]){c&&c.p&&(!a||h&8)&&we(c,m,p,p[3],a?be(m,p[3],h,null):_e(p[3]),null),(!a||h&1)&&te(l,p[0])},i(p){a||(A(c,p),a=!0)},o(p){S(c,p),a=!1},d(p){p&&(_(e),_(r),_(n)),c&&c.d(p),d=!1,f()}}}function qe(t,e,r){let{$$slots:n={},$$scope:o}=e,{content:l=""}=e;const s=Pe(),i={event:"hover",target:s,placement:"top"};return t.$$set=a=>{"content"in a&&r(0,l=a.content),"$$scope"in a&&r(3,o=a.$$scope)},[l,s,i,o,n]}class Ie extends oe{constructor(e){super(),ne(this,e,qe,Te,J,{content:0})}}var je={prefix:"fab",iconName:"dropbox",icon:[528,512,[],"f16b","M264.4 116.3l-132 84.3 132 84.3-132 84.3L0 284.1l132.3-84.3L0 116.3 132.3 32l132.1 84.3zM131.6 395.7l132-84.3 132 84.3-132 84.3-132-84.3zm132.8-111.6l132-84.3-132-83.6L395.7 32 528 116.3l-132.3 84.3L528 284.8l-132.3 84.3-131.3-85z"]},Be={prefix:"fab",iconName:"facebook",icon:[512,512,[62e3],"f09a","M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"]},He={prefix:"fab",iconName:"google-drive",icon:[512,512,[],"f3aa","M339 314.9L175.4 32h161.2l163.6 282.9H339zm-137.5 23.6L120.9 480h310.5L512 338.5H201.5zM154.1 67.4L0 338.5 80.6 480 237 208.8 154.1 67.4z"]};const xe=t=>t.url?t.url.includes("vpuniverse")?{tooltip:"VPUniverse",class:"variant-ghost-tertiary",icon:ye,title:"VPU",...t}:t.url.includes("vpforums")?{tooltip:"VP Forums",class:"variant-ghost-warning",icon:ge,title:"VPF",...t}:t.url.includes("drive.google")?{tooltip:"Google Drive",class:"variant-ghost-surface",icon:He,title:"GDrive",...t}:t.url.includes("facebook")?{tooltip:"Facebook",class:"variant-ghost-tertiary",icon:Be,title:"Facebook",...t}:t.url.includes("mega")?{tooltip:"Mega",class:"variant-ghost-primary",icon:De,title:"Mega",...t}:t.url.includes("dropbox")?{tooltip:"Dropbox",class:"variant-ghost-secondary",icon:je,title:"Dropbox",...t}:t.url.includes("zen")?{tooltip:"Zen Pinball",class:"variant-ghost-surface",icon:Ue,title:"Zen",...t}:{tooltip:"External",class:"variant-ghost-success",icon:Ae,title:"Ext",...t}:{tooltip:"???",class:"variant-soft",icon:Le,title:"???",...t};function X(t,e,r){const n=t.slice();return n[2]=e[r],n}function Ge(t){let e,r,n,o=t[2].title+"",l,s,i,a,d;return r=new Fe({props:{icon:t[2].icon}}),{c(){e=L("a"),re(r.$$.fragment),n=L("span"),l=N(o),a=q(),this.h()},l(f){e=y(f,"A",{href:!0,target:!0,class:!0});var m=g(e);ae(r.$$.fragment,m),n=y(m,"SPAN",{});var c=g(n);l=ee(c,o),c.forEach(_),m.forEach(_),a=I(f),this.h()},h(){E(e,"href",s=t[2].broken?"":t[2].url),E(e,"target","_blank"),E(e,"class",i="chip "+t[2].class),Z(e,"opacity-20",t[2].broken)},m(f,m){U(f,e,m),se(r,e,null),D(e,n),D(n,l),U(f,a,m),d=!0},p(f,m){const c={};m&1&&(c.icon=f[2].icon),r.$set(c),(!d||m&1)&&o!==(o=f[2].title+"")&&te(l,o),(!d||m&1&&s!==(s=f[2].broken?"":f[2].url))&&E(e,"href",s),(!d||m&1&&i!==(i="chip "+f[2].class))&&E(e,"class",i),(!d||m&1)&&Z(e,"opacity-20",f[2].broken)},i(f){d||(A(r.$$.fragment,f),d=!0)},o(f){S(r.$$.fragment,f),d=!1},d(f){f&&(_(e),_(a)),ie(r)}}}function Y(t){let e,r;return e=new Ie({props:{content:t[2].broken?"This link is broken and needs to be updated. If you are aware of a working upload, please contact us!":t[2].tooltip,$$slots:{default:[Ge]},$$scope:{ctx:t}}}),{c(){re(e.$$.fragment)},l(n){ae(e.$$.fragment,n)},m(n,o){se(e,n,o),r=!0},p(n,o){const l={};o&1&&(l.content=n[2].broken?"This link is broken and needs to be updated. If you are aware of a working upload, please contact us!":n[2].tooltip),o&33&&(l.$$scope={dirty:o,ctx:n}),e.$set(l)},i(n){r||(A(e.$$.fragment,n),r=!0)},o(n){S(e.$$.fragment,n),r=!1},d(n){ie(e,n)}}}function Oe(t){let e,r,n=K(t[0]),o=[];for(let s=0;s<n.length;s+=1)o[s]=Y(X(t,n,s));const l=s=>S(o[s],1,1,()=>{o[s]=null});return{c(){e=L("div");for(let s=0;s<o.length;s+=1)o[s].c();this.h()},l(s){e=y(s,"DIV",{class:!0});var i=g(e);for(let a=0;a<o.length;a+=1)o[a].l(i);i.forEach(_),this.h()},h(){E(e,"class","flex gap-1")},m(s,i){U(s,e,i);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);r=!0},p(s,[i]){if(i&1){n=K(s[0]);let a;for(a=0;a<n.length;a+=1){const d=X(s,n,a);o[a]?(o[a].p(d,i),A(o[a],1)):(o[a]=Y(d),o[a].c(),A(o[a],1),o[a].m(e,null))}for(Ee(),a=n.length;a<o.length;a+=1)l(a);$e()}},i(s){if(!r){for(let i=0;i<n.length;i+=1)A(o[i]);r=!0}},o(s){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)S(o[i]);r=!1},d(s){s&&_(e),ke(o,s)}}}function Qe(t,e,r){let n,{urls:o=[]}=e;return t.$$set=l=>{"urls"in l&&r(1,o=l.urls)},t.$$.update=()=>{t.$$.dirty&2&&r(0,n=o.map(l=>xe(l)).filter(l=>!!l))},[n,o]}class ot extends oe{constructor(e){super(),ne(this,e,Qe,Oe,J,{urls:1})}}const P=le("lists",{}),Re=le("ckechedBookmarks",[]),We=Ce([P,Ve.dbStore],([t,e])=>{const r=t.bookmarks||[],n=[];return Object.entries(r).forEach(([o,l])=>{var a;const s=(a=e[o])==null?void 0:a.name;if(!s)return;const i={name:s,id:o,files:{}};Object.entries(l).sort((d,f)=>d[0]<f[0]?-1:1).forEach(([d,f])=>{const m=f.map(c=>{var h,w;return(w=(h=e[o])==null?void 0:h[d])==null?void 0:w.find(u=>u.id===c)});i.files[d]=m}),n.push(i)}),n}),Ze=(t,e,r,n)=>{P.update(o=>{var s,i;o[t]||(o[t]={});const l=o[t];return l[e]||(l[e]={}),l[e][r]||(l[e][r]=[]),(s=l[e][r])!=null&&s.includes(n)||(i=l[e][r])==null||i.push(n),o})},Ke=(t,e)=>{P.update(r=>{var o;const n=r[t];if(n){if(n[e])return delete n[e],r;for(const l in n){const s=n[l];for(const i in s)if((o=s[i])!=null&&o.includes(e))return s[i]=s[i].filter(a=>e!==a),r}return r}})},nt={listStore:P,bookmarks:We,checkedBookmarks:Re,addToList:Ze,deleteFromList:Ke};export{nt as L,Ie as T,ot as U,xe as g,Pe as n,Me as p,ze as s};
