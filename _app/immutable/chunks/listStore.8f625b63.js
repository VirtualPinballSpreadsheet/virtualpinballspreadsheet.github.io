import{s as S,f as k,g as b,h as v,d as m,j as h,i as $,$ as j,l as T,a as M,m as O,c as R,T as E,G as F,n as Z}from"./scheduler.a453f4b8.js";import{S as q,i as z,a as _,g as N,c as Q,t as d,b as C,d as V,m as y,e as A}from"./index.fa05b556.js";import{e as L}from"./each.013e569e.js";import{t as x,u as H,v as J,w as K,x as W,i as X,F as Y}from"./index.browser.6ce462fc.js";import{T as I}from"./modeMapping.440934bb.js";import{b as tt,c as et,d as ot}from"./index.c16d8701.js";import{d as at}from"./index.6e379fdf.js";import{l as B}from"./ProgressBar.svelte_svelte_type_style_lang.c6c4a621.js";import{D as st}from"./DbStore.481d56c5.js";const nt=o=>o.url?o.url.includes("vpuniverse")?{tooltip:"VPUniverse",class:"variant-ghost-tertiary",icon:H,title:"VPU",...o}:o.url.includes("vpforums")?{tooltip:"VP Forums",class:"variant-ghost-warning",icon:J,title:"VPF",...o}:o.url.includes("drive.google")?{tooltip:"Google Drive",class:"variant-ghost-surface",icon:tt,title:"GDrive",...o}:o.url.includes("facebook")?{tooltip:"Facebook",class:"variant-ghost-tertiary",icon:et,title:"Facebook",...o}:o.url.includes("mega")?{tooltip:"Mega",class:"variant-ghost-primary",icon:K,title:"Mega",...o}:o.url.includes("dropbox")?{tooltip:"Dropbox",class:"variant-ghost-secondary",icon:ot,title:"Dropbox",...o}:o.url.includes("zen")?{tooltip:"Zen Pinball",class:"variant-ghost-surface",icon:W,title:"Zen",...o}:{tooltip:"External",class:"variant-ghost-success",icon:X,title:"Ext",...o}:{tooltip:"???",class:"variant-soft",icon:x,title:"???",...o};function P(o,t,n){const a=o.slice();return a[2]=t[n],a}function rt(o){let t,n,a,e=o[2].title+"",l,s,i,r,f;return n=new Y({props:{icon:o[2].icon}}),{c(){t=k("a"),C(n.$$.fragment),a=k("span"),l=T(e),r=M(),this.h()},l(c){t=b(c,"A",{href:!0,target:!0,class:!0});var u=v(t);V(n.$$.fragment,u),a=b(u,"SPAN",{});var p=v(a);l=O(p,e),p.forEach(m),u.forEach(m),r=R(c),this.h()},h(){h(t,"href",s=o[2].broken?"":o[2].url),h(t,"target","_blank"),h(t,"class",i="chip "+o[2].class),E(t,"opacity-20",o[2].broken)},m(c,u){$(c,t,u),y(n,t,null),F(t,a),F(a,l),$(c,r,u),f=!0},p(c,u){const p={};u&1&&(p.icon=c[2].icon),n.$set(p),(!f||u&1)&&e!==(e=c[2].title+"")&&Z(l,e),(!f||u&1&&s!==(s=c[2].broken?"":c[2].url))&&h(t,"href",s),(!f||u&1&&i!==(i="chip "+c[2].class))&&h(t,"class",i),(!f||u&1)&&E(t,"opacity-20",c[2].broken)},i(c){f||(_(n.$$.fragment,c),f=!0)},o(c){d(n.$$.fragment,c),f=!1},d(c){c&&(m(t),m(r)),A(n)}}}function U(o){let t,n;return t=new I({props:{content:o[2].broken?"This link is broken and needs to be updated. If you are aware of a working upload, please contact us!":o[2].tooltip,$$slots:{default:[rt]},$$scope:{ctx:o}}}),{c(){C(t.$$.fragment)},l(a){V(t.$$.fragment,a)},m(a,e){y(t,a,e),n=!0},p(a,e){const l={};e&1&&(l.content=a[2].broken?"This link is broken and needs to be updated. If you are aware of a working upload, please contact us!":a[2].tooltip),e&33&&(l.$$scope={dirty:e,ctx:a}),t.$set(l)},i(a){n||(_(t.$$.fragment,a),n=!0)},o(a){d(t.$$.fragment,a),n=!1},d(a){A(t,a)}}}function it(o){let t,n,a=L(o[0]),e=[];for(let s=0;s<a.length;s+=1)e[s]=U(P(o,a,s));const l=s=>d(e[s],1,1,()=>{e[s]=null});return{c(){t=k("div");for(let s=0;s<e.length;s+=1)e[s].c();this.h()},l(s){t=b(s,"DIV",{class:!0});var i=v(t);for(let r=0;r<e.length;r+=1)e[r].l(i);i.forEach(m),this.h()},h(){h(t,"class","flex gap-1")},m(s,i){$(s,t,i);for(let r=0;r<e.length;r+=1)e[r]&&e[r].m(t,null);n=!0},p(s,[i]){if(i&1){a=L(s[0]);let r;for(r=0;r<a.length;r+=1){const f=P(s,a,r);e[r]?(e[r].p(f,i),_(e[r],1)):(e[r]=U(f),e[r].c(),_(e[r],1),e[r].m(t,null))}for(N(),r=a.length;r<e.length;r+=1)l(r);Q()}},i(s){if(!n){for(let i=0;i<a.length;i+=1)_(e[i]);n=!0}},o(s){e=e.filter(Boolean);for(let i=0;i<e.length;i+=1)d(e[i]);n=!1},d(s){s&&m(t),j(e,s)}}}function lt(o,t,n){let a,{urls:e=[]}=t;return o.$$set=l=>{"urls"in l&&n(1,e=l.urls)},o.$$.update=()=>{o.$$.dirty&2&&n(0,a=e.map(l=>nt(l)).filter(l=>!!l))},[a,e]}class Dt extends q{constructor(t){super(),z(this,t,lt,it,S,{urls:1})}}const g=B("lists",{}),ct=B("ckechedBookmarks",[]),ft=at([g,st.dbStore],([o,t])=>{const n=o.bookmarks||[],a=[];return Object.entries(n).forEach(([e,l])=>{var r;const s=(r=t[e])==null?void 0:r.name;if(!s)return;const i={name:s,id:e,files:{}};Object.entries(l).sort((f,c)=>f[0]<c[0]?-1:1).forEach(([f,c])=>{const u=c.map(p=>{var w,D;return(D=(w=t[e])==null?void 0:w[f])==null?void 0:D.find(G=>G.id===p)});i.files[f]=u}),a.push(i)}),a}),ut=(o,t,n,a)=>{g.update(e=>{var s,i;e[o]||(e[o]={});const l=e[o];return l[t]||(l[t]={}),l[t][n]||(l[t][n]=[]),(s=l[t][n])!=null&&s.includes(a)||(i=l[t][n])==null||i.push(a),e})},pt=(o,t)=>{g.update(n=>{var e;const a=n[o];if(a){if(a[t])return delete a[t],n;for(const l in a){const s=a[l];for(const i in s)if((e=s[i])!=null&&e.includes(t))return s[i]=s[i].filter(r=>t!==r),n}return n}})},Et={listStore:g,bookmarks:ft,checkedBookmarks:ct,addToList:ut,deleteFromList:pt};export{Et as L,Dt as U,nt as g};
