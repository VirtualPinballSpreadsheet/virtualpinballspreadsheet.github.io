import{s as j,x as q,f as v,a as L,l as B,g as b,h as k,d as m,c as V,m as G,j as _,i as D,G as $,Q as H,y as I,z as N,A as J,n as S,$ as K,T as P}from"./scheduler.c1c84dbf.js";import{S as z,i as T,a as E,t as w,g as W,c as X,b as M,d as O,m as Q,e as R}from"./index.64b0efba.js";import{t as Y,v as x,w as ee,x as te,y as oe,j as ae,e as U,F as se}from"./index.08256667.js";import{p as re}from"./popup.4f294dca.js";import{l as Z}from"./ProgressBar.svelte_svelte_type_style_lang.ec37df6e.js";import{n as ne}from"./index.browser.7e542916.js";import{b as ie,c as le,d as ce}from"./index.c16d8701.js";import{d as fe}from"./index.eb17cf1d.js";import{D as ue}from"./DbStore.7f9c8448.js";function pe(a){let e,n,o,t,l,r,i,s,p,c;const d=a[4].default,f=q(d,a,a[3],null);return{c(){e=v("div"),f&&f.c(),n=L(),o=v("div"),t=v("p"),l=B(a[0]),r=L(),i=v("div"),this.h()},l(u){e=b(u,"DIV",{});var h=k(e);f&&f.l(h),h.forEach(m),n=V(u),o=b(u,"DIV",{class:!0,"data-popup":!0});var g=k(o);t=b(g,"P",{});var y=k(t);l=G(y,a[0]),y.forEach(m),r=V(g),i=b(g,"DIV",{class:!0}),k(i).forEach(m),g.forEach(m),this.h()},h(){_(i,"class","arrow variant-filled-surface border-primary-500 border-r border-b"),_(o,"class","card px-2 py-1 variant-filled-surface z-50 border-primary-500 border shadow-md"),_(o,"data-popup",a[1])},m(u,h){D(u,e,h),f&&f.m(e,null),D(u,n,h),D(u,o,h),$(o,t),$(t,l),$(o,r),$(o,i),s=!0,p||(c=H(re.call(null,e,a[2])),p=!0)},p(u,[h]){f&&f.p&&(!s||h&8)&&I(f,d,u,u[3],s?J(d,u[3],h,null):N(u[3]),null),(!s||h&1)&&S(l,u[0])},i(u){s||(E(f,u),s=!0)},o(u){w(f,u),s=!1},d(u){u&&(m(e),m(n),m(o)),f&&f.d(u),p=!1,c()}}}function de(a,e,n){let{$$slots:o={},$$scope:t}=e,{content:l=""}=e;const r=ne(10),i={event:"hover",target:r,placement:"top"};return a.$$set=s=>{"content"in s&&n(0,l=s.content),"$$scope"in s&&n(3,t=s.$$scope)},[l,r,i,t,o]}class he extends z{constructor(e){super(),T(this,e,de,pe,j,{content:0})}}const me=a=>a.url?a.url.includes("vpuniverse")?{tooltip:"VPUniverse",class:"variant-ghost-tertiary",icon:x,title:"VPU",...a}:a.url.includes("vpforums")?{tooltip:"VP Forums",class:"variant-ghost-warning",icon:ee,title:"VPF",...a}:a.url.includes("drive.google")?{tooltip:"Google Drive",class:"variant-ghost-surface",icon:ie,title:"GDrive",...a}:a.url.includes("facebook")?{tooltip:"Facebook",class:"variant-ghost-tertiary",icon:le,title:"Facebook",...a}:a.url.includes("mega")?{tooltip:"Mega",class:"variant-ghost-primary",icon:te,title:"Mega",...a}:a.url.includes("dropbox")?{tooltip:"Dropbox",class:"variant-ghost-secondary",icon:ce,title:"Dropbox",...a}:a.url.includes("zen")?{tooltip:"Zen Pinball",class:"variant-ghost-surface",icon:oe,title:"Zen",...a}:{tooltip:"External",class:"variant-ghost-success",icon:ae,title:"Ext",...a}:{tooltip:"???",class:"variant-soft",icon:Y,title:"???",...a};function A(a,e,n){const o=a.slice();return o[2]=e[n],o}function _e(a){let e,n,o,t=a[2].title+"",l,r,i,s,p;return n=new se({props:{icon:a[2].icon}}),{c(){e=v("a"),M(n.$$.fragment),o=v("span"),l=B(t),s=L(),this.h()},l(c){e=b(c,"A",{href:!0,target:!0,class:!0});var d=k(e);O(n.$$.fragment,d),o=b(d,"SPAN",{});var f=k(o);l=G(f,t),f.forEach(m),d.forEach(m),s=V(c),this.h()},h(){_(e,"href",r=a[2].broken?"":a[2].url),_(e,"target","_blank"),_(e,"class",i="chip "+a[2].class),P(e,"opacity-20",a[2].broken)},m(c,d){D(c,e,d),Q(n,e,null),$(e,o),$(o,l),D(c,s,d),p=!0},p(c,d){const f={};d&1&&(f.icon=c[2].icon),n.$set(f),(!p||d&1)&&t!==(t=c[2].title+"")&&S(l,t),(!p||d&1&&r!==(r=c[2].broken?"":c[2].url))&&_(e,"href",r),(!p||d&1&&i!==(i="chip "+c[2].class))&&_(e,"class",i),(!p||d&1)&&P(e,"opacity-20",c[2].broken)},i(c){p||(E(n.$$.fragment,c),p=!0)},o(c){w(n.$$.fragment,c),p=!1},d(c){c&&(m(e),m(s)),R(n)}}}function C(a){let e,n;return e=new he({props:{content:a[2].broken?"This link is broken and needs to be updated. If you are aware of a working upload, please contact us!":a[2].tooltip,$$slots:{default:[_e]},$$scope:{ctx:a}}}),{c(){M(e.$$.fragment)},l(o){O(e.$$.fragment,o)},m(o,t){Q(e,o,t),n=!0},p(o,t){const l={};t&1&&(l.content=o[2].broken?"This link is broken and needs to be updated. If you are aware of a working upload, please contact us!":o[2].tooltip),t&33&&(l.$$scope={dirty:t,ctx:o}),e.$set(l)},i(o){n||(E(e.$$.fragment,o),n=!0)},o(o){w(e.$$.fragment,o),n=!1},d(o){R(e,o)}}}function ge(a){let e,n,o=U(a[0]),t=[];for(let r=0;r<o.length;r+=1)t[r]=C(A(a,o,r));const l=r=>w(t[r],1,1,()=>{t[r]=null});return{c(){e=v("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=b(r,"DIV",{class:!0});var i=k(e);for(let s=0;s<t.length;s+=1)t[s].l(i);i.forEach(m),this.h()},h(){_(e,"class","flex gap-1")},m(r,i){D(r,e,i);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null);n=!0},p(r,[i]){if(i&1){o=U(r[0]);let s;for(s=0;s<o.length;s+=1){const p=A(r,o,s);t[s]?(t[s].p(p,i),E(t[s],1)):(t[s]=C(p),t[s].c(),E(t[s],1),t[s].m(e,null))}for(W(),s=o.length;s<t.length;s+=1)l(s);X()}},i(r){if(!n){for(let i=0;i<o.length;i+=1)E(t[i]);n=!0}},o(r){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)w(t[i]);n=!1},d(r){r&&m(e),K(t,r)}}}function ve(a,e,n){let o,{urls:t=[]}=e;return a.$$set=l=>{"urls"in l&&n(1,t=l.urls)},a.$$.update=()=>{a.$$.dirty&2&&n(0,o=t.map(l=>me(l)).filter(l=>!!l))},[o,t]}class Ce extends z{constructor(e){super(),T(this,e,ve,ge,j,{urls:1})}}const F=Z("lists",{}),be=Z("ckechedBookmarks",[]),ke=fe([F,ue.dbStore],([a,e])=>{const n=a.bookmarks||[],o=[];return Object.entries(n).forEach(([t,l])=>{var s;const r=(s=e[t])==null?void 0:s.name;if(!r)return;const i={name:r,id:t,files:{}};Object.entries(l).sort((p,c)=>p[0]<c[0]?-1:1).forEach(([p,c])=>{const d=c.map(f=>{var h,g;return(g=(h=e[t])==null?void 0:h[p])==null?void 0:g.find(y=>y.id===f)});i.files[p]=d}),o.push(i)}),o}),$e=(a,e,n,o)=>{F.update(t=>{var r,i;t[a]||(t[a]={});const l=t[a];return l[e]||(l[e]={}),l[e][n]||(l[e][n]=[]),(r=l[e][n])!=null&&r.includes(o)||(i=l[e][n])==null||i.push(o),t})},De=(a,e)=>{F.update(n=>{var t;const o=n[a];if(o){if(o[e])return delete o[e],n;for(const l in o){const r=o[l];for(const i in r)if((t=r[i])!=null&&t.includes(e))return r[i]=r[i].filter(s=>e!==s),n}return n}})},je={listStore:F,bookmarks:ke,checkedBookmarks:be,addToList:$e,deleteFromList:De};export{je as L,he as T,Ce as U,me as g};
