import{s as Se,x as De,f as p,g as D,h as B,d as m,j as c,i as K,y as Ee,z as Le,A as Ae,v as F,C as me,D as be,a as q,c as M,G as h,H as j,I as ye,J as Fe,w as Q,N as $,p as Te,a9 as Qe,W as x,e as ve,B as Pe,l as X,Z as Ie,m as Y,n as ge,$ as Xe,a6 as Ye}from"../chunks/scheduler.a453f4b8.js";import{S as Be,i as Ve,a as V,t as O,g as ke,c as pe,b as Je,d as Ke,m as We,e as Ze,p as xe}from"../chunks/index.fa05b556.js";import{e as Re}from"../chunks/each.013e569e.js";import{U as we,E as $e}from"../chunks/UserStore.d5e06a30.js";import{S as el}from"../chunks/SearchStore.b847ecf1.js";import{g as ll}from"../chunks/stores.5d8c8e31.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.c6c4a621.js";function tl(a){let e,t,s;const o=a[12].default,i=De(o,a,a[11],null);return{c(){e=p("div"),i&&i.c(),this.h()},l(l){e=D(l,"DIV",{class:!0,role:!0,"aria-labelledby":!0,"data-testid":!0});var n=B(e);i&&i.l(n),n.forEach(m),this.h()},h(){c(e,"class",t="listbox "+a[1]),c(e,"role","listbox"),c(e,"aria-labelledby",a[0]),c(e,"data-testid","listbox")},m(l,n){K(l,e,n),i&&i.m(e,null),s=!0},p(l,[n]){i&&i.p&&(!s||n&2048)&&Ee(i,o,l,l[11],s?Ae(o,l[11],n,null):Le(l[11]),null),(!s||n&2&&t!==(t="listbox "+l[1]))&&c(e,"class",t),(!s||n&1)&&c(e,"aria-labelledby",l[0])},i(l){s||(V(i,l),s=!0)},o(l){O(i,l),s=!1},d(l){l&&m(e),i&&i.d(l)}}}const al="";function il(a,e,t){let s,{$$slots:o={},$$scope:i}=e,{multiple:l=!1}=e,{spacing:n="space-y-1"}=e,{rounded:r="rounded-token"}=e,{active:E="variant-filled"}=e,{hover:L="hover:variant-soft"}=e,{padding:A="px-4 py-2"}=e,{regionLead:y=""}=e,{regionDefault:b=""}=e,{regionTrail:T=""}=e,{labelledby:C=""}=e;return F("multiple",l),F("rounded",r),F("active",E),F("hover",L),F("padding",A),F("regionLead",y),F("regionDefault",b),F("regionTrail",T),a.$$set=f=>{t(13,e=me(me({},e),be(f))),"multiple"in f&&t(2,l=f.multiple),"spacing"in f&&t(3,n=f.spacing),"rounded"in f&&t(4,r=f.rounded),"active"in f&&t(5,E=f.active),"hover"in f&&t(6,L=f.hover),"padding"in f&&t(7,A=f.padding),"regionLead"in f&&t(8,y=f.regionLead),"regionDefault"in f&&t(9,b=f.regionDefault),"regionTrail"in f&&t(10,T=f.regionTrail),"labelledby"in f&&t(0,C=f.labelledby),"$$scope"in f&&t(11,i=f.$$scope)},a.$$.update=()=>{t(1,s=`${al} ${n} ${r} ${e.class??""}`)},e=be(e),[C,s,l,n,r,E,L,A,y,b,T,i,o]}class nl extends Be{constructor(e){super(),Ve(this,e,il,tl,Se,{multiple:2,spacing:3,rounded:4,active:5,hover:6,padding:7,regionLead:8,regionDefault:9,regionTrail:10,labelledby:0})}}const sl=a=>({}),Oe=a=>({}),ol=a=>({}),Ue=a=>({});function ul(a){let e,t=!1,s,o,i;return s=Qe(a[35][0]),{c(){e=p("input"),this.h()},l(l){e=D(l,"INPUT",{type:!0,name:!0,tabindex:!0}),this.h()},h(){c(e,"type","radio"),c(e,"name",a[1]),e.__value=a[2],x(e,e.__value),c(e,"tabindex","-1"),s.p(e)},m(l,n){K(l,e,n),a[33](e),e.checked=e.__value===a[0],o||(i=[j(e,"change",a[34]),j(e,"click",a[29]),j(e,"change",a[30])],o=!0)},p(l,n){n[0]&2&&c(e,"name",l[1]),n[0]&4&&(e.__value=l[2],x(e,e.__value),t=!0),(t||n[0]&1)&&(e.checked=e.__value===l[0])},d(l){l&&m(e),a[33](null),s.r(),o=!1,ye(i)}}}function rl(a){let e,t,s;return{c(){e=p("input"),this.h()},l(o){e=D(o,"INPUT",{type:!0,name:!0,tabindex:!0}),this.h()},h(){c(e,"type","checkbox"),c(e,"name",a[1]),e.__value=a[2],x(e,e.__value),c(e,"tabindex","-1")},m(o,i){K(o,e,i),a[31](e),e.checked=a[4],t||(s=[j(e,"change",a[32]),j(e,"click",a[27]),j(e,"change",a[28])],t=!0)},p(o,i){i[0]&2&&c(e,"name",o[1]),i[0]&4&&(e.__value=o[2],x(e,e.__value)),i[0]&16&&(e.checked=o[4])},d(o){o&&m(e),a[31](null),t=!1,ye(s)}}}function je(a){let e,t,s;const o=a[23].lead,i=De(o,a,a[22],Ue);return{c(){e=p("div"),i&&i.c(),this.h()},l(l){e=D(l,"DIV",{class:!0});var n=B(e);i&&i.l(n),n.forEach(m),this.h()},h(){c(e,"class",t="listbox-label-lead "+a[9])},m(l,n){K(l,e,n),i&&i.m(e,null),s=!0},p(l,n){i&&i.p&&(!s||n[0]&4194304)&&Ee(i,o,l,l[22],s?Ae(o,l[22],n,ol):Le(l[22]),Ue),(!s||n[0]&512&&t!==(t="listbox-label-lead "+l[9]))&&c(e,"class",t)},i(l){s||(V(i,l),s=!0)},o(l){O(i,l),s=!1},d(l){l&&m(e),i&&i.d(l)}}}function qe(a){let e,t,s;const o=a[23].trail,i=De(o,a,a[22],Oe);return{c(){e=p("div"),i&&i.c(),this.h()},l(l){e=D(l,"DIV",{class:!0});var n=B(e);i&&i.l(n),n.forEach(m),this.h()},h(){c(e,"class",t="listbox-label-trail "+a[7])},m(l,n){K(l,e,n),i&&i.m(e,null),s=!0},p(l,n){i&&i.p&&(!s||n[0]&4194304)&&Ee(i,o,l,l[22],s?Ae(o,l[22],n,sl):Le(l[22]),Oe),(!s||n[0]&128&&t!==(t="listbox-label-trail "+l[7]))&&c(e,"class",t)},i(l){s||(V(i,l),s=!0)},o(l){O(i,l),s=!1},d(l){l&&m(e),i&&i.d(l)}}}function fl(a){let e,t,s,o,i,l,n,r,E,L,A,y,b,T;function C(d,v){return d[3]?rl:ul}let f=C(a),I=f(a),_=a[13].lead&&je(a);const N=a[23].default,k=De(N,a,a[22],null);let g=a[13].trail&&qe(a);return{c(){e=p("label"),t=p("div"),s=p("div"),I.c(),o=q(),i=p("div"),_&&_.c(),l=q(),n=p("div"),k&&k.c(),E=q(),g&&g.c(),this.h()},l(d){e=D(d,"LABEL",{});var v=B(e);t=D(v,"DIV",{class:!0,"data-testid":!0,role:!0,"aria-selected":!0,tabindex:!0});var R=B(t);s=D(R,"DIV",{class:!0});var U=B(s);I.l(U),U.forEach(m),o=M(R),i=D(R,"DIV",{class:!0});var P=B(i);_&&_.l(P),l=M(P),n=D(P,"DIV",{class:!0});var G=B(n);k&&k.l(G),G.forEach(m),E=M(P),g&&g.l(P),P.forEach(m),R.forEach(m),v.forEach(m),this.h()},h(){c(s,"class","h-0 w-0 overflow-hidden"),c(n,"class",r="listbox-label-content "+a[8]),c(i,"class",L="listbox-label "+a[10]),c(t,"class",A="listbox-item "+a[11]),c(t,"data-testid","listbox-item"),c(t,"role","option"),c(t,"aria-selected",a[5]),c(t,"tabindex","0")},m(d,v){K(d,e,v),h(e,t),h(t,s),I.m(s,null),h(t,o),h(t,i),_&&_.m(i,null),h(i,l),h(i,n),k&&k.m(n,null),h(i,E),g&&g.m(i,null),y=!0,b||(T=[j(t,"keydown",a[12]),j(t,"keydown",a[24]),j(t,"keyup",a[25]),j(t,"keypress",a[26])],b=!0)},p(d,v){f===(f=C(d))&&I?I.p(d,v):(I.d(1),I=f(d),I&&(I.c(),I.m(s,null))),d[13].lead?_?(_.p(d,v),v[0]&8192&&V(_,1)):(_=je(d),_.c(),V(_,1),_.m(i,l)):_&&(ke(),O(_,1,1,()=>{_=null}),pe()),k&&k.p&&(!y||v[0]&4194304)&&Ee(k,N,d,d[22],y?Ae(N,d[22],v,null):Le(d[22]),null),(!y||v[0]&256&&r!==(r="listbox-label-content "+d[8]))&&c(n,"class",r),d[13].trail?g?(g.p(d,v),v[0]&8192&&V(g,1)):(g=qe(d),g.c(),V(g,1),g.m(i,null)):g&&(ke(),O(g,1,1,()=>{g=null}),pe()),(!y||v[0]&1024&&L!==(L="listbox-label "+d[10]))&&c(i,"class",L),(!y||v[0]&2048&&A!==(A="listbox-item "+d[11]))&&c(t,"class",A),(!y||v[0]&32)&&c(t,"aria-selected",d[5])},i(d){y||(V(_),V(k,d),V(g),y=!0)},o(d){O(_),O(k,d),O(g),y=!1},d(d){d&&m(e),I.d(),_&&_.d(),k&&k.d(d),g&&g.d(),b=!1,ye(T)}}}const cl="cursor-pointer -outline-offset-[3px]",dl="flex items-center space-x-4",hl="",_l="flex-1",gl="";function Ce(a,e){if(a===e)return!0;if(!(a instanceof Object)||!(e instanceof Object))return!1;const t=Object.keys(a),s=Object.keys(e);if(t.length!==s.length)return!1;for(const o of t){const i=a[o],l=e[o];if(!Ce(i,l))return!1}return!0}function ml(a,e,t){let s,o,i,l,n,r,E,{$$slots:L={},$$scope:A}=e;const y=Fe(L);let{group:b}=e,{name:T}=e,{value:C}=e,{multiple:f=Q("multiple")}=e,{rounded:I=Q("rounded")}=e,{active:_=Q("active")}=e,{hover:N=Q("hover")}=e,{padding:k=Q("padding")}=e,{regionLead:g=Q("regionLead")}=e,{regionDefault:d=Q("regionDefault")}=e,{regionTrail:v=Q("regionTrail")}=e,R,U;function P(u){t(4,R=u.indexOf(C)>=0)}function G(u){const S=b.indexOf(C);u?S<0&&(b.push(C),t(0,b)):S>=0&&(b.splice(S,1),t(0,b))}function ee(u){["Enter","Space"].includes(u.code)&&(u.preventDefault(),U.click())}const te=[[]];function z(u){$.call(this,a,u)}function Z(u){$.call(this,a,u)}function se(u){$.call(this,a,u)}function ae(u){$.call(this,a,u)}function H(u){$.call(this,a,u)}function ie(u){$.call(this,a,u)}function J(u){$.call(this,a,u)}function oe(u){Te[u?"unshift":"push"](()=>{U=u,t(6,U)})}function W(){R=this.checked,t(4,R)}function ne(u){Te[u?"unshift":"push"](()=>{U=u,t(6,U)})}function ue(){b=this.__value,t(0,b)}return a.$$set=u=>{t(38,e=me(me({},e),be(u))),"group"in u&&t(0,b=u.group),"name"in u&&t(1,T=u.name),"value"in u&&t(2,C=u.value),"multiple"in u&&t(3,f=u.multiple),"rounded"in u&&t(14,I=u.rounded),"active"in u&&t(15,_=u.active),"hover"in u&&t(16,N=u.hover),"padding"in u&&t(17,k=u.padding),"regionLead"in u&&t(18,g=u.regionLead),"regionDefault"in u&&t(19,d=u.regionDefault),"regionTrail"in u&&t(20,v=u.regionTrail),"$$scope"in u&&t(22,A=u.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&9&&f&&P(b),a.$$.dirty[0]&24&&f&&G(R),a.$$.dirty[0]&13&&t(5,s=f?b.some(u=>Ce(C,u)):Ce(b,C)),a.$$.dirty[0]&98336&&t(21,o=s?_:N),t(11,i=`${cl} ${I} ${k} ${o} ${e.class??""}`),a.$$.dirty[0]&262144&&t(9,n=`${hl} ${g}`),a.$$.dirty[0]&524288&&t(8,r=`${_l} ${d}`),a.$$.dirty[0]&1048576&&t(7,E=`${gl} ${v}`)},t(10,l=`${dl}`),e=be(e),[b,T,C,f,R,s,U,E,r,n,l,i,ee,y,I,_,N,k,g,d,v,o,A,L,z,Z,se,ae,H,ie,J,oe,W,ne,ue,te]}class bl extends Be{constructor(e){super(),Ve(this,e,ml,fl,Se,{group:0,name:1,value:2,multiple:3,rounded:14,active:15,hover:16,padding:17,regionLead:18,regionDefault:19,regionTrail:20},null,[-1,-1])}}const Me=(a,e)=>{if(!a||!e)return 99;let t=0;e.includes(a)&&(t-=20),e===a&&(t-=60);for(var s=a.length,o=e.length,i=new Array,l=0;l<=s;l++)i[l]=new Array,i[l][0]=l;for(var n=0;n<=o;n++)i[0][n]=n;for(var r=0,n=1;n<=o;n++)for(var l=1;l<=s;l++)r=a.charAt(l-1)==e.charAt(n-1)?0:1,i[l][n]=Math.min(i[l][n-1]+1,Math.min(i[l-1][n]+1,i[l-1][n-1]+r)),l>1&&n>1&&a.charAt(l-1)==e.charAt(n-2)&&a.charAt(l-2)==e.charAt(n-1)&&(i[l][n]=Math.min(i[l][n],i[l-2][n-2]+r));return i[s][o]+t};function Ge(a,e,t){const s=a.slice();return s[7]=e[t],s}function ze(a){let e,t,s="Align authors",o,i,l,n,r,E,L=a[3].length+"",A,y,b,T,C,f,I,_,N,k,g,d=a[2].length+"",v,R,U,P,G=a[2].join(", ")+"",ee,te,z,Z,se="Replace with",ae,H,ie,J,oe="Replace authors",W,ne,ue;return f=new nl({props:{multiple:!0,class:"flex-1 p-2 border border-primary-400 max-h-[30rem] overflow-y-scroll",$$slots:{default:[kl]},$$scope:{ctx:a}}}),{c(){e=p("div"),t=p("div"),t.textContent=s,o=q(),i=p("div"),l=p("div"),n=p("label"),r=p("span"),E=X("Search authors ("),A=X(L),y=X(")"),b=q(),T=p("input"),C=q(),Je(f.$$.fragment),I=q(),_=p("div"),N=p("label"),k=p("span"),g=X("Selected authors ("),v=X(d),R=X(")"),U=q(),P=p("div"),ee=X(G),te=q(),z=p("label"),Z=p("span"),Z.textContent=se,ae=q(),H=p("input"),ie=q(),J=p("button"),J.textContent=oe,this.h()},l(u){e=D(u,"DIV",{class:!0});var S=B(e);t=D(S,"DIV",{class:!0,"data-svelte-h":!0}),Ie(t)!=="svelte-12oqp44"&&(t.textContent=s),o=M(S),i=D(S,"DIV",{class:!0});var w=B(i);l=D(w,"DIV",{class:!0});var re=B(l);n=D(re,"LABEL",{class:!0});var fe=B(n);r=D(fe,"SPAN",{});var ce=B(r);E=Y(ce,"Search authors ("),A=Y(ce,L),y=Y(ce,")"),ce.forEach(m),b=M(fe),T=D(fe,"INPUT",{class:!0}),fe.forEach(m),C=M(re),Ke(f.$$.fragment,re),re.forEach(m),I=M(w),_=D(w,"DIV",{class:!0});var le=B(_);N=D(le,"LABEL",{class:!0});var de=B(N);k=D(de,"SPAN",{});var he=B(k);g=Y(he,"Selected authors ("),v=Y(he,d),R=Y(he,")"),he.forEach(m),U=M(de),P=D(de,"DIV",{class:!0});var Ne=B(P);ee=Y(Ne,G),Ne.forEach(m),de.forEach(m),te=M(le),z=D(le,"LABEL",{class:!0});var _e=B(z);Z=D(_e,"SPAN",{"data-svelte-h":!0}),Ie(Z)!=="svelte-16993am"&&(Z.textContent=se),ae=M(_e),H=D(_e,"INPUT",{class:!0}),_e.forEach(m),ie=M(le),J=D(le,"BUTTON",{class:!0,"data-svelte-h":!0}),Ie(J)!=="svelte-q8n08f"&&(J.textContent=oe),le.forEach(m),w.forEach(m),S.forEach(m),this.h()},h(){c(t,"class","font-bold text-3xl"),c(T,"class","input"),c(n,"class","label"),c(l,"class","flex flex-col gap-4 flex-1"),c(P,"class","p-2 border border-secondary-400 rounded-md min-h-[2.6rem]"),c(N,"class","label"),c(H,"class","input"),c(z,"class","label"),c(J,"class","btn variant-filled-primary"),c(_,"class","flex flex-col flex-1 gap-4"),c(i,"class","flex gap-4 w-full"),c(e,"class","p-6 flex flex-col gap-4 w-full")},m(u,S){K(u,e,S),h(e,t),h(e,o),h(e,i),h(i,l),h(l,n),h(n,r),h(r,E),h(r,A),h(r,y),h(n,b),h(n,T),x(T,a[0]),h(l,C),We(f,l,null),h(i,I),h(i,_),h(_,N),h(N,k),h(k,g),h(k,v),h(k,R),h(N,U),h(N,P),h(P,ee),h(_,te),h(_,z),h(z,Z),h(z,ae),h(z,H),x(H,a[1]),h(_,ie),h(_,J),W=!0,ne||(ue=[j(T,"input",a[9]),j(H,"input",a[11]),j(J,"click",a[6])],ne=!0)},p(u,S){(!W||S&8)&&L!==(L=u[3].length+"")&&ge(A,L),S&1&&T.value!==u[0]&&x(T,u[0]);const w={};S&32780&&(w.$$scope={dirty:S,ctx:u}),f.$set(w),(!W||S&4)&&d!==(d=u[2].length+"")&&ge(v,d),(!W||S&4)&&G!==(G=u[2].join(", ")+"")&&ge(ee,G),S&2&&H.value!==u[1]&&x(H,u[1])},i(u){W||(V(f.$$.fragment,u),W=!0)},o(u){O(f.$$.fragment,u),W=!1},d(u){u&&m(e),Ze(f),ne=!1,ye(ue)}}}function vl(a){let e=a[7]+"",t;return{c(){t=X(e)},l(s){t=Y(s,e)},m(s,o){K(s,t,o)},p(s,o){o&8&&e!==(e=s[7]+"")&&ge(t,e)},d(s){s&&m(t)}}}function He(a){let e,t,s;function o(l){a[10](l)}let i={name:"medium",value:a[7],$$slots:{default:[vl]},$$scope:{ctx:a}};return a[2]!==void 0&&(i.group=a[2]),e=new bl({props:i}),Te.push(()=>xe(e,"group",o)),{c(){Je(e.$$.fragment)},l(l){Ke(e.$$.fragment,l)},m(l,n){We(e,l,n),s=!0},p(l,n){const r={};n&8&&(r.value=l[7]),n&32776&&(r.$$scope={dirty:n,ctx:l}),!t&&n&4&&(t=!0,r.group=l[2],Ye(()=>t=!1)),e.$set(r)},i(l){s||(V(e.$$.fragment,l),s=!0)},o(l){O(e.$$.fragment,l),s=!1},d(l){Ze(e,l)}}}function kl(a){let e,t,s=Re(a[3]),o=[];for(let l=0;l<s.length;l+=1)o[l]=He(Ge(a,s,l));const i=l=>O(o[l],1,1,()=>{o[l]=null});return{c(){for(let l=0;l<o.length;l+=1)o[l].c();e=ve()},l(l){for(let n=0;n<o.length;n+=1)o[n].l(l);e=ve()},m(l,n){for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(l,n);K(l,e,n),t=!0},p(l,n){if(n&12){s=Re(l[3]);let r;for(r=0;r<s.length;r+=1){const E=Ge(l,s,r);o[r]?(o[r].p(E,n),V(o[r],1)):(o[r]=He(E),o[r].c(),V(o[r],1),o[r].m(e.parentNode,e))}for(ke(),r=s.length;r<o.length;r+=1)i(r);pe()}},i(l){if(!t){for(let n=0;n<s.length;n+=1)V(o[n]);t=!0}},o(l){o=o.filter(Boolean);for(let n=0;n<o.length;n+=1)O(o[n]);t=!1},d(l){l&&m(e),Xe(o,l)}}}function pl(a){let e,t,s=a[4].admin&&ze(a);return{c(){s&&s.c(),e=ve()},l(o){s&&s.l(o),e=ve()},m(o,i){s&&s.m(o,i),K(o,e,i),t=!0},p(o,[i]){o[4].admin?s?(s.p(o,i),i&16&&V(s,1)):(s=ze(o),s.c(),V(s,1),s.m(e.parentNode,e)):s&&(ke(),O(s,1,1,()=>{s=null}),pe())},i(o){t||(V(s),t=!0)},o(o){O(s),t=!1},d(o){o&&m(e),s&&s.d(o)}}}function Dl(a,e,t){let s,o,i;const l=ll(),{userStore:n}=we;Pe(a,n,f=>t(4,i=f));const{author:r}=el;Pe(a,r,f=>t(8,o=f));let E="",L="",A=[];const y=()=>{$e.alignAuthors(L,A),l.trigger({message:`Aligned authors to ${L}.`}),t(0,E=""),t(1,L=""),t(2,A=[])};function b(){E=this.value,t(0,E)}function T(f){A=f,t(2,A)}function C(){L=this.value,t(1,L)}return a.$$.update=()=>{a.$$.dirty&257&&t(3,s=o.options.map(f=>f.label).sort((f,I)=>Me(E,f.toLowerCase())-Me(E,I.toLowerCase())))},[E,L,A,s,i,n,y,r,o,b,T,C]}class Sl extends Be{constructor(e){super(),Ve(this,e,Dl,pl,Se,{})}}export{Sl as component};
