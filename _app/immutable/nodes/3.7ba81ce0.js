import{s as Q,e as w,i as E,r as F,d as b,Y as re,o as U,Z as se,f as H,g as L,h as D,j as C,k as X,p as ie,a as B,l as R,S as ce,c as V,m as j,z,n as fe,W as x,O as q}from"../chunks/scheduler.db4cf74d.js";import{S as $,i as ee,b as te,d as le,m as ne,a as k,c as O,t as M,e as oe,g as P}from"../chunks/index.aca4b4e1.js";import{e as I,S as ae}from"../chunks/SearchStore.84fedd59.js";import{T as he}from"../chunks/TableCard.deee2952.js";function Y(r){let l;return{c(){l=H("div"),this.h()},l(e){l=L(e,"DIV",{id:!0,style:!0}),D(l).forEach(b),this.h()},h(){C(l,"id","svelte-infinite-scroll"),X(l,"width","0")},m(e,t){E(e,l,t),r[11](l)},p:F,d(e){e&&b(l),r[11](null)}}}function ue(r){let l,e=!r[1]&&!r[0]&&Y(r);return{c(){e&&e.c(),l=w()},l(t){e&&e.l(t),l=w()},m(t,n){e&&e.m(t,n),E(t,l,n)},p(t,[n]){!t[1]&&!t[0]?e?e.p(t,n):(e=Y(t),e.c(),e.m(l.parentNode,l)):e&&(e.d(1),e=null)},i:F,o:F,d(t){t&&b(l),e&&e.d(t)}}}function _e(r,l,e){let{threshold:t=0}=l,{horizontal:n=!1}=l,{elementScroll:h=null}=l,{hasMore:s=!0}=l,{reverse:f=!1}=l,{window:c=!1}=l;const S=re();let m=!1,v,p,y,u;const a=o=>{if(!s)return;const g=o.target;N(g,f,n)<=t?(!m&&s&&(S("loadMore"),e(8,p=g.scrollHeight),e(9,y=g.scrollTop)),e(7,m=!0)):e(7,m=!1)},N=(o,g,_)=>{const d=o.documentElement?o.documentElement:o;return g?_?d.scrollLeft:d.scrollTop:_?d.scrollWidth-d.clientWidth-d.scrollLeft:d.scrollHeight-d.clientHeight-d.scrollTop};U(()=>{c?e(10,u=document):h?e(10,u=h):e(10,u=v.parentNode)}),se(()=>{u&&(u.removeEventListener("scroll",a),u.removeEventListener("resize",a))});function i(o){ie[o?"unshift":"push"](()=>{v=o,e(2,v)})}return r.$$set=o=>{"threshold"in o&&e(3,t=o.threshold),"horizontal"in o&&e(4,n=o.horizontal),"elementScroll"in o&&e(0,h=o.elementScroll),"hasMore"in o&&e(5,s=o.hasMore),"reverse"in o&&e(6,f=o.reverse),"window"in o&&e(1,c=o.window)},r.$$.update=()=>{r.$$.dirty&1088&&u&&(f&&e(10,u.scrollTop=u.scrollHeight,u),u.addEventListener("scroll",a),u.addEventListener("resize",a)),r.$$.dirty&1984&&m&&f&&e(10,u.scrollTop=u.scrollHeight-p+y,u)},[h,c,v,t,n,s,f,m,p,y,u,i]}class me extends ${constructor(l){super(),ee(this,l,_e,ue,Q,{threshold:3,horizontal:4,elementScroll:0,hasMore:5,reverse:6,window:1})}}function Z(r,l,e){const t=r.slice();return t[7]=l[e],t[9]=e,t}function A(r,l,e){const t=r.slice();return t[7]=l[e],t[11]=e,t}function W(r){const l=r.slice(),e=l[0][l[9]*T+l[11]];return l[12]=e,l}function G(r){let l,e;return l=new he({props:{table:r[12],href:"?game="+r[12].game.id+"&table="+r[12].id}}),{c(){te(l.$$.fragment)},l(t){le(l.$$.fragment,t)},m(t,n){ne(l,t,n),e=!0},p(t,n){const h={};n&1&&(h.table=t[12]),n&1&&(h.href="?game="+t[12].game.id+"&table="+t[12].id),l.$set(h)},i(t){e||(k(l.$$.fragment,t),e=!0)},o(t){M(l.$$.fragment,t),e=!1},d(t){oe(l,t)}}}function J(r){let l,e,t=r[0].length>r[9]*T+r[11]&&G(W(r));return{c(){t&&t.c(),l=w()},l(n){t&&t.l(n),l=w()},m(n,h){t&&t.m(n,h),E(n,l,h),e=!0},p(n,h){n[0].length>n[9]*T+n[11]?t?(t.p(W(n),h),h&1&&k(t,1)):(t=G(W(n)),t.c(),k(t,1),t.m(l.parentNode,l)):t&&(P(),M(t,1,1,()=>{t=null}),O())},i(n){e||(k(t),e=!0)},o(n){M(t),e=!1},d(n){n&&b(l),t&&t.d(n)}}}function K(r){let l,e,t=I({length:T}),n=[];for(let s=0;s<t.length;s+=1)n[s]=J(A(r,t,s));const h=s=>M(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();l=w()},l(s){for(let f=0;f<n.length;f+=1)n[f].l(s);l=w()},m(s,f){for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(s,f);E(s,l,f),e=!0},p(s,f){if(f&1){t=I({length:T});let c;for(c=0;c<t.length;c+=1){const S=A(s,t,c);n[c]?(n[c].p(S,f),k(n[c],1)):(n[c]=J(S),n[c].c(),k(n[c],1),n[c].m(l.parentNode,l))}for(P(),c=t.length;c<n.length;c+=1)h(c);O()}},i(s){if(!e){for(let f=0;f<t.length;f+=1)k(n[f]);e=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)M(n[f]);e=!1},d(s){s&&b(l),x(n,s)}}}function ge(r){let l,e,t="Tables",n,h,s=r[0].length+"",f,c,S,m,v,p,y,u=I({length:r[2]}),a=[];for(let i=0;i<u.length;i+=1)a[i]=K(Z(r,u,i));const N=i=>M(a[i],1,1,()=>{a[i]=null});return p=new me({props:{hasMore:r[1],elementScroll:document.getElementById("page"),threshold:100}}),p.$on("loadMore",r[5]),{c(){l=H("div"),e=H("h2"),e.textContent=t,n=B(),h=H("p"),f=R(s),c=R(" results"),S=B(),m=H("div");for(let i=0;i<a.length;i+=1)a[i].c();v=B(),te(p.$$.fragment),this.h()},l(i){l=L(i,"DIV",{class:!0});var o=D(l);e=L(o,"H2",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-v8g7i4"&&(e.textContent=t),n=V(o),h=L(o,"P",{class:!0,style:!0});var g=D(h);f=j(g,s),c=j(g," results"),g.forEach(b),o.forEach(b),S=V(i),m=L(i,"DIV",{class:!0});var _=D(m);for(let d=0;d<a.length;d+=1)a[d].l(_);_.forEach(b),v=V(i),le(p.$$.fragment,i),this.h()},h(){C(e,"class","h2"),C(h,"class","font-bold"),X(h,"line-height","1.6rem"),C(l,"class","p-10 pb-0 flex items-end gap-4"),C(m,"class","grid layout gap-y-20 gap-x-10 p-10 svelte-193p9ri")},m(i,o){E(i,l,o),z(l,e),z(l,n),z(l,h),z(h,f),z(h,c),E(i,S,o),E(i,m,o);for(let g=0;g<a.length;g+=1)a[g]&&a[g].m(m,null);E(i,v,o),ne(p,i,o),y=!0},p(i,[o]){if((!y||o&1)&&s!==(s=i[0].length+"")&&fe(f,s),o&5){u=I({length:i[2]});let _;for(_=0;_<u.length;_+=1){const d=Z(i,u,_);a[_]?(a[_].p(d,o),k(a[_],1)):(a[_]=K(d),a[_].c(),k(a[_],1),a[_].m(m,null))}for(P(),_=u.length;_<a.length;_+=1)N(_);O()}const g={};o&2&&(g.hasMore=i[1]),p.$set(g)},i(i){if(!y){for(let o=0;o<u.length;o+=1)k(a[o]);k(p.$$.fragment,i),y=!0}},o(i){a=a.filter(Boolean);for(let o=0;o<a.length;o+=1)M(a[o]);M(p.$$.fragment,i),y=!1},d(i){i&&(b(l),b(S),b(m),b(v)),x(a,i),oe(p,i)}}}const T=100;function de(r,l,e){let t,n;const{finalResultsStore:h,mode:s}=ae;q(r,h,m=>e(0,n=m)),q(r,s,m=>e(6,t=m));let f=!0,c=2;U(()=>{t!=="tableFiles"&&s.set("tableFiles")});const S=()=>{e(2,c++,c),c*T>n.length&&e(1,f=!1)};return r.$$.update=()=>{r.$$.dirty&1&&(e(2,c=1),e(1,f=!0)),r.$$.dirty&1&&console.log(n)},[n,f,c,h,s,S]}class ve extends ${constructor(l){super(),ee(this,l,de,ge,Q,{})}}export{ve as component};
