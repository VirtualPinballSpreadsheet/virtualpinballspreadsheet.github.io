import{s as We,e as Ge,i as x,d as h,B as ye,o as Ye,p as Oe,f as _,a as E,l as ue,g,h as D,c as T,m as pe,Z as Ze,j as i,R as je,G as n,W as X,H as J,Q as Je,n as Re,a6 as Ce,a7 as me,$ as Xe,I as xe,Y as et}from"../chunks/scheduler.a453f4b8.js";import{S as tt,i as at,a as R,t as Q,c as st,p as Fe,b as ne,d as oe,m as re,e as ie,g as lt}from"../chunks/index.fa05b556.js";import{e as qe}from"../chunks/each.013e569e.js";import{F as Ee,j as nt,K as ot,L as rt}from"../chunks/index.bb3a9776.js";import{T as it}from"../chunks/tournamentStore.a641719d.js";import{g as De}from"../chunks/navigation.6d64248c.js";import{g as ze,p as ut}from"../chunks/getBackglassUrl.fc240526.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.c6c4a621.js";import{A as pt,S as ct}from"../chunks/SlideToggle.96585bf0.js";import{S as dt}from"../chunks/SearchStore.64ee7d1e.js";import{D as ft}from"../chunks/DbStore.6d56cf40.js";const mt=({params:e})=>{const{tindex:l,gindex:s}=e;return{tindex:parseInt(l),gindex:parseInt(s)}},wt=Object.freeze(Object.defineProperty({__proto__:null,load:mt},Symbol.toStringTag,{value:"Module"}));function Me(e,l,s){const a=e.slice();return a[25]=l[s],a[26]=l,a[27]=s,a}function He(e){var Pe;let l,s,a,o,u,f,d,N=e[7]+1+"",U,A,p,r=((Pe=e[1])==null?void 0:Pe.title)+"",S,ee,v,$,k,G,te,y,ae,O,w,se,le,j,C,c,B,ce,_e,z,M,K,Te="Balls",ge,F,he,q,ve,be,ke,$e,W,Ie,Ve;a=new Ee({props:{icon:nt}}),G=new Ee({props:{icon:ot}});function Ke(t){e[19](t)}let we={options:e[5]};e[3]!==void 0&&(we.input=e[3]),w=new pt({props:we}),Oe.push(()=>Fe(w,"input",Ke)),w.$on("selection",e[11]),C=new Ee({props:{icon:rt}});function Qe(t){e[22](t)}let Be={size:"sm",class:"md:pt-6",active:"variant-filled-primary",name:"slide",$$slots:{default:[_t]},$$scope:{ctx:e}};e[2][e[6]].games[e[7]].vpin!==void 0&&(Be.checked=e[2][e[6]].games[e[7]].vpin),q=new ct({props:Be}),Oe.push(()=>Fe(q,"checked",Qe));let Y=qe(e[1].players),b=[];for(let t=0;t<Y.length;t+=1)b[t]=Le(Me(e,Y,t));return{c(){l=_("div"),s=_("button"),ne(a.$$.fragment),o=E(),u=_("div"),f=_("div"),d=ue("Game "),U=ue(N),A=E(),p=_("div"),S=ue(r),ee=E(),v=_("div"),$=_("div"),k=_("button"),ne(G.$$.fragment),te=E(),y=_("input"),ae=E(),O=_("div"),ne(w.$$.fragment),le=E(),j=_("button"),ne(C.$$.fragment),c=E(),B=_("img"),_e=E(),z=_("div"),M=_("div"),K=_("div"),K.textContent=Te,ge=E(),F=_("input"),he=E(),ne(q.$$.fragment),be=E(),ke=_("hr"),$e=E();for(let t=0;t<b.length;t+=1)b[t].c();this.h()},l(t){l=g(t,"DIV",{class:!0});var m=D(l);s=g(m,"BUTTON",{class:!0});var P=D(s);oe(a.$$.fragment,P),P.forEach(h),o=T(m),u=g(m,"DIV",{class:!0});var H=D(u);f=g(H,"DIV",{class:!0});var Z=D(f);d=pe(Z,"Game "),U=pe(Z,N),Z.forEach(h),A=T(H),p=g(H,"DIV",{class:!0});var I=D(p);S=pe(I,r),I.forEach(h),H.forEach(h),m.forEach(h),ee=T(t),v=g(t,"DIV",{class:!0});var V=D(v);$=g(V,"DIV",{class:!0});var L=D($);k=g(L,"BUTTON",{class:!0});var Ne=D(k);oe(G.$$.fragment,Ne),Ne.forEach(h),te=T(L),y=g(L,"INPUT",{class:!0,type:!0,name:!0,placeholder:!0}),ae=T(L),O=g(L,"DIV",{"data-popup":!0,class:!0});var Ue=D(O);oe(w.$$.fragment,Ue),Ue.forEach(h),le=T(L),j=g(L,"BUTTON",{class:!0});var Ae=D(j);oe(C.$$.fragment,Ae),Ae.forEach(h),L.forEach(h),c=T(V),B=g(V,"IMG",{src:!0,alt:!0,class:!0}),_e=T(V),z=g(V,"DIV",{class:!0});var de=D(z);M=g(de,"DIV",{class:!0});var fe=D(M);K=g(fe,"DIV",{class:!0,"data-svelte-h":!0}),Ze(K)!=="svelte-ee32r3"&&(K.textContent=Te),ge=T(fe),F=g(fe,"INPUT",{type:!0,placeholder:!0}),fe.forEach(h),he=T(de),oe(q.$$.fragment,de),de.forEach(h),be=T(V),ke=g(V,"HR",{}),$e=T(V);for(let Se=0;Se<b.length;Se+=1)b[Se].l(V);V.forEach(h),this.h()},h(){i(s,"class","btn btn-icon flex gap-4 items-center self-start"),i(f,"class","leading-4 font-bold"),i(p,"class","leading-4 opacity-60"),i(u,"class","flex flex-col"),i(l,"class","flex flex-row gap-2 items-center bg-secondary-600/20 p-2"),i(k,"class","btn btn-icon-lg flex gap-4 items-center"),k.disabled=e[7]<=0,i(y,"class","input autocomplete"),i(y,"type","search"),i(y,"name","autocomplete-search"),i(y,"placeholder","Pick a table"),i(O,"data-popup","popupAutocomplete"),i(O,"class","card max-h-48 p-4 overflow-y-auto z-50 max-w-[80vw]"),i(j,"class","btn btn-icon-lg flex gap-4 items-center"),i($,"class","flex"),je(B.src,ce=ze(e[4]))||i(B,"src",ce),i(B,"alt",""),i(B,"class","card aspectTable rounded svelte-cprdlx"),i(K,"class","input-group-shim"),i(F,"type","number"),i(F,"placeholder","1234567890"),i(M,"class","input-group input-group-divider grid-cols-[auto_1fr_auto]"),i(z,"class","flex gap-4 items-center"),i(v,"class","flex flex-col gap-4 p-4 md:p-10 min-h-full")},m(t,m){x(t,l,m),n(l,s),re(a,s,null),n(l,o),n(l,u),n(u,f),n(f,d),n(f,U),n(u,A),n(u,p),n(p,S),x(t,ee,m),x(t,v,m),n(v,$),n($,k),re(G,k,null),n($,te),n($,y),X(y,e[3]),n($,ae),n($,O),re(w,O,null),n($,le),n($,j),re(C,j,null),n(v,c),n(v,B),n(v,_e),n(v,z),n(z,M),n(M,K),n(M,ge),n(M,F),X(F,e[2][e[6]].games[e[7]].balls),n(z,he),re(q,z,null),n(v,be),n(v,ke),n(v,$e);for(let P=0;P<b.length;P+=1)b[P]&&b[P].m(v,null);W=!0,Ie||(Ve=[J(s,"click",e[16]),J(k,"click",e[17]),J(y,"input",e[18]),Je(ut.call(null,y,e[12])),J(j,"click",e[20]),J(F,"input",e[21])],Ie=!0)},p(t,m){var Z;(!W||m&2)&&r!==(r=((Z=t[1])==null?void 0:Z.title)+"")&&Re(S,r),m&8&&y.value!==t[3]&&X(y,t[3]);const P={};m&32&&(P.options=t[5]),!se&&m&8&&(se=!0,P.input=t[3],Ce(()=>se=!1)),w.$set(P),(!W||m&16&&!je(B.src,ce=ze(t[4])))&&i(B,"src",ce),m&196&&me(F.value)!==t[2][t[6]].games[t[7]].balls&&X(F,t[2][t[6]].games[t[7]].balls);const H={};if(m&268435456&&(H.$$scope={dirty:m,ctx:t}),!ve&&m&196&&(ve=!0,H.checked=t[2][t[6]].games[t[7]].vpin,Ce(()=>ve=!1)),q.$set(H),m&198){Y=qe(t[1].players);let I;for(I=0;I<Y.length;I+=1){const V=Me(t,Y,I);b[I]?b[I].p(V,m):(b[I]=Le(V),b[I].c(),b[I].m(v,null))}for(;I<b.length;I+=1)b[I].d(1);b.length=Y.length}},i(t){W||(R(a.$$.fragment,t),R(G.$$.fragment,t),R(w.$$.fragment,t),R(C.$$.fragment,t),R(q.$$.fragment,t),W=!0)},o(t){Q(a.$$.fragment,t),Q(G.$$.fragment,t),Q(w.$$.fragment,t),Q(C.$$.fragment,t),Q(q.$$.fragment,t),W=!1},d(t){t&&(h(l),h(ee),h(v)),ie(a),ie(G),ie(w),ie(C),ie(q),Xe(b,t),Ie=!1,xe(Ve)}}}function _t(e){let l;return{c(){l=ue("VPin")},l(s){l=pe(s,"VPin")},m(s,a){x(s,l,a)},d(s){s&&h(l)}}}function Le(e){let l,s,a=e[25]+"",o,u,f,d,N,U;function A(){e[23].call(f,e[25])}return{c(){l=_("div"),s=_("div"),o=ue(a),u=E(),f=_("input"),d=E(),this.h()},l(p){l=g(p,"DIV",{class:!0});var r=D(l);s=g(r,"DIV",{class:!0});var S=D(s);o=pe(S,a),S.forEach(h),u=T(r),f=g(r,"INPUT",{type:!0,placeholder:!0}),d=T(r),r.forEach(h),this.h()},h(){i(s,"class","input-group-shim w-[8rem]"),i(f,"type","number"),i(f,"placeholder","Enter score..."),i(l,"class","input-group input-group-divider grid-cols-[auto_1fr_auto]")},m(p,r){x(p,l,r),n(l,s),n(s,o),n(l,u),n(l,f),X(f,e[2][e[6]].games[e[7]].scores[e[25]]),n(l,d),N||(U=J(f,"input",A),N=!0)},p(p,r){e=p,r&2&&a!==(a=e[25]+"")&&Re(o,a),r&198&&me(f.value)!==e[2][e[6]].games[e[7]].scores[e[25]]&&X(f,e[2][e[6]].games[e[7]].scores[e[25]])},d(p){p&&h(l),N=!1,U()}}}function gt(e){let l,s,a=e[0]&&e[1]&&He(e);return{c(){a&&a.c(),l=Ge()},l(o){a&&a.l(o),l=Ge()},m(o,u){a&&a.m(o,u),x(o,l,u),s=!0},p(o,[u]){o[0]&&o[1]?a?(a.p(o,u),u&3&&R(a,1)):(a=He(o),a.c(),R(a,1),a.m(l.parentNode,l)):a&&(lt(),Q(a,1,1,()=>{a=null}),st())},i(o){s||(R(a),s=!0)},o(o){Q(a),s=!1},d(o){o&&h(l),a&&a.d(o)}}}function ht(e,l,s){let a,o,u,f,d,N,U,{data:A}=l,{tindex:p,gindex:r}=A;const{tournamentStore:S}=it;ye(e,S,c=>s(2,d=c));const{sortedFilesStore:ee,sortedDbStore:v}=dt;ye(e,v,c=>s(14,N=c));const{dbStore:$}=ft;ye(e,$,c=>s(15,U=c));let k=(u==null?void 0:u.name)||"";Ye(()=>{s(3,k=(u==null?void 0:u.name)||"")});function G(c){s(3,k=c.detail.label),et(S,d[p].games[r].gameId=c.detail.value,d)}let te={event:"focus-click",target:"popupAutocomplete",placement:"bottom"};const y=()=>{De("/tournaments/"+p)},ae=()=>{De(p+"/"+r-1)};function O(){k=this.value,s(3,k)}function w(c){k=c,s(3,k)}const se=()=>{r===d.length-1&&d[p].games.push({balls:3,points:{},scores:{},gameId:""}),De(""+(parseInt(r)+1))};function le(){d[p].games[r].balls=me(this.value),S.set(d)}function j(c){e.$$.not_equal(d[p].games[r].vpin,c)&&(d[p].games[r].vpin=c,S.set(d))}function C(c){d[p].games[r].scores[c]=me(this.value),S.set(d)}return e.$$set=c=>{"data"in c&&s(13,A=c.data)},e.$$.update=()=>{var c;e.$$.dirty&4&&s(1,a=d[p]),e.$$.dirty&2&&s(0,o=(((c=a==null?void 0:a.games)==null?void 0:c.length)||-1)>=r?a==null?void 0:a.games[r]:void 0),e.$$.dirty&32769&&s(4,u=o.gameId?U[o.gameId]:void 0),e.$$.dirty&16384&&s(5,f=N.map(B=>({label:B.name,value:B.id})))},[o,a,d,k,u,f,p,r,S,v,$,G,te,A,N,U,y,ae,O,w,se,le,j,C]}class Bt extends tt{constructor(l){super(),at(this,l,ht,gt,We,{data:13})}}export{Bt as component,wt as universal};
