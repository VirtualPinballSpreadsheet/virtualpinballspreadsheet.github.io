import{s as Ce,x as De,f as p,g as D,h as B,d as m,j as c,i as K,y as Ee,z as Le,A as Ae,v as F,C as me,D as be,a as q,c as M,G as h,H as j,I as ye,J as Fe,w as Q,N as $,p as Te,ad as Qe,W as x,e as ve,B as Pe,l as X,Z as Ie,m as Y,n as ge,$ as Xe,a6 as Ye}from"../chunks/scheduler.c1c84dbf.js";import{S as Be,i as Ve,a as V,t as O,g as ke,c as pe,b as Je,d as Ke,m as We,e as Ze,p as xe}from"../chunks/index.64b0efba.js";import{e as Re}from"../chunks/each.388c6565.js";import{U as we,E as $e}from"../chunks/UserStore.5d3aa27b.js";import{S as el}from"../chunks/SearchStore.0a0d62dd.js";import{g as ll}from"../chunks/stores.f8dcf0f0.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.ec37df6e.js";function tl(a){let e,t,n;const s=a[12].default,i=De(s,a,a[11],null);return{c(){e=p("div"),i&&i.c(),this.h()},l(l){e=D(l,"DIV",{class:!0,role:!0,"aria-labelledby":!0,"data-testid":!0});var o=B(e);i&&i.l(o),o.forEach(m),this.h()},h(){c(e,"class",t="listbox "+a[1]),c(e,"role","listbox"),c(e,"aria-labelledby",a[0]),c(e,"data-testid","listbox")},m(l,o){K(l,e,o),i&&i.m(e,null),n=!0},p(l,[o]){i&&i.p&&(!n||o&2048)&&Ee(i,s,l,l[11],n?Ae(s,l[11],o,null):Le(l[11]),null),(!n||o&2&&t!==(t="listbox "+l[1]))&&c(e,"class",t),(!n||o&1)&&c(e,"aria-labelledby",l[0])},i(l){n||(V(i,l),n=!0)},o(l){O(i,l),n=!1},d(l){l&&m(e),i&&i.d(l)}}}const al="";function il(a,e,t){let n,{$$slots:s={},$$scope:i}=e,{multiple:l=!1}=e,{spacing:o="space-y-1"}=e,{rounded:f="rounded-token"}=e,{active:E="variant-filled"}=e,{hover:L="hover:variant-soft"}=e,{padding:A="px-4 py-2"}=e,{regionLead:y=""}=e,{regionDefault:b=""}=e,{regionTrail:T=""}=e,{labelledby:S=""}=e;return F("multiple",l),F("rounded",f),F("active",E),F("hover",L),F("padding",A),F("regionLead",y),F("regionDefault",b),F("regionTrail",T),a.$$set=u=>{t(13,e=me(me({},e),be(u))),"multiple"in u&&t(2,l=u.multiple),"spacing"in u&&t(3,o=u.spacing),"rounded"in u&&t(4,f=u.rounded),"active"in u&&t(5,E=u.active),"hover"in u&&t(6,L=u.hover),"padding"in u&&t(7,A=u.padding),"regionLead"in u&&t(8,y=u.regionLead),"regionDefault"in u&&t(9,b=u.regionDefault),"regionTrail"in u&&t(10,T=u.regionTrail),"labelledby"in u&&t(0,S=u.labelledby),"$$scope"in u&&t(11,i=u.$$scope)},a.$$.update=()=>{t(1,n=`${al} ${o} ${f} ${e.class??""}`)},e=be(e),[S,n,l,o,f,E,L,A,y,b,T,i,s]}class nl extends Be{constructor(e){super(),Ve(this,e,il,tl,Ce,{multiple:2,spacing:3,rounded:4,active:5,hover:6,padding:7,regionLead:8,regionDefault:9,regionTrail:10,labelledby:0})}}const sl=a=>({}),Oe=a=>({}),ol=a=>({}),Ue=a=>({});function rl(a){let e,t=!1,n,s,i;return n=Qe(a[35][0]),{c(){e=p("input"),this.h()},l(l){e=D(l,"INPUT",{type:!0,name:!0,tabindex:!0}),this.h()},h(){c(e,"type","radio"),c(e,"name",a[1]),e.__value=a[2],x(e,e.__value),c(e,"tabindex","-1"),n.p(e)},m(l,o){K(l,e,o),a[33](e),e.checked=e.__value===a[0],s||(i=[j(e,"change",a[34]),j(e,"click",a[29]),j(e,"change",a[30])],s=!0)},p(l,o){o[0]&2&&c(e,"name",l[1]),o[0]&4&&(e.__value=l[2],x(e,e.__value),t=!0),(t||o[0]&1)&&(e.checked=e.__value===l[0])},d(l){l&&m(e),a[33](null),n.r(),s=!1,ye(i)}}}function ul(a){let e,t,n;return{c(){e=p("input"),this.h()},l(s){e=D(s,"INPUT",{type:!0,name:!0,tabindex:!0}),this.h()},h(){c(e,"type","checkbox"),c(e,"name",a[1]),e.__value=a[2],x(e,e.__value),c(e,"tabindex","-1")},m(s,i){K(s,e,i),a[31](e),e.checked=a[4],t||(n=[j(e,"change",a[32]),j(e,"click",a[27]),j(e,"change",a[28])],t=!0)},p(s,i){i[0]&2&&c(e,"name",s[1]),i[0]&4&&(e.__value=s[2],x(e,e.__value)),i[0]&16&&(e.checked=s[4])},d(s){s&&m(e),a[31](null),t=!1,ye(n)}}}function je(a){let e,t,n;const s=a[23].lead,i=De(s,a,a[22],Ue);return{c(){e=p("div"),i&&i.c(),this.h()},l(l){e=D(l,"DIV",{class:!0});var o=B(e);i&&i.l(o),o.forEach(m),this.h()},h(){c(e,"class",t="listbox-label-lead "+a[9])},m(l,o){K(l,e,o),i&&i.m(e,null),n=!0},p(l,o){i&&i.p&&(!n||o[0]&4194304)&&Ee(i,s,l,l[22],n?Ae(s,l[22],o,ol):Le(l[22]),Ue),(!n||o[0]&512&&t!==(t="listbox-label-lead "+l[9]))&&c(e,"class",t)},i(l){n||(V(i,l),n=!0)},o(l){O(i,l),n=!1},d(l){l&&m(e),i&&i.d(l)}}}function qe(a){let e,t,n;const s=a[23].trail,i=De(s,a,a[22],Oe);return{c(){e=p("div"),i&&i.c(),this.h()},l(l){e=D(l,"DIV",{class:!0});var o=B(e);i&&i.l(o),o.forEach(m),this.h()},h(){c(e,"class",t="listbox-label-trail "+a[7])},m(l,o){K(l,e,o),i&&i.m(e,null),n=!0},p(l,o){i&&i.p&&(!n||o[0]&4194304)&&Ee(i,s,l,l[22],n?Ae(s,l[22],o,sl):Le(l[22]),Oe),(!n||o[0]&128&&t!==(t="listbox-label-trail "+l[7]))&&c(e,"class",t)},i(l){n||(V(i,l),n=!0)},o(l){O(i,l),n=!1},d(l){l&&m(e),i&&i.d(l)}}}function fl(a){let e,t,n,s,i,l,o,f,E,L,A,y,b,T;function S(d,v){return d[3]?ul:rl}let u=S(a),I=u(a),_=a[13].lead&&je(a);const N=a[23].default,k=De(N,a,a[22],null);let g=a[13].trail&&qe(a);return{c(){e=p("label"),t=p("div"),n=p("div"),I.c(),s=q(),i=p("div"),_&&_.c(),l=q(),o=p("div"),k&&k.c(),E=q(),g&&g.c(),this.h()},l(d){e=D(d,"LABEL",{});var v=B(e);t=D(v,"DIV",{class:!0,"data-testid":!0,role:!0,"aria-selected":!0,tabindex:!0});var R=B(t);n=D(R,"DIV",{class:!0});var U=B(n);I.l(U),U.forEach(m),s=M(R),i=D(R,"DIV",{class:!0});var P=B(i);_&&_.l(P),l=M(P),o=D(P,"DIV",{class:!0});var G=B(o);k&&k.l(G),G.forEach(m),E=M(P),g&&g.l(P),P.forEach(m),R.forEach(m),v.forEach(m),this.h()},h(){c(n,"class","h-0 w-0 overflow-hidden"),c(o,"class",f="listbox-label-content "+a[8]),c(i,"class",L="listbox-label "+a[10]),c(t,"class",A="listbox-item "+a[11]),c(t,"data-testid","listbox-item"),c(t,"role","option"),c(t,"aria-selected",a[5]),c(t,"tabindex","0")},m(d,v){K(d,e,v),h(e,t),h(t,n),I.m(n,null),h(t,s),h(t,i),_&&_.m(i,null),h(i,l),h(i,o),k&&k.m(o,null),h(i,E),g&&g.m(i,null),y=!0,b||(T=[j(t,"keydown",a[12]),j(t,"keydown",a[24]),j(t,"keyup",a[25]),j(t,"keypress",a[26])],b=!0)},p(d,v){u===(u=S(d))&&I?I.p(d,v):(I.d(1),I=u(d),I&&(I.c(),I.m(n,null))),d[13].lead?_?(_.p(d,v),v[0]&8192&&V(_,1)):(_=je(d),_.c(),V(_,1),_.m(i,l)):_&&(ke(),O(_,1,1,()=>{_=null}),pe()),k&&k.p&&(!y||v[0]&4194304)&&Ee(k,N,d,d[22],y?Ae(N,d[22],v,null):Le(d[22]),null),(!y||v[0]&256&&f!==(f="listbox-label-content "+d[8]))&&c(o,"class",f),d[13].trail?g?(g.p(d,v),v[0]&8192&&V(g,1)):(g=qe(d),g.c(),V(g,1),g.m(i,null)):g&&(ke(),O(g,1,1,()=>{g=null}),pe()),(!y||v[0]&1024&&L!==(L="listbox-label "+d[10]))&&c(i,"class",L),(!y||v[0]&2048&&A!==(A="listbox-item "+d[11]))&&c(t,"class",A),(!y||v[0]&32)&&c(t,"aria-selected",d[5])},i(d){y||(V(_),V(k,d),V(g),y=!0)},o(d){O(_),O(k,d),O(g),y=!1},d(d){d&&m(e),I.d(),_&&_.d(),k&&k.d(d),g&&g.d(),b=!1,ye(T)}}}const cl="cursor-pointer -outline-offset-[3px]",dl="flex items-center space-x-4",hl="",_l="flex-1",gl="";function Se(a,e){if(a===e)return!0;if(!(a instanceof Object)||!(e instanceof Object))return!1;const t=Object.keys(a),n=Object.keys(e);if(t.length!==n.length)return!1;for(const s of t){const i=a[s],l=e[s];if(!Se(i,l))return!1}return!0}function ml(a,e,t){let n,s,i,l,o,f,E,{$$slots:L={},$$scope:A}=e;const y=Fe(L);let{group:b}=e,{name:T}=e,{value:S}=e,{multiple:u=Q("multiple")}=e,{rounded:I=Q("rounded")}=e,{active:_=Q("active")}=e,{hover:N=Q("hover")}=e,{padding:k=Q("padding")}=e,{regionLead:g=Q("regionLead")}=e,{regionDefault:d=Q("regionDefault")}=e,{regionTrail:v=Q("regionTrail")}=e,R,U;function P(r){t(4,R=r.indexOf(S)>=0)}function G(r){const C=b.indexOf(S);r?C<0&&(b.push(S),t(0,b)):C>=0&&(b.splice(C,1),t(0,b))}function ee(r){["Enter","Space"].includes(r.code)&&(r.preventDefault(),U.click())}const te=[[]];function z(r){$.call(this,a,r)}function Z(r){$.call(this,a,r)}function se(r){$.call(this,a,r)}function ae(r){$.call(this,a,r)}function H(r){$.call(this,a,r)}function ie(r){$.call(this,a,r)}function J(r){$.call(this,a,r)}function oe(r){Te[r?"unshift":"push"](()=>{U=r,t(6,U)})}function W(){R=this.checked,t(4,R)}function ne(r){Te[r?"unshift":"push"](()=>{U=r,t(6,U)})}function re(){b=this.__value,t(0,b)}return a.$$set=r=>{t(38,e=me(me({},e),be(r))),"group"in r&&t(0,b=r.group),"name"in r&&t(1,T=r.name),"value"in r&&t(2,S=r.value),"multiple"in r&&t(3,u=r.multiple),"rounded"in r&&t(14,I=r.rounded),"active"in r&&t(15,_=r.active),"hover"in r&&t(16,N=r.hover),"padding"in r&&t(17,k=r.padding),"regionLead"in r&&t(18,g=r.regionLead),"regionDefault"in r&&t(19,d=r.regionDefault),"regionTrail"in r&&t(20,v=r.regionTrail),"$$scope"in r&&t(22,A=r.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&9&&u&&P(b),a.$$.dirty[0]&24&&u&&G(R),a.$$.dirty[0]&13&&t(5,n=u?b.some(r=>Se(S,r)):Se(b,S)),a.$$.dirty[0]&98336&&t(21,s=n?_:N),t(11,i=`${cl} ${I} ${k} ${s} ${e.class??""}`),a.$$.dirty[0]&262144&&t(9,o=`${hl} ${g}`),a.$$.dirty[0]&524288&&t(8,f=`${_l} ${d}`),a.$$.dirty[0]&1048576&&t(7,E=`${gl} ${v}`)},t(10,l=`${dl}`),e=be(e),[b,T,S,u,R,n,U,E,f,o,l,i,ee,y,I,_,N,k,g,d,v,s,A,L,z,Z,se,ae,H,ie,J,oe,W,ne,re,te]}class bl extends Be{constructor(e){super(),Ve(this,e,ml,fl,Ce,{group:0,name:1,value:2,multiple:3,rounded:14,active:15,hover:16,padding:17,regionLead:18,regionDefault:19,regionTrail:20},null,[-1,-1])}}const Me=(a,e)=>{if(!a||!e)return 99;for(var t=a.length,n=e.length,s=new Array,i=0;i<=t;i++)s[i]=new Array,s[i][0]=i;for(var l=0;l<=n;l++)s[0][l]=l;for(var o=0,l=1;l<=n;l++)for(var i=1;i<=t;i++)o=a.charAt(i-1)==e.charAt(l-1)?0:1,s[i][l]=Math.min(s[i][l-1]+1,Math.min(s[i-1][l]+1,s[i-1][l-1]+o)),i>1&&l>1&&a.charAt(i-1)==e.charAt(l-2)&&a.charAt(i-2)==e.charAt(l-1)&&(s[i][l]=Math.min(s[i][l],s[i-2][l-2]+o));return s[t][n]};function Ge(a,e,t){const n=a.slice();return n[7]=e[t],n}function ze(a){let e,t,n="Align authors",s,i,l,o,f,E,L=a[3].length+"",A,y,b,T,S,u,I,_,N,k,g,d=a[2].length+"",v,R,U,P,G=a[2].join(", ")+"",ee,te,z,Z,se="Replace with",ae,H,ie,J,oe="Replace authors",W,ne,re;return u=new nl({props:{multiple:!0,class:"flex-1 p-2 border border-primary-400 max-h-[30rem] overflow-y-scroll",$$slots:{default:[kl]},$$scope:{ctx:a}}}),{c(){e=p("div"),t=p("div"),t.textContent=n,s=q(),i=p("div"),l=p("div"),o=p("label"),f=p("span"),E=X("Search authors ("),A=X(L),y=X(")"),b=q(),T=p("input"),S=q(),Je(u.$$.fragment),I=q(),_=p("div"),N=p("label"),k=p("span"),g=X("Selected authors ("),v=X(d),R=X(")"),U=q(),P=p("div"),ee=X(G),te=q(),z=p("label"),Z=p("span"),Z.textContent=se,ae=q(),H=p("input"),ie=q(),J=p("button"),J.textContent=oe,this.h()},l(r){e=D(r,"DIV",{class:!0});var C=B(e);t=D(C,"DIV",{class:!0,"data-svelte-h":!0}),Ie(t)!=="svelte-12oqp44"&&(t.textContent=n),s=M(C),i=D(C,"DIV",{class:!0});var w=B(i);l=D(w,"DIV",{class:!0});var ue=B(l);o=D(ue,"LABEL",{class:!0});var fe=B(o);f=D(fe,"SPAN",{});var ce=B(f);E=Y(ce,"Search authors ("),A=Y(ce,L),y=Y(ce,")"),ce.forEach(m),b=M(fe),T=D(fe,"INPUT",{class:!0}),fe.forEach(m),S=M(ue),Ke(u.$$.fragment,ue),ue.forEach(m),I=M(w),_=D(w,"DIV",{class:!0});var le=B(_);N=D(le,"LABEL",{class:!0});var de=B(N);k=D(de,"SPAN",{});var he=B(k);g=Y(he,"Selected authors ("),v=Y(he,d),R=Y(he,")"),he.forEach(m),U=M(de),P=D(de,"DIV",{class:!0});var Ne=B(P);ee=Y(Ne,G),Ne.forEach(m),de.forEach(m),te=M(le),z=D(le,"LABEL",{class:!0});var _e=B(z);Z=D(_e,"SPAN",{"data-svelte-h":!0}),Ie(Z)!=="svelte-16993am"&&(Z.textContent=se),ae=M(_e),H=D(_e,"INPUT",{class:!0}),_e.forEach(m),ie=M(le),J=D(le,"BUTTON",{class:!0,"data-svelte-h":!0}),Ie(J)!=="svelte-q8n08f"&&(J.textContent=oe),le.forEach(m),w.forEach(m),C.forEach(m),this.h()},h(){c(t,"class","font-bold text-3xl"),c(T,"class","input"),c(o,"class","label"),c(l,"class","flex flex-col gap-4 flex-1"),c(P,"class","p-2 border border-secondary-400 rounded-md min-h-[2.6rem]"),c(N,"class","label"),c(H,"class","input"),c(z,"class","label"),c(J,"class","btn variant-filled-primary"),c(_,"class","flex flex-col flex-1 gap-4"),c(i,"class","flex gap-4 w-full"),c(e,"class","p-6 flex flex-col gap-4 w-full")},m(r,C){K(r,e,C),h(e,t),h(e,s),h(e,i),h(i,l),h(l,o),h(o,f),h(f,E),h(f,A),h(f,y),h(o,b),h(o,T),x(T,a[0]),h(l,S),We(u,l,null),h(i,I),h(i,_),h(_,N),h(N,k),h(k,g),h(k,v),h(k,R),h(N,U),h(N,P),h(P,ee),h(_,te),h(_,z),h(z,Z),h(z,ae),h(z,H),x(H,a[1]),h(_,ie),h(_,J),W=!0,ne||(re=[j(T,"input",a[9]),j(H,"input",a[11]),j(J,"click",a[6])],ne=!0)},p(r,C){(!W||C&8)&&L!==(L=r[3].length+"")&&ge(A,L),C&1&&T.value!==r[0]&&x(T,r[0]);const w={};C&32780&&(w.$$scope={dirty:C,ctx:r}),u.$set(w),(!W||C&4)&&d!==(d=r[2].length+"")&&ge(v,d),(!W||C&4)&&G!==(G=r[2].join(", ")+"")&&ge(ee,G),C&2&&H.value!==r[1]&&x(H,r[1])},i(r){W||(V(u.$$.fragment,r),W=!0)},o(r){O(u.$$.fragment,r),W=!1},d(r){r&&m(e),Ze(u),ne=!1,ye(re)}}}function vl(a){let e=a[7]+"",t;return{c(){t=X(e)},l(n){t=Y(n,e)},m(n,s){K(n,t,s)},p(n,s){s&8&&e!==(e=n[7]+"")&&ge(t,e)},d(n){n&&m(t)}}}function He(a){let e,t,n;function s(l){a[10](l)}let i={name:"medium",value:a[7],$$slots:{default:[vl]},$$scope:{ctx:a}};return a[2]!==void 0&&(i.group=a[2]),e=new bl({props:i}),Te.push(()=>xe(e,"group",s)),{c(){Je(e.$$.fragment)},l(l){Ke(e.$$.fragment,l)},m(l,o){We(e,l,o),n=!0},p(l,o){const f={};o&8&&(f.value=l[7]),o&32776&&(f.$$scope={dirty:o,ctx:l}),!t&&o&4&&(t=!0,f.group=l[2],Ye(()=>t=!1)),e.$set(f)},i(l){n||(V(e.$$.fragment,l),n=!0)},o(l){O(e.$$.fragment,l),n=!1},d(l){Ze(e,l)}}}function kl(a){let e,t,n=Re(a[3]),s=[];for(let l=0;l<n.length;l+=1)s[l]=He(Ge(a,n,l));const i=l=>O(s[l],1,1,()=>{s[l]=null});return{c(){for(let l=0;l<s.length;l+=1)s[l].c();e=ve()},l(l){for(let o=0;o<s.length;o+=1)s[o].l(l);e=ve()},m(l,o){for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(l,o);K(l,e,o),t=!0},p(l,o){if(o&12){n=Re(l[3]);let f;for(f=0;f<n.length;f+=1){const E=Ge(l,n,f);s[f]?(s[f].p(E,o),V(s[f],1)):(s[f]=He(E),s[f].c(),V(s[f],1),s[f].m(e.parentNode,e))}for(ke(),f=n.length;f<s.length;f+=1)i(f);pe()}},i(l){if(!t){for(let o=0;o<n.length;o+=1)V(s[o]);t=!0}},o(l){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)O(s[o]);t=!1},d(l){l&&m(e),Xe(s,l)}}}function pl(a){let e,t,n=a[4].admin&&ze(a);return{c(){n&&n.c(),e=ve()},l(s){n&&n.l(s),e=ve()},m(s,i){n&&n.m(s,i),K(s,e,i),t=!0},p(s,[i]){s[4].admin?n?(n.p(s,i),i&16&&V(n,1)):(n=ze(s),n.c(),V(n,1),n.m(e.parentNode,e)):n&&(ke(),O(n,1,1,()=>{n=null}),pe())},i(s){t||(V(n),t=!0)},o(s){O(n),t=!1},d(s){s&&m(e),n&&n.d(s)}}}function Dl(a,e,t){let n,s,i;const l=ll(),{userStore:o}=we;Pe(a,o,u=>t(4,i=u));const{author:f}=el;Pe(a,f,u=>t(8,s=u));let E="",L="",A=[];const y=()=>{$e.alignAuthors(L,A),l.trigger({message:`Aligned authors to ${L}.`}),t(0,E=""),t(1,L=""),t(2,A=[])};function b(){E=this.value,t(0,E)}function T(u){A=u,t(2,A)}function S(){L=this.value,t(1,L)}return a.$$.update=()=>{a.$$.dirty&257&&t(3,n=s.options.map(u=>u.label).sort((u,I)=>Me(E,u)-Me(E,I)))},[E,L,A,n,i,o,y,f,s,b,T,S]}class Cl extends Be{constructor(e){super(),Ve(this,e,Dl,pl,Ce,{})}}export{Cl as component};
